{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient } from \"@supabase/ssr\"\r\n\r\nexport function createClient() {\r\n  return createBrowserClient(process.env.NEXT_PUBLIC_SUPABASE_URL!, process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!)\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAEO,SAAS;IACd,OAAO,IAAA,iMAAmB;AAC5B"}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\r\nimport { twMerge } from 'tailwind-merge'\r\n\r\nexport function cn(...inputs: ClassValue[]) {\r\n  return twMerge(clsx(inputs))\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\r\nimport { Slot } from '@radix-ui/react-slot'\r\nimport { cva, type VariantProps } from 'class-variance-authority'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nconst buttonVariants = cva(\r\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\r\n  {\r\n    variants: {\r\n      variant: {\r\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\r\n        destructive:\r\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\r\n        outline:\r\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\r\n        secondary:\r\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\r\n        ghost:\r\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\r\n        link: 'text-primary underline-offset-4 hover:underline',\r\n      },\r\n      size: {\r\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\r\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\r\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\r\n        icon: 'size-9',\r\n        'icon-sm': 'size-8',\r\n        'icon-lg': 'size-10',\r\n      },\r\n    },\r\n    defaultVariants: {\r\n      variant: 'default',\r\n      size: 'default',\r\n    },\r\n  },\r\n)\r\n\r\nfunction Button({\r\n  className,\r\n  variant,\r\n  size,\r\n  asChild = false,\r\n  ...props\r\n}: React.ComponentProps<'button'> &\r\n  VariantProps<typeof buttonVariants> & {\r\n    asChild?: boolean\r\n  }) {\r\n  const Comp = asChild ? Slot : 'button'\r\n\r\n  return (\r\n    <Comp\r\n      data-slot=\"button\"\r\n      className={cn(buttonVariants({ variant, size, className }))}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport { Button, buttonVariants }\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/navigation.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { Leaf, BarChart3, Droplet, DollarSign, Truck, LogOut } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\n\r\ninterface NavigationProps {\r\n  currentPage: string\r\n  setCurrentPage: (page: string) => void\r\n  userRole: \"user\" | \"admin\"\r\n  setUserRole: (role: \"user\" | \"admin\") => void\r\n  userEmail?: string\r\n  userLabel?: string\r\n  onLogout?: () => void\r\n}\r\n\r\nexport default function Navigation({ \r\n  currentPage, \r\n  setCurrentPage, \r\n  userRole, \r\n  setUserRole,\r\n  userEmail,\r\n  userLabel,\r\n  onLogout \r\n}: NavigationProps) {\r\n  // Check if user is authenticated as admin via sessionStorage (password login)\r\n  const isAuthenticatedAdmin = typeof window !== 'undefined' && sessionStorage.getItem(\"adminMode\") === \"true\"\r\n\r\n  const userNavItems = [\r\n    { id: \"dashboard\", label: \"Dashboard\", icon: BarChart3 },\r\n    { id: \"tracker\", label: \"Trash Tracker\", icon: Droplet },\r\n    { id: \"waste-types\", label: \"Waste Guide\", icon: Leaf },\r\n    { id: \"cost\", label: \"Cost Tracker\", icon: DollarSign },\r\n    { id: \"vehicle\", label: \"Vehicle Route\", icon: Truck },\r\n  ]\r\n\r\n  const adminNavItems = [\r\n    { id: \"dashboard\", label: \"Dashboard\", icon: BarChart3 },\r\n    { id: \"tracker\", label: \"Trash Tracker\", icon: Droplet },\r\n    { id: \"cost\", label: \"Cost Tracker\", icon: DollarSign },\r\n    { id: \"vehicle\", label: \"Vehicle Route\", icon: Truck },\r\n  ]\r\n\r\n  // Only show admin nav if authenticated as admin\r\n  const navItems = (userRole === \"admin\" && isAuthenticatedAdmin) ? adminNavItems : userNavItems\r\n\r\n  return (\r\n    <nav className=\"fixed top-0 left-0 right-0 h-16 bg-white/95 border-b border-border/40 backdrop-blur-md z-50 shadow-sm\">\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 h-full flex items-center justify-between\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-primary to-teal-accent flex items-center justify-center text-white font-bold text-lg shadow-md\">\r\n            N\r\n          </div>\r\n          <span className=\"text-xl font-bold text-foreground tracking-tight\">NeatStreet</span>\r\n        </div>\r\n\r\n        <div className=\"hidden md:flex items-center gap-1\">\r\n          {navItems.map((item) => {\r\n            const Icon = item.icon\r\n            const isActive = currentPage === item.id\r\n            return (\r\n              <button\r\n                key={item.id}\r\n                onClick={() => setCurrentPage(item.id)}\r\n                className={`flex items-center gap-2 px-3.5 py-2 rounded-xl transition-all duration-200 text-sm font-medium ${\r\n                  isActive\r\n                    ? \"bg-primary text-primary-foreground shadow-md\"\r\n                    : \"text-muted-foreground hover:bg-muted/60 hover:text-foreground\"\r\n                }`}\r\n              >\r\n                <Icon size={18} />\r\n                <span>{item.label}</span>\r\n              </button>\r\n            )\r\n          })}\r\n          {/* Show Admin badge if authenticated as admin */}\r\n          {isAuthenticatedAdmin && (\r\n            <div className=\"ml-2 pl-2 border-l border-border/40\">\r\n              <span className=\"px-2 py-1 rounded-lg text-xs font-semibold bg-primary/20 text-primary\">\r\n                Admin\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* User info and logout */}\r\n        <div className=\"flex items-center gap-2\">\r\n          {userEmail && (\r\n            <div className=\"text-right hidden sm:block\">\r\n              <p className=\"text-sm font-medium text-foreground truncate max-w-[120px]\">{userEmail}</p>\r\n              <p className=\"text-xs text-muted-foreground\">{userLabel}</p>\r\n            </div>\r\n          )}\r\n          {onLogout && (\r\n            <Button variant=\"outline\" size=\"sm\" onClick={onLogout} className=\"gap-1 shrink-0\">\r\n              <LogOut size={14} />\r\n              <span className=\"hidden sm:inline\">Logout</span>\r\n            </Button>\r\n          )}\r\n\r\n          {/* Mobile nav dropdown */}\r\n          <div className=\"md:hidden\">\r\n            <select\r\n              value={currentPage}\r\n              onChange={(e) => setCurrentPage(e.target.value)}\r\n              className=\"px-2 py-1.5 rounded-lg bg-input border border-border text-foreground text-sm focus:outline-none focus:ring-2 focus:ring-primary\"\r\n            >\r\n              {navItems.map((item) => (\r\n                <option key={item.id} value={item.id}>\r\n                  {item.label}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAee,SAAS,WAAW,EACjC,WAAW,EACX,cAAc,EACd,QAAQ,EACR,WAAW,EACX,SAAS,EACT,SAAS,EACT,QAAQ,EACQ;IAChB,8EAA8E;IAC9E,MAAM,uBAAuB,kDAAkB,eAAe,eAAe,OAAO,CAAC,iBAAiB;IAEtG,MAAM,eAAe;QACnB;YAAE,IAAI;YAAa,OAAO;YAAa,MAAM,+NAAS;QAAC;QACvD;YAAE,IAAI;YAAW,OAAO;YAAiB,MAAM,mNAAO;QAAC;QACvD;YAAE,IAAI;YAAe,OAAO;YAAe,MAAM,0MAAI;QAAC;QACtD;YAAE,IAAI;YAAQ,OAAO;YAAgB,MAAM,gOAAU;QAAC;QACtD;YAAE,IAAI;YAAW,OAAO;YAAiB,MAAM,6MAAK;QAAC;KACtD;IAED,MAAM,gBAAgB;QACpB;YAAE,IAAI;YAAa,OAAO;YAAa,MAAM,+NAAS;QAAC;QACvD;YAAE,IAAI;YAAW,OAAO;YAAiB,MAAM,mNAAO;QAAC;QACvD;YAAE,IAAI;YAAQ,OAAO;YAAgB,MAAM,gOAAU;QAAC;QACtD;YAAE,IAAI;YAAW,OAAO;YAAiB,MAAM,6MAAK;QAAC;KACtD;IAED,gDAAgD;IAChD,MAAM,WAAW,sCAAiD,0BAAgB;IAElF,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAA+I;;;;;;sCAG9J,8OAAC;4BAAK,WAAU;sCAAmD;;;;;;;;;;;;8BAGrE,8OAAC;oBAAI,WAAU;;wBACZ,SAAS,GAAG,CAAC,CAAC;4BACb,MAAM,OAAO,KAAK,IAAI;4BACtB,MAAM,WAAW,gBAAgB,KAAK,EAAE;4BACxC,qBACE,8OAAC;gCAEC,SAAS,IAAM,eAAe,KAAK,EAAE;gCACrC,WAAW,CAAC,+FAA+F,EACzG,WACI,iDACA,iEACJ;;kDAEF,8OAAC;wCAAK,MAAM;;;;;;kDACZ,8OAAC;kDAAM,KAAK,KAAK;;;;;;;+BATZ,KAAK,EAAE;;;;;wBAYlB;wBAEC,sCACC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAK,WAAU;0CAAwE;;;;;;;;;;;;;;;;;8BAQ9F,8OAAC;oBAAI,WAAU;;wBACZ,2BACC,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAE,WAAU;8CAA8D;;;;;;8CAC3E,8OAAC;oCAAE,WAAU;8CAAiC;;;;;;;;;;;;wBAGjD,0BACC,8OAAC,qIAAM;4BAAC,SAAQ;4BAAU,MAAK;4BAAK,SAAS;4BAAU,WAAU;;8CAC/D,8OAAC,oNAAM;oCAAC,MAAM;;;;;;8CACd,8OAAC;oCAAK,WAAU;8CAAmB;;;;;;;;;;;;sCAKvC,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCACC,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;0CAET,SAAS,GAAG,CAAC,CAAC,qBACb,8OAAC;wCAAqB,OAAO,KAAK,EAAE;kDACjC,KAAK,KAAK;uCADA,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUpC"}},
    {"offset": {"line": 345, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\r\n\r\nimport { cn } from '@/lib/utils'\r\n\r\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card\"\r\n      className={cn(\r\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-header\"\r\n      className={cn(\r\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-title\"\r\n      className={cn('leading-none font-semibold', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-description\"\r\n      className={cn('text-muted-foreground text-sm', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-action\"\r\n      className={cn(\r\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\r\n        className,\r\n      )}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-content\"\r\n      className={cn('px-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\r\n  return (\r\n    <div\r\n      data-slot=\"card-footer\"\r\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\r\n      {...props}\r\n    />\r\n  )\r\n}\r\n\r\nexport {\r\n  Card,\r\n  CardHeader,\r\n  CardFooter,\r\n  CardTitle,\r\n  CardAction,\r\n  CardDescription,\r\n  CardContent,\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/dashboard.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, useCallback } from \"react\"\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n} from \"recharts\"\r\nimport { TrendingUp, Leaf, Target, AlertCircle } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport type { WeeklyWasteData, WasteBreakdownData, DashboardStats } from \"@/lib/types/database\"\r\n\r\ninterface DashboardProps {\r\n  onAddLog: () => void\r\n}\r\n\r\nexport default function Dashboard({ onAddLog }: DashboardProps) {\r\n  const [wasteData, setWasteData] = useState<WeeklyWasteData[]>([])\r\n  const [wasteTypeData, setWasteTypeData] = useState<WasteBreakdownData[]>([])\r\n  const [stats, setStats] = useState<DashboardStats>({\r\n    todaysWaste: 0,\r\n    monthlyWaste: 0,\r\n    greenScore: 50,\r\n    costSaved: 0,\r\n    weeklyChange: 0,\r\n  })\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const fetchDashboardData = useCallback(async () => {\r\n    const supabase = createClient()\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) return\r\n\r\n      // Fetch weekly waste data\r\n      const today = new Date()\r\n      const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000)\r\n      \r\n      const { data: weeklyLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select('weight, logged_at')\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', weekAgo.toISOString())\r\n        .order('logged_at', { ascending: true })\r\n\r\n      // Process weekly data\r\n      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\r\n      const weeklyMap = new Map<string, number>()\r\n      \r\n      for (let i = 6; i >= 0; i--) {\r\n        const date = new Date(today.getTime() - i * 24 * 60 * 60 * 1000)\r\n        const dayName = dayNames[date.getDay()]\r\n        weeklyMap.set(dayName, 0)\r\n      }\r\n\r\n      weeklyLogs?.forEach(log => {\r\n        const date = new Date(log.logged_at)\r\n        const dayName = dayNames[date.getDay()]\r\n        weeklyMap.set(dayName, (weeklyMap.get(dayName) || 0) + Number(log.weight))\r\n      })\r\n\r\n      const processedWeeklyData: WeeklyWasteData[] = Array.from(weeklyMap.entries()).map(([name, waste]) => ({\r\n        name,\r\n        waste: Number(waste.toFixed(1))\r\n      }))\r\n\r\n      setWasteData(processedWeeklyData)\r\n\r\n      // Fetch waste breakdown by type\r\n      const { data: wasteByType } = await supabase\r\n        .from('waste_logs')\r\n        .select(`\r\n          weight,\r\n          waste_types (\r\n            name,\r\n            color\r\n          )\r\n        `)\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', new Date(today.getTime() - 30 * 24 * 60 * 60 * 1000).toISOString())\r\n\r\n      // Process waste type breakdown\r\n      const typeMap = new Map<string, { value: number; color: string }>()\r\n      \r\n      wasteByType?.forEach((log: any) => {\r\n        const typeName = log.waste_types?.name || 'Unknown'\r\n        const color = log.waste_types?.color || 'hsl(0, 0%, 50%)'\r\n        const existing = typeMap.get(typeName) || { value: 0, color }\r\n        typeMap.set(typeName, { value: existing.value + Number(log.weight), color })\r\n      })\r\n\r\n      const totalWeight = Array.from(typeMap.values()).reduce((sum, item) => sum + item.value, 0)\r\n      \r\n      const processedTypeData: WasteBreakdownData[] = Array.from(typeMap.entries()).map(([name, data]) => ({\r\n        name,\r\n        value: totalWeight > 0 ? Math.round((data.value / totalWeight) * 100) : 0,\r\n        color: data.color\r\n      }))\r\n\r\n      setWasteTypeData(processedTypeData.length > 0 ? processedTypeData : [\r\n        { name: \"No Data\", value: 100, color: \"hsl(0, 0%, 80%)\" }\r\n      ])\r\n\r\n      // Fetch today's waste\r\n      const todayStart = new Date(today.setHours(0, 0, 0, 0))\r\n      const { data: todayLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select('weight')\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', todayStart.toISOString())\r\n\r\n      const todaysWaste = todayLogs?.reduce((sum, log) => sum + Number(log.weight), 0) || 0\r\n\r\n      // Fetch monthly waste\r\n      const monthStart = new Date(today.getFullYear(), today.getMonth(), 1)\r\n      const { data: monthlyLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select('weight, cost')\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', monthStart.toISOString())\r\n\r\n      const monthlyWaste = monthlyLogs?.reduce((sum, log) => sum + Number(log.weight), 0) || 0\r\n      const totalCost = monthlyLogs?.reduce((sum, log) => sum + Number(log.cost), 0) || 0\r\n\r\n      // Fetch user profile for green score\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('green_score, total_cost_saved')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n      // Calculate weekly change\r\n      const lastWeekStart = new Date(today.getTime() - 14 * 24 * 60 * 60 * 1000)\r\n      const lastWeekEnd = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000)\r\n      \r\n      const { data: lastWeekLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select('weight')\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', lastWeekStart.toISOString())\r\n        .lt('logged_at', lastWeekEnd.toISOString())\r\n\r\n      const lastWeekWaste = lastWeekLogs?.reduce((sum, log) => sum + Number(log.weight), 0) || 0\r\n      const thisWeekWaste = weeklyLogs?.reduce((sum, log) => sum + Number(log.weight), 0) || 0\r\n      \r\n      let weeklyChange = 0\r\n      if (lastWeekWaste > 0) {\r\n        weeklyChange = Math.round(((lastWeekWaste - thisWeekWaste) / lastWeekWaste) * 100)\r\n      }\r\n\r\n      setStats({\r\n        todaysWaste: Number(todaysWaste.toFixed(1)),\r\n        monthlyWaste: Number(monthlyWaste.toFixed(1)),\r\n        greenScore: profile?.green_score || 50,\r\n        costSaved: Number((profile?.total_cost_saved || totalCost * 0.1).toFixed(2)),\r\n        weeklyChange\r\n      })\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching dashboard data:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  // Set up real-time subscription\r\n  useEffect(() => {\r\n    fetchDashboardData()\r\n\r\n    const supabase = createClient()\r\n    \r\n    // Subscribe to waste_logs changes\r\n    const channel = supabase\r\n      .channel('dashboard-realtime')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'waste_logs'\r\n        },\r\n        (payload) => {\r\n          console.log('Real-time update received:', payload)\r\n          fetchDashboardData() // Refresh data on any change\r\n        }\r\n      )\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'profiles'\r\n        },\r\n        (payload) => {\r\n          console.log('Profile update received:', payload)\r\n          fetchDashboardData()\r\n        }\r\n      )\r\n      .subscribe()\r\n\r\n    // Cleanup subscription on unmount\r\n    return () => {\r\n      supabase.removeChannel(channel)\r\n    }\r\n  }, [fetchDashboardData])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading dashboard...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8 pt-2\">\r\n          <h1 className=\"text-4xl font-bold text-foreground mb-1 tracking-tight\">Welcome Back!</h1>\r\n          <p className=\"text-muted-foreground text-lg\">Track your waste and build sustainable habits</p>\r\n        </div>\r\n\r\n        {/* Stats Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-soft-yellow/15 hover:shadow-md\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">\r\n                  Today's Waste\r\n                </p>\r\n                <p className=\"text-3xl font-bold text-foreground\">{stats.todaysWaste} kg</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-soft-yellow/30 flex items-center justify-center\">\r\n                <AlertCircle className=\"text-accent\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">\r\n              {stats.weeklyChange >= 0 ? `↓ ${stats.weeklyChange}%` : `↑ ${Math.abs(stats.weeklyChange)}%`} from last week\r\n            </p>\r\n          </Card>\r\n\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-light-teal/15 hover:shadow-md\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">This Month</p>\r\n                <p className=\"text-3xl font-bold text-foreground\">{stats.monthlyWaste} kg</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-light-teal/30 flex items-center justify-center\">\r\n                <TrendingUp className=\"text-secondary\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">On track with goal</p>\r\n          </Card>\r\n\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-primary/10 hover:shadow-md\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">Green Score</p>\r\n                <p className=\"text-3xl font-bold text-primary\">{stats.greenScore}%</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center\">\r\n                <Leaf className=\"text-primary\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">Based on waste composition</p>\r\n          </Card>\r\n\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-accent/10 hover:shadow-md\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">Cost Saved</p>\r\n                <p className=\"text-3xl font-bold text-foreground\">${stats.costSaved}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center\">\r\n                <Target className=\"text-accent\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">This month</p>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Charts */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\r\n          {/* Weekly Trend */}\r\n          <Card className=\"eco-card p-6 lg:col-span-2\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4 tracking-tight\">Weekly Waste Trend</h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={wasteData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n                <XAxis dataKey=\"name\" stroke=\"var(--muted-foreground)\" />\r\n                <YAxis stroke=\"var(--muted-foreground)\" />\r\n                <Tooltip\r\n                  contentStyle={{\r\n                    backgroundColor: \"var(--card)\",\r\n                    border: \"1px solid var(--border)\",\r\n                    borderRadius: \"0.75rem\",\r\n                  }}\r\n                />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"waste\"\r\n                  stroke=\"var(--primary)\"\r\n                  strokeWidth={3}\r\n                  dot={{ fill: \"var(--primary)\", r: 5 }}\r\n                  activeDot={{ r: 7 }}\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n\r\n          {/* Waste Breakdown */}\r\n          <Card className=\"eco-card p-6\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4 tracking-tight\">Waste Breakdown</h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <PieChart>\r\n                <Pie\r\n                  data={wasteTypeData}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  innerRadius={60}\r\n                  outerRadius={100}\r\n                  paddingAngle={2}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {wasteTypeData.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={entry.color} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n            <div className=\"mt-4 space-y-2\">\r\n              {wasteTypeData.map((type) => (\r\n                <div key={type.name} className=\"flex items-center justify-between text-sm\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: type.color }} />\r\n                    <span className=\"text-muted-foreground\">{type.name}</span>\r\n                  </div>\r\n                  <span className=\"font-semibold text-foreground\">{type.value}%</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* CTA */}\r\n        <Button\r\n          onClick={onAddLog}\r\n          className=\"w-full md:w-auto px-8 py-6 text-base bg-gradient-to-r from-primary to-accent hover:shadow-lg text-primary-foreground rounded-xl font-semibold transition-all duration-200 gap-2\"\r\n        >\r\n          <Plus size={20} />\r\n          Add Waste Log\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction Plus({ size }: any) {\r\n  return (\r\n    <svg width={size} height={size} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\r\n      <line x1=\"12\" y1=\"5\" x2=\"12\" y2=\"19\" />\r\n      <line x1=\"5\" y1=\"12\" x2=\"19\" y2=\"12\" />\r\n    </svg>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1245, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/admin-dashboard.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, useCallback } from \"react\"\r\nimport {\r\n  LineChart,\r\n  Line,\r\n  XAxis,\r\n  YAxis,\r\n  CartesianGrid,\r\n  Tooltip,\r\n  ResponsiveContainer,\r\n  PieChart,\r\n  Pie,\r\n  Cell,\r\n  BarChart,\r\n  Bar,\r\n} from \"recharts\"\r\nimport { Users, TrendingUp, Trash2, Zap, ChevronDown, X, Eye } from \"lucide-react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport type { AdminStats } from \"@/lib/types/database\"\r\n\r\ninterface WeeklyData {\r\n  name: string\r\n  waste: number\r\n  users: number\r\n}\r\n\r\ninterface WasteDistribution {\r\n  name: string\r\n  value: number\r\n  color: string\r\n  [key: string]: string | number\r\n}\r\n\r\ninterface VehicleData {\r\n  name: string\r\n  trips: number\r\n  distance: number\r\n  cost: number\r\n  status: string\r\n}\r\n\r\ninterface UserProfile {\r\n  id: string\r\n  email: string\r\n  username: string | null\r\n  full_name: string | null\r\n  total_waste_logged: number\r\n  green_score: number\r\n}\r\n\r\ninterface UserWasteLog {\r\n  id: string\r\n  weight: number\r\n  cost: number\r\n  logged_at: string\r\n  location: string | null\r\n  notes: string | null\r\n  waste_type_name: string\r\n}\r\n\r\nexport default function AdminDashboard() {\r\n  const [adminWasteData, setAdminWasteData] = useState<WeeklyData[]>([])\r\n  const [wasteTypeDistribution, setWasteTypeDistribution] = useState<WasteDistribution[]>([])\r\n  const [vehicleData, setVehicleData] = useState<VehicleData[]>([])\r\n  const [stats, setStats] = useState<AdminStats>({\r\n    totalWaste: 0,\r\n    avgWastePerDay: 0,\r\n    totalUsers: 0,\r\n    activeRoutes: 0,\r\n    fleetCosts: 0\r\n  })\r\n  const [loading, setLoading] = useState(true)\r\n  \r\n  // User logs viewer state\r\n  const [users, setUsers] = useState<UserProfile[]>([])\r\n  const [selectedUser, setSelectedUser] = useState<UserProfile | null>(null)\r\n  const [userLogs, setUserLogs] = useState<UserWasteLog[]>([])\r\n  const [loadingUserLogs, setLoadingUserLogs] = useState(false)\r\n  const [showUserSelector, setShowUserSelector] = useState(false)\r\n\r\n  const fetchAdminData = useCallback(async () => {\r\n    const supabase = createClient()\r\n    \r\n    try {\r\n      // Fetch weekly waste data (all users)\r\n      const today = new Date()\r\n      const weekAgo = new Date(today.getTime() - 7 * 24 * 60 * 60 * 1000)\r\n      \r\n      const { data: weeklyLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select('weight, logged_at, user_id')\r\n        .gte('logged_at', weekAgo.toISOString())\r\n        .order('logged_at', { ascending: true })\r\n\r\n      // Process weekly data\r\n      const dayNames = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat']\r\n      const weeklyMap = new Map<string, { waste: number; users: Set<string> }>()\r\n      \r\n      for (let i = 6; i >= 0; i--) {\r\n        const date = new Date(today.getTime() - i * 24 * 60 * 60 * 1000)\r\n        const dayName = dayNames[date.getDay()]\r\n        weeklyMap.set(dayName, { waste: 0, users: new Set() })\r\n      }\r\n\r\n      weeklyLogs?.forEach(log => {\r\n        const date = new Date(log.logged_at)\r\n        const dayName = dayNames[date.getDay()]\r\n        const existing = weeklyMap.get(dayName)!\r\n        existing.waste += Number(log.weight)\r\n        existing.users.add(log.user_id)\r\n      })\r\n\r\n      const processedWeeklyData: WeeklyData[] = Array.from(weeklyMap.entries()).map(([name, data]) => ({\r\n        name,\r\n        waste: Number(data.waste.toFixed(0)),\r\n        users: data.users.size\r\n      }))\r\n\r\n      setAdminWasteData(processedWeeklyData)\r\n\r\n      // Calculate total waste and average\r\n      const totalWaste = processedWeeklyData.reduce((sum, d) => sum + d.waste, 0)\r\n      const avgWastePerDay = totalWaste / 7\r\n\r\n      // Fetch waste type distribution\r\n      const { data: wasteByType } = await supabase\r\n        .from('waste_logs')\r\n        .select(`\r\n          weight,\r\n          waste_types (\r\n            name,\r\n            color\r\n          )\r\n        `)\r\n        .gte('logged_at', weekAgo.toISOString())\r\n\r\n      const typeMap = new Map<string, { value: number; color: string }>()\r\n      \r\n      wasteByType?.forEach((log: any) => {\r\n        const typeName = log.waste_types?.name || 'Unknown'\r\n        const color = log.waste_types?.color || 'hsl(0, 0%, 50%)'\r\n        const existing = typeMap.get(typeName) || { value: 0, color }\r\n        typeMap.set(typeName, { value: existing.value + Number(log.weight), color })\r\n      })\r\n\r\n      const totalTypeWeight = Array.from(typeMap.values()).reduce((sum, item) => sum + item.value, 0)\r\n      \r\n      const processedTypeData: WasteDistribution[] = Array.from(typeMap.entries()).map(([name, data]) => ({\r\n        name,\r\n        value: totalTypeWeight > 0 ? Math.round((data.value / totalTypeWeight) * 100) : 0,\r\n        color: data.color\r\n      }))\r\n\r\n      setWasteTypeDistribution(processedTypeData.length > 0 ? processedTypeData : [\r\n        { name: \"No Data\", value: 100, color: \"hsl(0, 0%, 80%)\" }\r\n      ])\r\n\r\n      // Fetch total users\r\n      const { count: userCount } = await supabase\r\n        .from('profiles')\r\n        .select('*', { count: 'exact', head: true })\r\n\r\n      // Fetch routes with vehicles\r\n      const { data: routes } = await supabase\r\n        .from('routes')\r\n        .select(`\r\n          id,\r\n          name,\r\n          status,\r\n          total_stops,\r\n          distance,\r\n          vehicles (\r\n            fuel_cost,\r\n            maintenance_cost,\r\n            insurance_cost\r\n          )\r\n        `)\r\n\r\n      if (routes) {\r\n        const processedRoutes: VehicleData[] = routes.map((route: any) => ({\r\n          name: route.name,\r\n          trips: route.total_stops,\r\n          distance: Number(route.distance),\r\n          cost: route.vehicles ? \r\n            Number(route.vehicles.fuel_cost) + Number(route.vehicles.maintenance_cost) + Number(route.vehicles.insurance_cost) : 0,\r\n          status: route.status\r\n        }))\r\n        setVehicleData(processedRoutes)\r\n\r\n        const activeRoutes = routes.filter((r: any) => r.status === 'active').length\r\n        const fleetCosts = processedRoutes.reduce((sum, r) => sum + r.cost, 0)\r\n\r\n        setStats({\r\n          totalWaste,\r\n          avgWastePerDay: Number(avgWastePerDay.toFixed(1)),\r\n          totalUsers: userCount || 0,\r\n          activeRoutes,\r\n          fleetCosts\r\n        })\r\n      }\r\n\r\n      // Fetch all users for the user selector\r\n      const { data: allUsers } = await supabase\r\n        .from('profiles')\r\n        .select('id, email, username, full_name, total_waste_logged, green_score')\r\n        .order('username')\r\n\r\n      if (allUsers) {\r\n        setUsers(allUsers)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching admin data:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  // Fetch logs for a specific user\r\n  const fetchUserLogs = useCallback(async (userId: string) => {\r\n    setLoadingUserLogs(true)\r\n    const supabase = createClient()\r\n\r\n    try {\r\n      const { data: logs } = await supabase\r\n        .from('waste_logs')\r\n        .select(`\r\n          id,\r\n          weight,\r\n          cost,\r\n          logged_at,\r\n          location,\r\n          notes,\r\n          waste_types (\r\n            name\r\n          )\r\n        `)\r\n        .eq('user_id', userId)\r\n        .order('logged_at', { ascending: false })\r\n        .limit(100)\r\n\r\n      if (logs) {\r\n        const formattedLogs: UserWasteLog[] = logs.map((log: any) => ({\r\n          id: log.id,\r\n          weight: Number(log.weight),\r\n          cost: Number(log.cost),\r\n          logged_at: log.logged_at,\r\n          location: log.location,\r\n          notes: log.notes,\r\n          waste_type_name: log.waste_types?.name || 'Unknown'\r\n        }))\r\n        setUserLogs(formattedLogs)\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching user logs:', error)\r\n    } finally {\r\n      setLoadingUserLogs(false)\r\n    }\r\n  }, [])\r\n\r\n  const handleSelectUser = (user: UserProfile) => {\r\n    setSelectedUser(user)\r\n    setShowUserSelector(false)\r\n    fetchUserLogs(user.id)\r\n  }\r\n\r\n  const handleCloseUserLogs = () => {\r\n    setSelectedUser(null)\r\n    setUserLogs([])\r\n  }\r\n\r\n  // Set up real-time subscriptions for admin dashboard\r\n  useEffect(() => {\r\n    fetchAdminData()\r\n\r\n    const supabase = createClient()\r\n    \r\n    // Subscribe to multiple tables for real-time updates\r\n    const channel = supabase\r\n      .channel('admin-dashboard-realtime')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'waste_logs'\r\n        },\r\n        (payload) => {\r\n          console.log('Waste logs update:', payload)\r\n          fetchAdminData()\r\n        }\r\n      )\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'profiles'\r\n        },\r\n        (payload) => {\r\n          console.log('Profiles update:', payload)\r\n          fetchAdminData()\r\n        }\r\n      )\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'routes'\r\n        },\r\n        (payload) => {\r\n          console.log('Routes update:', payload)\r\n          fetchAdminData()\r\n        }\r\n      )\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'vehicles'\r\n        },\r\n        (payload) => {\r\n          console.log('Vehicles update:', payload)\r\n          fetchAdminData()\r\n        }\r\n      )\r\n      .subscribe()\r\n\r\n    // Cleanup subscription on unmount\r\n    return () => {\r\n      supabase.removeChannel(channel)\r\n    }\r\n  }, [fetchAdminData])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading admin dashboard...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8 pt-2\">\r\n          <h1 className=\"text-4xl font-bold text-foreground mb-1 tracking-tight\">Admin Dashboard</h1>\r\n          <p className=\"text-muted-foreground text-lg\">System overview and fleet management</p>\r\n        </div>\r\n\r\n        {/* KPI Cards */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-primary/10\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">\r\n                  Total Waste (Week)\r\n                </p>\r\n                <p className=\"text-3xl font-bold text-foreground\">{stats.totalWaste} kg</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-primary/20 flex items-center justify-center\">\r\n                <Trash2 className=\"text-primary\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">Avg {stats.avgWastePerDay} kg/day</p>\r\n          </Card>\r\n\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-secondary/10\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">Active Users</p>\r\n                <p className=\"text-3xl font-bold text-foreground\">{stats.totalUsers}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-secondary/20 flex items-center justify-center\">\r\n                <Users className=\"text-secondary\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">Total registered users</p>\r\n          </Card>\r\n\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-accent/10\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">\r\n                  Active Routes\r\n                </p>\r\n                <p className=\"text-3xl font-bold text-foreground\">{stats.activeRoutes}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-accent/20 flex items-center justify-center\">\r\n                <TrendingUp className=\"text-accent\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">Currently operational</p>\r\n          </Card>\r\n\r\n          <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-soft-yellow/30\">\r\n            <div className=\"flex items-start justify-between mb-3\">\r\n              <div>\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-1 uppercase tracking-wide\">Fleet Costs</p>\r\n                <p className=\"text-3xl font-bold text-foreground\">${stats.fleetCosts}</p>\r\n              </div>\r\n              <div className=\"w-12 h-12 rounded-full bg-soft-yellow/40 flex items-center justify-center\">\r\n                <Zap className=\"text-yellow-600\" size={24} />\r\n              </div>\r\n            </div>\r\n            <p className=\"text-xs text-muted-foreground\">This week</p>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Charts */}\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n          {/* Weekly Waste & Users */}\r\n          <Card className=\"eco-card p-6\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4 tracking-tight\">Weekly Waste Collection</h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <LineChart data={adminWasteData}>\r\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n                <XAxis dataKey=\"name\" stroke=\"var(--muted-foreground)\" />\r\n                <YAxis stroke=\"var(--muted-foreground)\" />\r\n                <Tooltip\r\n                  contentStyle={{\r\n                    backgroundColor: \"var(--card)\",\r\n                    border: \"1px solid var(--border)\",\r\n                    borderRadius: \"0.75rem\",\r\n                  }}\r\n                />\r\n                <Line\r\n                  type=\"monotone\"\r\n                  dataKey=\"waste\"\r\n                  stroke=\"var(--primary)\"\r\n                  strokeWidth={3}\r\n                  dot={{ fill: \"var(--primary)\", r: 5 }}\r\n                />\r\n              </LineChart>\r\n            </ResponsiveContainer>\r\n          </Card>\r\n\r\n          {/* Waste Type Distribution */}\r\n          <Card className=\"eco-card p-6\">\r\n            <h3 className=\"text-lg font-semibold text-foreground mb-4 tracking-tight\">Waste Distribution</h3>\r\n            <ResponsiveContainer width=\"100%\" height={300}>\r\n              <PieChart>\r\n                <Pie\r\n                  data={wasteTypeDistribution}\r\n                  cx=\"50%\"\r\n                  cy=\"50%\"\r\n                  innerRadius={60}\r\n                  outerRadius={100}\r\n                  paddingAngle={2}\r\n                  dataKey=\"value\"\r\n                >\r\n                  {wasteTypeDistribution.map((entry, index) => (\r\n                    <Cell key={`cell-${index}`} fill={entry.color} />\r\n                  ))}\r\n                </Pie>\r\n                <Tooltip />\r\n              </PieChart>\r\n            </ResponsiveContainer>\r\n            <div className=\"mt-4 space-y-2\">\r\n              {wasteTypeDistribution.map((type) => (\r\n                <div key={type.name} className=\"flex items-center justify-between text-sm\">\r\n                  <div className=\"flex items-center gap-2\">\r\n                    <div className=\"w-3 h-3 rounded-full\" style={{ backgroundColor: type.color }} />\r\n                    <span className=\"text-muted-foreground\">{type.name}</span>\r\n                  </div>\r\n                  <span className=\"font-semibold text-foreground\">{type.value}%</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </Card>\r\n        </div>\r\n\r\n        {/* Vehicle Routes Performance */}\r\n        <Card className=\"eco-card p-6 mb-8\">\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 tracking-tight\">Vehicle Routes Performance</h3>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={vehicleData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n              <XAxis dataKey=\"name\" stroke=\"var(--muted-foreground)\" />\r\n              <YAxis stroke=\"var(--muted-foreground)\" />\r\n              <Tooltip\r\n                contentStyle={{\r\n                  backgroundColor: \"var(--card)\",\r\n                  border: \"1px solid var(--border)\",\r\n                  borderRadius: \"0.75rem\",\r\n                }}\r\n              />\r\n              <Bar dataKey=\"trips\" fill=\"var(--primary)\" radius={[8, 8, 0, 0]} />\r\n              <Bar dataKey=\"distance\" fill=\"var(--secondary)\" radius={[8, 8, 0, 0]} />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </Card>\r\n\r\n        {/* Routes Table */}\r\n        <Card className=\"eco-card p-6 mb-8\">\r\n          <h3 className=\"text-lg font-semibold text-foreground mb-4 tracking-tight\">Route Details</h3>\r\n          <div className=\"overflow-x-auto\">\r\n            <table className=\"w-full text-sm\">\r\n              <thead className=\"bg-muted/40 border-b border-border\">\r\n                <tr>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Route</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Stops</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Distance (km)</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Cost</th>\r\n                  <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Status</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {vehicleData.length === 0 ? (\r\n                  <tr>\r\n                    <td colSpan={5} className=\"px-6 py-8 text-center text-muted-foreground\">\r\n                      No routes found\r\n                    </td>\r\n                  </tr>\r\n                ) : (\r\n                  vehicleData.map((route) => (\r\n                    <tr key={route.name} className=\"border-b border-border/50 hover:bg-muted/20 transition-colors\">\r\n                      <td className=\"px-6 py-4 font-medium text-foreground\">{route.name}</td>\r\n                      <td className=\"px-6 py-4 text-foreground\">{route.trips}</td>\r\n                      <td className=\"px-6 py-4 text-foreground\">{route.distance}</td>\r\n                      <td className=\"px-6 py-4 text-foreground font-semibold\">${route.cost}</td>\r\n                      <td className=\"px-6 py-4\">\r\n                        <span className={`px-3 py-1 rounded-full text-xs font-semibold ${\r\n                          route.status === 'active' ? 'bg-primary/20 text-primary' :\r\n                          route.status === 'pending' ? 'bg-yellow-100 text-yellow-700' :\r\n                          'bg-gray-100 text-gray-700'\r\n                        }`}>\r\n                          {route.status.charAt(0).toUpperCase() + route.status.slice(1)}\r\n                        </span>\r\n                      </td>\r\n                    </tr>\r\n                  ))\r\n                )}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </Card>\r\n\r\n        {/* User Logs Section */}\r\n        <Card className=\"eco-card p-6\">\r\n          <div className=\"flex items-center justify-between mb-4\">\r\n            <h3 className=\"text-lg font-semibold text-foreground tracking-tight\">User Waste Logs</h3>\r\n            <div className=\"relative\">\r\n              <Button\r\n                variant=\"outline\"\r\n                onClick={() => setShowUserSelector(!showUserSelector)}\r\n                className=\"gap-2\"\r\n              >\r\n                <Users size={16} />\r\n                {selectedUser ? (selectedUser.username || selectedUser.email) : \"Select User\"}\r\n                <ChevronDown size={16} />\r\n              </Button>\r\n\r\n              {/* User Dropdown */}\r\n              {showUserSelector && (\r\n                <div className=\"absolute right-0 mt-2 w-80 bg-card border border-border rounded-lg shadow-lg z-50 max-h-96 overflow-y-auto\">\r\n                  <div className=\"p-2\">\r\n                    <p className=\"text-xs text-muted-foreground font-semibold px-3 py-2 uppercase\">Select a user to view logs</p>\r\n                    {users.length === 0 ? (\r\n                      <p className=\"px-3 py-4 text-sm text-muted-foreground text-center\">No users found</p>\r\n                    ) : (\r\n                      users.map((user) => (\r\n                        <button\r\n                          key={user.id}\r\n                          onClick={() => handleSelectUser(user)}\r\n                          className=\"w-full text-left px-3 py-3 rounded-lg hover:bg-muted/60 transition-colors\"\r\n                        >\r\n                          <p className=\"font-medium text-foreground text-sm\">{user.username || user.email}</p>\r\n                          <p className=\"text-xs text-muted-foreground\">\r\n                            {user.full_name || 'No name'} • {user.total_waste_logged || 0} kg logged • Score: {user.green_score || 0}\r\n                          </p>\r\n                        </button>\r\n                      ))\r\n                    )}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n\r\n          {/* Selected User Info */}\r\n          {selectedUser && (\r\n            <div className=\"mb-4 p-4 bg-muted/30 rounded-lg flex items-center justify-between\">\r\n              <div>\r\n                <p className=\"font-semibold text-foreground\">{selectedUser.username || selectedUser.email}</p>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {selectedUser.full_name || 'No name'} • Total: {selectedUser.total_waste_logged || 0} kg • Green Score: {selectedUser.green_score || 0}\r\n                </p>\r\n              </div>\r\n              <Button variant=\"ghost\" size=\"sm\" onClick={handleCloseUserLogs}>\r\n                <X size={16} />\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {/* User Logs Table */}\r\n          {loadingUserLogs ? (\r\n            <div className=\"py-12 text-center\">\r\n              <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-3\"></div>\r\n              <p className=\"text-sm text-muted-foreground\">Loading user logs...</p>\r\n            </div>\r\n          ) : selectedUser ? (\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full text-sm\">\r\n                <thead className=\"bg-muted/40 border-b border-border\">\r\n                  <tr>\r\n                    <th className=\"px-4 py-3 text-left font-semibold text-foreground\">Date</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold text-foreground\">Type</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold text-foreground\">Weight</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold text-foreground\">Cost</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold text-foreground\">Location</th>\r\n                    <th className=\"px-4 py-3 text-left font-semibold text-foreground\">Notes</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {userLogs.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={6} className=\"px-4 py-8 text-center text-muted-foreground\">\r\n                        No waste logs found for this user\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    userLogs.map((log) => (\r\n                      <tr key={log.id} className=\"border-b border-border/50 hover:bg-muted/20 transition-colors\">\r\n                        <td className=\"px-4 py-3 text-foreground\">\r\n                          {new Date(log.logged_at).toLocaleDateString('en-US', {\r\n                            month: 'short',\r\n                            day: 'numeric',\r\n                            year: 'numeric',\r\n                            hour: '2-digit',\r\n                            minute: '2-digit'\r\n                          })}\r\n                        </td>\r\n                        <td className=\"px-4 py-3\">\r\n                          <span className=\"px-2 py-1 rounded-full text-xs font-medium bg-primary/20 text-primary\">\r\n                            {log.waste_type_name}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-4 py-3 font-medium text-foreground\">{log.weight} kg</td>\r\n                        <td className=\"px-4 py-3 text-foreground\">${log.cost.toFixed(2)}</td>\r\n                        <td className=\"px-4 py-3 text-muted-foreground\">{log.location || '-'}</td>\r\n                        <td className=\"px-4 py-3 text-muted-foreground text-xs max-w-[200px] truncate\">\r\n                          {log.notes || '-'}\r\n                        </td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n              {userLogs.length > 0 && (\r\n                <p className=\"text-xs text-muted-foreground mt-3 px-4\">\r\n                  Showing {userLogs.length} most recent logs\r\n                </p>\r\n              )}\r\n            </div>\r\n          ) : (\r\n            <div className=\"py-12 text-center\">\r\n              <Eye className=\"mx-auto text-muted-foreground mb-3\" size={40} />\r\n              <p className=\"text-muted-foreground\">Select a user to view their waste logs</p>\r\n            </div>\r\n          )}\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2750, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/trash-tracker.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useCallback } from \"react\"\r\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from \"recharts\"\r\nimport { Filter, Plus } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport type { WasteLog, WasteType } from \"@/lib/types/database\"\r\n\r\ninterface TrashTrackerProps {\r\n  onAddLog: () => void\r\n}\r\n\r\ninterface TrashLog {\r\n  id: string\r\n  date: string\r\n  type: string\r\n  weight: number\r\n  location: string\r\n  cost: number\r\n}\r\n\r\ninterface TrendData {\r\n  name: string\r\n  week1: number\r\n  week2: number\r\n  week3: number\r\n}\r\n\r\nconst typeColors: { [key: string]: string } = {\r\n  Organic: \"bg-primary/20 text-primary\",\r\n  Plastic: \"bg-secondary/20 text-secondary\",\r\n  Metal: \"bg-accent/20 text-accent\",\r\n  Paper: \"bg-yellow-100 text-yellow-700\",\r\n  Glass: \"bg-blue-100 text-blue-700\",\r\n}\r\n\r\nexport default function TrashTracker({ onAddLog }: TrashTrackerProps) {\r\n  const [selectedType, setSelectedType] = useState<string | null>(null)\r\n  const [trashLogs, setTrashLogs] = useState<TrashLog[]>([])\r\n  const [trendData, setTrendData] = useState<TrendData[]>([])\r\n  const [wasteTypes, setWasteTypes] = useState<string[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  const fetchTrashData = useCallback(async () => {\r\n    const supabase = createClient()\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) return\r\n\r\n      // Fetch waste types\r\n      const { data: types } = await supabase\r\n        .from('waste_types')\r\n        .select('name')\r\n        .order('name')\r\n\r\n      if (types) {\r\n        setWasteTypes(types.map(t => t.name))\r\n      }\r\n\r\n      // Fetch recent waste logs\r\n      const { data: logs } = await supabase\r\n        .from('waste_logs')\r\n        .select(`\r\n          id,\r\n          weight,\r\n          location,\r\n          cost,\r\n          logged_at,\r\n          waste_types (\r\n            name\r\n          )\r\n        `)\r\n        .eq('user_id', user.id)\r\n        .order('logged_at', { ascending: false })\r\n        .limit(50)\r\n\r\n      if (logs) {\r\n        const formattedLogs: TrashLog[] = logs.map((log: any) => ({\r\n          id: log.id,\r\n          date: new Date(log.logged_at).toLocaleDateString('en-US', { \r\n            month: 'short', \r\n            day: 'numeric', \r\n            year: 'numeric' \r\n          }),\r\n          type: log.waste_types?.name || 'Unknown',\r\n          weight: Number(log.weight),\r\n          location: log.location || 'Not specified',\r\n          cost: Number(log.cost) || 0\r\n        }))\r\n        setTrashLogs(formattedLogs)\r\n      }\r\n\r\n      // Fetch trend data (last 3 weeks by waste type)\r\n      const today = new Date()\r\n      const threeWeeksAgo = new Date(today.getTime() - 21 * 24 * 60 * 60 * 1000)\r\n      \r\n      const { data: trendLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select(`\r\n          weight,\r\n          logged_at,\r\n          waste_types (\r\n            name\r\n          )\r\n        `)\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', threeWeeksAgo.toISOString())\r\n        .order('logged_at', { ascending: true })\r\n\r\n      if (trendLogs) {\r\n        // Process trend data by waste type and week\r\n        const trendMap = new Map<string, { week1: number; week2: number; week3: number }>()\r\n        \r\n        trendLogs.forEach((log: any) => {\r\n          const typeName = log.waste_types?.name || 'Unknown'\r\n          const logDate = new Date(log.logged_at)\r\n          const daysAgo = Math.floor((today.getTime() - logDate.getTime()) / (24 * 60 * 60 * 1000))\r\n          \r\n          if (!trendMap.has(typeName)) {\r\n            trendMap.set(typeName, { week1: 0, week2: 0, week3: 0 })\r\n          }\r\n          \r\n          const existing = trendMap.get(typeName)!\r\n          if (daysAgo < 7) {\r\n            existing.week3 += Number(log.weight)\r\n          } else if (daysAgo < 14) {\r\n            existing.week2 += Number(log.weight)\r\n          } else {\r\n            existing.week1 += Number(log.weight)\r\n          }\r\n        })\r\n\r\n        const processedTrendData: TrendData[] = Array.from(trendMap.entries()).map(([name, data]) => ({\r\n          name,\r\n          week1: Number(data.week1.toFixed(1)),\r\n          week2: Number(data.week2.toFixed(1)),\r\n          week3: Number(data.week3.toFixed(1))\r\n        }))\r\n\r\n        setTrendData(processedTrendData.length > 0 ? processedTrendData : [\r\n          { name: \"No Data\", week1: 0, week2: 0, week3: 0 }\r\n        ])\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching trash data:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }, [])\r\n\r\n  // Set up real-time subscription\r\n  useEffect(() => {\r\n    fetchTrashData()\r\n\r\n    const supabase = createClient()\r\n    \r\n    // Subscribe to waste_logs changes\r\n    const channel = supabase\r\n      .channel('trash-tracker-realtime')\r\n      .on(\r\n        'postgres_changes',\r\n        {\r\n          event: '*',\r\n          schema: 'public',\r\n          table: 'waste_logs'\r\n        },\r\n        (payload) => {\r\n          console.log('Real-time update received:', payload)\r\n          fetchTrashData() // Refresh data on any change\r\n        }\r\n      )\r\n      .subscribe()\r\n\r\n    // Cleanup subscription on unmount\r\n    return () => {\r\n      supabase.removeChannel(channel)\r\n    }\r\n  }, [fetchTrashData])\r\n\r\n  const filteredLogs = selectedType ? trashLogs.filter((log) => log.type === selectedType) : trashLogs\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading trash tracker...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8 pt-2 flex items-center justify-between\">\r\n          <div>\r\n            <h1 className=\"text-4xl font-bold text-foreground mb-1 tracking-tight\">Trash Tracker</h1>\r\n            <p className=\"text-muted-foreground text-lg\">Monitor your waste history and patterns</p>\r\n          </div>\r\n          <Button\r\n            onClick={onAddLog}\r\n            className=\"bg-primary hover:bg-primary/90 text-primary-foreground rounded-xl gap-2 px-6 py-2 h-auto font-semibold shadow-md transition-all duration-200\"\r\n          >\r\n            <Plus size={20} />\r\n            Add Entry\r\n          </Button>\r\n        </div>\r\n\r\n        {/* Trends Chart */}\r\n        <Card className=\"eco-card p-6 mb-8\">\r\n          <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Waste Trends (Last 3 Weeks)</h2>\r\n          <ResponsiveContainer width=\"100%\" height={300}>\r\n            <BarChart data={trendData}>\r\n              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n              <XAxis dataKey=\"name\" stroke=\"var(--muted-foreground)\" />\r\n              <YAxis stroke=\"var(--muted-foreground)\" />\r\n              <Tooltip\r\n                contentStyle={{\r\n                  backgroundColor: \"var(--card)\",\r\n                  border: \"1px solid var(--border)\",\r\n                  borderRadius: \"0.75rem\",\r\n                }}\r\n              />\r\n              <Legend />\r\n              <Bar dataKey=\"week1\" fill=\"var(--primary)\" radius={[8, 8, 0, 0]} />\r\n              <Bar dataKey=\"week2\" fill=\"var(--secondary)\" radius={[8, 8, 0, 0]} />\r\n              <Bar dataKey=\"week3\" fill=\"var(--accent)\" radius={[8, 8, 0, 0]} />\r\n            </BarChart>\r\n          </ResponsiveContainer>\r\n        </Card>\r\n\r\n        {/* Filters & Table */}\r\n        <div className=\"space-y-4\">\r\n          <div className=\"flex items-center gap-3 flex-wrap\">\r\n            <div className=\"flex items-center gap-2 bg-card border border-border rounded-lg px-4 py-2\">\r\n              <Filter size={18} className=\"text-muted-foreground\" />\r\n              <span className=\"text-sm text-muted-foreground font-medium\">Filter:</span>\r\n            </div>\r\n            {wasteTypes.map((type) => (\r\n              <button\r\n                key={type}\r\n                onClick={() => setSelectedType(selectedType === type ? null : type)}\r\n                className={`px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${\r\n                  selectedType === type\r\n                    ? \"bg-primary text-primary-foreground shadow-md\"\r\n                    : \"bg-muted text-muted-foreground hover:bg-border/60\"\r\n                }`}\r\n              >\r\n                {type}\r\n              </button>\r\n            ))}\r\n          </div>\r\n\r\n          {/* Logs Table */}\r\n          <Card className=\"eco-card overflow-hidden\">\r\n            <div className=\"overflow-x-auto\">\r\n              <table className=\"w-full text-sm\">\r\n                <thead className=\"bg-muted/40 border-b border-border\">\r\n                  <tr>\r\n                    <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Date</th>\r\n                    <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Type</th>\r\n                    <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Weight</th>\r\n                    <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Location</th>\r\n                    <th className=\"px-6 py-4 text-right font-semibold text-foreground\">Cost</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody>\r\n                  {filteredLogs.length === 0 ? (\r\n                    <tr>\r\n                      <td colSpan={5} className=\"px-6 py-8 text-center text-muted-foreground\">\r\n                        No waste logs found. Start logging your waste!\r\n                      </td>\r\n                    </tr>\r\n                  ) : (\r\n                    filteredLogs.map((log) => (\r\n                      <tr\r\n                        key={log.id}\r\n                        className=\"border-b border-border/50 hover:bg-muted/20 transition-colors duration-200\"\r\n                      >\r\n                        <td className=\"px-6 py-4 text-foreground\">{log.date}</td>\r\n                        <td className=\"px-6 py-4\">\r\n                          <span\r\n                            className={`px-3 py-1 rounded-full text-xs font-semibold ${typeColors[log.type] || \"bg-gray-100 text-gray-700\"}`}\r\n                          >\r\n                            {log.type}\r\n                          </span>\r\n                        </td>\r\n                        <td className=\"px-6 py-4 text-foreground font-medium\">{log.weight} kg</td>\r\n                        <td className=\"px-6 py-4 text-muted-foreground\">{log.location}</td>\r\n                        <td className=\"px-6 py-4 text-right text-foreground font-medium\">${log.cost.toFixed(2)}</td>\r\n                      </tr>\r\n                    ))\r\n                  )}\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </Card>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAPA;;;;;;;;AA8BA,MAAM,aAAwC;IAC5C,SAAS;IACT,SAAS;IACT,OAAO;IACP,OAAO;IACP,OAAO;AACT;AAEe,SAAS,aAAa,EAAE,QAAQ,EAAqB;IAClE,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,iNAAQ,EAAgB;IAChE,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACzD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAc,EAAE;IAC1D,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAW,EAAE;IACzD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,iBAAiB,IAAA,oNAAW,EAAC;QACjC,MAAM,WAAW,IAAA,yIAAY;QAE7B,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;YAEX,oBAAoB;YACpB,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,eACL,MAAM,CAAC,QACP,KAAK,CAAC;YAET,IAAI,OAAO;gBACT,cAAc,MAAM,GAAG,CAAC,CAAA,IAAK,EAAE,IAAI;YACrC;YAEA,0BAA0B;YAC1B,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,SAC1B,IAAI,CAAC,cACL,MAAM,CAAC,CAAC;;;;;;;;;QAST,CAAC,EACA,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,KAAK,CAAC,aAAa;gBAAE,WAAW;YAAM,GACtC,KAAK,CAAC;YAET,IAAI,MAAM;gBACR,MAAM,gBAA4B,KAAK,GAAG,CAAC,CAAC,MAAa,CAAC;wBACxD,IAAI,IAAI,EAAE;wBACV,MAAM,IAAI,KAAK,IAAI,SAAS,EAAE,kBAAkB,CAAC,SAAS;4BACxD,OAAO;4BACP,KAAK;4BACL,MAAM;wBACR;wBACA,MAAM,IAAI,WAAW,EAAE,QAAQ;wBAC/B,QAAQ,OAAO,IAAI,MAAM;wBACzB,UAAU,IAAI,QAAQ,IAAI;wBAC1B,MAAM,OAAO,IAAI,IAAI,KAAK;oBAC5B,CAAC;gBACD,aAAa;YACf;YAEA,gDAAgD;YAChD,MAAM,QAAQ,IAAI;YAClB,MAAM,gBAAgB,IAAI,KAAK,MAAM,OAAO,KAAK,KAAK,KAAK,KAAK,KAAK;YAErE,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,cACL,MAAM,CAAC,CAAC;;;;;;QAMT,CAAC,EACA,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,GAAG,CAAC,aAAa,cAAc,WAAW,IAC1C,KAAK,CAAC,aAAa;gBAAE,WAAW;YAAK;YAExC,IAAI,WAAW;gBACb,4CAA4C;gBAC5C,MAAM,WAAW,IAAI;gBAErB,UAAU,OAAO,CAAC,CAAC;oBACjB,MAAM,WAAW,IAAI,WAAW,EAAE,QAAQ;oBAC1C,MAAM,UAAU,IAAI,KAAK,IAAI,SAAS;oBACtC,MAAM,UAAU,KAAK,KAAK,CAAC,CAAC,MAAM,OAAO,KAAK,QAAQ,OAAO,EAAE,IAAI,CAAC,KAAK,KAAK,KAAK,IAAI;oBAEvF,IAAI,CAAC,SAAS,GAAG,CAAC,WAAW;wBAC3B,SAAS,GAAG,CAAC,UAAU;4BAAE,OAAO;4BAAG,OAAO;4BAAG,OAAO;wBAAE;oBACxD;oBAEA,MAAM,WAAW,SAAS,GAAG,CAAC;oBAC9B,IAAI,UAAU,GAAG;wBACf,SAAS,KAAK,IAAI,OAAO,IAAI,MAAM;oBACrC,OAAO,IAAI,UAAU,IAAI;wBACvB,SAAS,KAAK,IAAI,OAAO,IAAI,MAAM;oBACrC,OAAO;wBACL,SAAS,KAAK,IAAI,OAAO,IAAI,MAAM;oBACrC;gBACF;gBAEA,MAAM,qBAAkC,MAAM,IAAI,CAAC,SAAS,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,GAAK,CAAC;wBAC5F;wBACA,OAAO,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC;wBACjC,OAAO,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC;wBACjC,OAAO,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC;oBACnC,CAAC;gBAED,aAAa,mBAAmB,MAAM,GAAG,IAAI,qBAAqB;oBAChE;wBAAE,MAAM;wBAAW,OAAO;wBAAG,OAAO;wBAAG,OAAO;oBAAE;iBACjD;YACH;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,8BAA8B;QAC9C,SAAU;YACR,WAAW;QACb;IACF,GAAG,EAAE;IAEL,gCAAgC;IAChC,IAAA,kNAAS,EAAC;QACR;QAEA,MAAM,WAAW,IAAA,yIAAY;QAE7B,kCAAkC;QAClC,MAAM,UAAU,SACb,OAAO,CAAC,0BACR,EAAE,CACD,oBACA;YACE,OAAO;YACP,QAAQ;YACR,OAAO;QACT,GACA,CAAC;YACC,QAAQ,GAAG,CAAC,8BAA8B;YAC1C,kBAAiB,6BAA6B;QAChD,GAED,SAAS;QAEZ,kCAAkC;QAClC,OAAO;YACL,SAAS,aAAa,CAAC;QACzB;IACF,GAAG;QAAC;KAAe;IAEnB,MAAM,eAAe,eAAe,UAAU,MAAM,CAAC,CAAC,MAAQ,IAAI,IAAI,KAAK,gBAAgB;IAE3F,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;;8CACC,8OAAC;oCAAG,WAAU;8CAAyD;;;;;;8CACvE,8OAAC;oCAAE,WAAU;8CAAgC;;;;;;;;;;;;sCAE/C,8OAAC,qIAAM;4BACL,SAAS;4BACT,WAAU;;8CAEV,8OAAC,0MAAI;oCAAC,MAAM;;;;;;gCAAM;;;;;;;;;;;;;8BAMtB,8OAAC,iIAAI;oBAAC,WAAU;;sCACd,8OAAC;4BAAG,WAAU;sCAA4D;;;;;;sCAC1E,8OAAC,0LAAmB;4BAAC,OAAM;4BAAO,QAAQ;sCACxC,cAAA,8OAAC,gKAAQ;gCAAC,MAAM;;kDACd,8OAAC,8KAAa;wCAAC,iBAAgB;wCAAM,QAAO;;;;;;kDAC5C,8OAAC,8JAAK;wCAAC,SAAQ;wCAAO,QAAO;;;;;;kDAC7B,8OAAC,8JAAK;wCAAC,QAAO;;;;;;kDACd,8OAAC,kKAAO;wCACN,cAAc;4CACZ,iBAAiB;4CACjB,QAAQ;4CACR,cAAc;wCAChB;;;;;;kDAEF,8OAAC,gKAAM;;;;;kDACP,8OAAC,0JAAG;wCAAC,SAAQ;wCAAQ,MAAK;wCAAiB,QAAQ;4CAAC;4CAAG;4CAAG;4CAAG;yCAAE;;;;;;kDAC/D,8OAAC,0JAAG;wCAAC,SAAQ;wCAAQ,MAAK;wCAAmB,QAAQ;4CAAC;4CAAG;4CAAG;4CAAG;yCAAE;;;;;;kDACjE,8OAAC,0JAAG;wCAAC,SAAQ;wCAAQ,MAAK;wCAAgB,QAAQ;4CAAC;4CAAG;4CAAG;4CAAG;yCAAE;;;;;;;;;;;;;;;;;;;;;;;8BAMpE,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAI,WAAU;;sDACb,8OAAC,gNAAM;4CAAC,MAAM;4CAAI,WAAU;;;;;;sDAC5B,8OAAC;4CAAK,WAAU;sDAA4C;;;;;;;;;;;;gCAE7D,WAAW,GAAG,CAAC,CAAC,qBACf,8OAAC;wCAEC,SAAS,IAAM,gBAAgB,iBAAiB,OAAO,OAAO;wCAC9D,WAAW,CAAC,qEAAqE,EAC/E,iBAAiB,OACb,iDACA,qDACJ;kDAED;uCARI;;;;;;;;;;;sCAcX,8OAAC,iIAAI;4BAAC,WAAU;sCACd,cAAA,8OAAC;gCAAI,WAAU;0CACb,cAAA,8OAAC;oCAAM,WAAU;;sDACf,8OAAC;4CAAM,WAAU;sDACf,cAAA,8OAAC;;kEACC,8OAAC;wDAAG,WAAU;kEAAoD;;;;;;kEAClE,8OAAC;wDAAG,WAAU;kEAAoD;;;;;;kEAClE,8OAAC;wDAAG,WAAU;kEAAoD;;;;;;kEAClE,8OAAC;wDAAG,WAAU;kEAAoD;;;;;;kEAClE,8OAAC;wDAAG,WAAU;kEAAqD;;;;;;;;;;;;;;;;;sDAGvE,8OAAC;sDACE,aAAa,MAAM,KAAK,kBACvB,8OAAC;0DACC,cAAA,8OAAC;oDAAG,SAAS;oDAAG,WAAU;8DAA8C;;;;;;;;;;uDAK1E,aAAa,GAAG,CAAC,CAAC,oBAChB,8OAAC;oDAEC,WAAU;;sEAEV,8OAAC;4DAAG,WAAU;sEAA6B,IAAI,IAAI;;;;;;sEACnD,8OAAC;4DAAG,WAAU;sEACZ,cAAA,8OAAC;gEACC,WAAW,CAAC,6CAA6C,EAAE,UAAU,CAAC,IAAI,IAAI,CAAC,IAAI,6BAA6B;0EAE/G,IAAI,IAAI;;;;;;;;;;;sEAGb,8OAAC;4DAAG,WAAU;;gEAAyC,IAAI,MAAM;gEAAC;;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAmC,IAAI,QAAQ;;;;;;sEAC7D,8OAAC;4DAAG,WAAU;;gEAAmD;gEAAE,IAAI,IAAI,CAAC,OAAO,CAAC;;;;;;;;mDAb/E,IAAI,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBnC"}},
    {"offset": {"line": 3337, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/add-waste-log.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { X, Upload, Loader2 } from \"lucide-react\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport type { WasteType } from \"@/lib/types/database\"\r\n\r\ninterface AddWasteLogProps {\r\n  onClose: () => void\r\n}\r\n\r\nexport default function AddWasteLog({ onClose }: AddWasteLogProps) {\r\n  const [formData, setFormData] = useState({\r\n    weight: \"\",\r\n    type: \"\",\r\n    date: new Date().toISOString().split(\"T\")[0],\r\n    time: \"12:00\",\r\n    location: \"\",\r\n    notes: \"\",\r\n  })\r\n  const [wasteTypes, setWasteTypes] = useState<WasteType[]>([])\r\n  const [isLoading, setIsLoading] = useState(false)\r\n  const [error, setError] = useState<string | null>(null)\r\n\r\n  useEffect(() => {\r\n    fetchWasteTypes()\r\n  }, [])\r\n\r\n  const fetchWasteTypes = async () => {\r\n    const supabase = createClient()\r\n    const { data, error } = await supabase\r\n      .from('waste_types')\r\n      .select('*')\r\n      .order('name')\r\n    \r\n    if (data && data.length > 0) {\r\n      setWasteTypes(data)\r\n      setFormData(prev => ({ ...prev, type: data[0].id }))\r\n    } else {\r\n      // If no waste types exist, try to insert the default ones\r\n      const defaultTypes = [\r\n        { name: 'Organic', description: 'Food scraps, plant matter, and biodegradable items', disposal_method: 'Compost bin or green waste collection', examples: ['Fruit & vegetable peels', 'Coffee grounds', 'Leaves & grass'], cost_per_kg: 0, color: 'hsl(142, 70%, 50%)', icon: 'Leaf' },\r\n        { name: 'Plastic', description: 'Bottles, bags, containers, and packaging materials', disposal_method: 'Plastic recycling bin', examples: ['Bottles', 'Bags', 'Food containers', 'Straws'], cost_per_kg: 1.50, color: 'hsl(220, 70%, 50%)', icon: 'Droplets' },\r\n        { name: 'Metal', description: 'Cans, metal containers, and electronic waste', disposal_method: 'Metal recycling or e-waste collection center', examples: ['Aluminum cans', 'Steel containers', 'Old phones'], cost_per_kg: 5.00, color: 'hsl(89, 70%, 50%)', icon: 'Zap' },\r\n        { name: 'Paper', description: 'Newspapers, magazines, boxes, and cardboard', disposal_method: 'Paper recycling bin', examples: ['Newspapers', 'Magazines', 'Boxes', 'Envelopes'], cost_per_kg: 0.50, color: 'hsl(55, 70%, 50%)', icon: 'FileText' },\r\n        { name: 'Glass', description: 'Bottles, jars, and other glass containers', disposal_method: 'Glass recycling bin', examples: ['Bottles', 'Jars', 'Food containers'], cost_per_kg: 2.00, color: 'hsl(200, 60%, 50%)', icon: 'Gift' },\r\n      ]\r\n\r\n      // Try to insert default waste types\r\n      const { error: insertError } = await supabase\r\n        .from('waste_types')\r\n        .insert(defaultTypes)\r\n\r\n      if (!insertError) {\r\n        // Fetch the newly inserted types\r\n        const { data: newData } = await supabase\r\n          .from('waste_types')\r\n          .select('*')\r\n          .order('name')\r\n        \r\n        if (newData && newData.length > 0) {\r\n          setWasteTypes(newData)\r\n          setFormData(prev => ({ ...prev, type: newData[0].id }))\r\n          return\r\n        }\r\n      }\r\n\r\n      // If insert failed (likely due to permissions), set error\r\n      setError(\"No waste types available. Please contact an administrator to set up waste types in the database.\")\r\n    }\r\n  }\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault()\r\n    setIsLoading(true)\r\n    setError(null)\r\n\r\n    try {\r\n      const supabase = createClient()\r\n      \r\n      // Check if in admin mode (no real user)\r\n      const isAdminMode = typeof window !== 'undefined' && sessionStorage.getItem(\"adminMode\") === \"true\"\r\n      \r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      \r\n      if (!user && !isAdminMode) {\r\n        setError(\"You must be logged in to add a waste log\")\r\n        return\r\n      }\r\n\r\n      if (!user && isAdminMode) {\r\n        setError(\"Admin mode: Cannot add waste logs without a user account. Please log in as a regular user to add waste logs.\")\r\n        return\r\n      }\r\n\r\n      // Verify the user has a profile - if not, the trigger should have created it\r\n      const { data: profile, error: profileError } = await supabase\r\n        .from('profiles')\r\n        .select('id')\r\n        .eq('id', user!.id)\r\n        .single()\r\n\r\n      if (profileError || !profile) {\r\n        // Profile doesn't exist - this shouldn't happen if trigger is working\r\n        // Show helpful error message\r\n        setError(\"User profile not found. Please log out and sign up again, or contact support.\")\r\n        return\r\n      }\r\n\r\n      // Get the cost for this waste type\r\n      const selectedType = wasteTypes.find(t => t.id === formData.type)\r\n      const cost = selectedType ? Number(formData.weight) * selectedType.cost_per_kg : 0\r\n\r\n      // Combine date and time\r\n      const loggedAt = new Date(`${formData.date}T${formData.time}:00`)\r\n\r\n      const { error: insertError } = await supabase\r\n        .from('waste_logs')\r\n        .insert({\r\n          user_id: user.id,\r\n          waste_type_id: formData.type,\r\n          weight: parseFloat(formData.weight),\r\n          location: formData.location || null,\r\n          notes: formData.notes || null,\r\n          cost: cost,\r\n          logged_at: loggedAt.toISOString()\r\n        })\r\n\r\n      if (insertError) throw insertError\r\n\r\n      onClose()\r\n    } catch (err: any) {\r\n      setError(err.message || \"Failed to add waste log\")\r\n    } finally {\r\n      setIsLoading(false)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\r\n      <Card className=\"eco-card w-full max-w-md max-h-[90vh] overflow-y-auto\">\r\n        <div className=\"sticky top-0 bg-card border-b border-border p-6 flex items-center justify-between\">\r\n          <h2 className=\"text-2xl font-bold text-foreground\">Add Waste Log</h2>\r\n          <button onClick={onClose} className=\"p-1 hover:bg-muted rounded-lg transition-colors\">\r\n            <X size={24} className=\"text-muted-foreground\" />\r\n          </button>\r\n        </div>\r\n\r\n        <form onSubmit={handleSubmit} className=\"p-6 space-y-5\">\r\n          {/* Weight */}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-foreground mb-2\">\r\n              Weight (kg) <span className=\"text-destructive\">*</span>\r\n            </label>\r\n            <input\r\n              type=\"number\"\r\n              step=\"0.1\"\r\n              value={formData.weight}\r\n              onChange={(e) => setFormData({ ...formData, weight: e.target.value })}\r\n              placeholder=\"Enter weight in kg\"\r\n              className=\"w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n              required\r\n            />\r\n          </div>\r\n\r\n          {/* Waste Type */}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-foreground mb-2\">\r\n              Waste Type <span className=\"text-destructive\">*</span>\r\n            </label>\r\n            <select\r\n              value={formData.type}\r\n              onChange={(e) => setFormData({ ...formData, type: e.target.value })}\r\n              className=\"w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n              required\r\n            >\r\n              {wasteTypes.map((type) => (\r\n                <option key={type.id} value={type.id}>\r\n                  {type.name} (${type.cost_per_kg}/kg)\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          {/* Date & Time */}\r\n          <div className=\"grid grid-cols-2 gap-4\">\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-foreground mb-2\">Date</label>\r\n              <input\r\n                type=\"date\"\r\n                value={formData.date}\r\n                onChange={(e) => setFormData({ ...formData, date: e.target.value })}\r\n                className=\"w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n              />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-semibold text-foreground mb-2\">Time</label>\r\n              <input\r\n                type=\"time\"\r\n                value={formData.time}\r\n                onChange={(e) => setFormData({ ...formData, time: e.target.value })}\r\n                className=\"w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n              />\r\n            </div>\r\n          </div>\r\n\r\n          {/* Location */}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-foreground mb-2\">Location</label>\r\n            <input\r\n              type=\"text\"\r\n              value={formData.location}\r\n              onChange={(e) => setFormData({ ...formData, location: e.target.value })}\r\n              placeholder=\"Home, Office, etc.\"\r\n              className=\"w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary\"\r\n            />\r\n          </div>\r\n\r\n          {/* Notes */}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-foreground mb-2\">Notes</label>\r\n            <textarea\r\n              value={formData.notes}\r\n              onChange={(e) => setFormData({ ...formData, notes: e.target.value })}\r\n              placeholder=\"Any additional notes...\"\r\n              rows={3}\r\n              className=\"w-full px-4 py-2 rounded-lg bg-input border border-border text-foreground placeholder-muted-foreground focus:outline-none focus:ring-2 focus:ring-primary resize-none\"\r\n            />\r\n          </div>\r\n\r\n          {/* Image Upload */}\r\n          <div>\r\n            <label className=\"block text-sm font-semibold text-foreground mb-3\">Photo (Optional)</label>\r\n            <button\r\n              type=\"button\"\r\n              className=\"w-full border-2 border-dashed border-border rounded-lg p-4 hover:bg-muted/50 transition-colors\"\r\n            >\r\n              <Upload size={24} className=\"mx-auto mb-2 text-muted-foreground\" />\r\n              <p className=\"text-sm text-muted-foreground\">Click to upload or drag & drop</p>\r\n            </button>\r\n          </div>\r\n\r\n          {/* Submit Buttons */}\r\n          <div className=\"flex gap-3 pt-4\">\r\n            {error && (\r\n              <p className=\"text-destructive text-sm mb-2 w-full\">{error}</p>\r\n            )}\r\n            <Button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              variant=\"outline\"\r\n              className=\"flex-1 rounded-lg border border-border text-foreground hover:bg-muted bg-transparent\"\r\n              disabled={isLoading}\r\n            >\r\n              Cancel\r\n            </Button>\r\n            <Button\r\n              type=\"submit\"\r\n              className=\"flex-1 bg-primary hover:bg-primary text-primary-foreground rounded-lg font-semibold\"\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                  Adding...\r\n                </>\r\n              ) : (\r\n                \"Add Log\"\r\n              )}\r\n            </Button>\r\n          </div>\r\n        </form>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3891, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/waste-types.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Leaf, Droplets, Zap, FileText, Gift } from \"lucide-react\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport type { WasteType } from \"@/lib/types/database\"\r\n\r\ninterface WasteTypeDisplay {\r\n  name: string\r\n  icon: any\r\n  color: string\r\n  description: string\r\n  disposal: string\r\n  examples: string[]\r\n}\r\n\r\nconst iconMap: { [key: string]: any } = {\r\n  Leaf,\r\n  Droplets,\r\n  Zap,\r\n  FileText,\r\n  Gift,\r\n}\r\n\r\nconst colorMap: { [key: string]: string } = {\r\n  Organic: \"from-primary to-bright-green\",\r\n  Plastic: \"from-secondary to-light-teal\",\r\n  Metal: \"from-accent to-primary\",\r\n  Paper: \"from-soft-yellow to-accent\",\r\n  Glass: \"from-light-teal to-secondary\",\r\n}\r\n\r\nexport default function WasteTypes() {\r\n  const [wasteTypes, setWasteTypes] = useState<WasteTypeDisplay[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchWasteTypes()\r\n  }, [])\r\n\r\n  const fetchWasteTypes = async () => {\r\n    const supabase = createClient()\r\n    \r\n    try {\r\n      const { data } = await supabase\r\n        .from('waste_types')\r\n        .select('*')\r\n        .order('name')\r\n\r\n      if (data) {\r\n        const processedTypes: WasteTypeDisplay[] = data.map((type) => ({\r\n          name: type.name,\r\n          icon: iconMap[type.icon || 'Leaf'] || Leaf,\r\n          color: colorMap[type.name] || \"from-primary to-accent\",\r\n          description: type.description || '',\r\n          disposal: type.disposal_method || '',\r\n          examples: type.examples || []\r\n        }))\r\n        setWasteTypes(processedTypes)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching waste types:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background via-white to-background/80 p-4 sm:p-6 lg:p-8 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading waste types...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-white to-background/80 p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-12 text-center pt-2\">\r\n          <h1 className=\"text-4xl font-bold text-foreground mb-2 tracking-tight\">Waste Type Guide</h1>\r\n          <p className=\"text-lg text-muted-foreground\">Learn how to properly dispose of different waste types</p>\r\n        </div>\r\n\r\n        {/* Waste Types Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {wasteTypes.map((type) => {\r\n            const Icon = type.icon\r\n            return (\r\n              <Card\r\n                key={type.name}\r\n                className=\"eco-card overflow-hidden hover:shadow-lg transition-all duration-300 cursor-pointer group\"\r\n              >\r\n                {/* Color Header */}\r\n                <div\r\n                  className={`h-24 bg-gradient-to-r ${type.color} opacity-90 group-hover:opacity-100 transition-opacity duration-300`}\r\n                />\r\n\r\n                {/* Content */}\r\n                <div className=\"p-6\">\r\n                  <div className=\"flex items-center gap-3 mb-4 -mt-14 relative z-10\">\r\n                    <div className=\"w-14 h-14 rounded-full bg-white border-4 border-background flex items-center justify-center shadow-md\">\r\n                      <Icon className=\"text-primary\" size={28} />\r\n                    </div>\r\n                    <h3 className=\"text-lg font-bold text-foreground\">{type.name}</h3>\r\n                  </div>\r\n\r\n                  <p className=\"text-sm text-muted-foreground mb-4\">{type.description}</p>\r\n\r\n                  <div className=\"space-y-3\">\r\n                    <div>\r\n                      <p className=\"text-xs font-semibold text-primary uppercase tracking-wide mb-2\">Disposal Method</p>\r\n                      <p className=\"text-sm text-foreground\">{type.disposal}</p>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <p className=\"text-xs font-semibold text-primary uppercase tracking-wide mb-2\">Common Examples</p>\r\n                      <ul className=\"text-sm text-muted-foreground space-y-1\">\r\n                        {type.examples.map((example) => (\r\n                          <li key={example} className=\"flex items-center gap-2\">\r\n                            <span className=\"w-1.5 h-1.5 rounded-full bg-primary\" />\r\n                            {example}\r\n                          </li>\r\n                        ))}\r\n                      </ul>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            )\r\n          })}\r\n        </div>\r\n\r\n        {/* Tips Section */}\r\n        <Card className=\"eco-card p-8 mt-12 bg-gradient-to-br from-soft-yellow/20 to-light-teal/20\">\r\n          <h2 className=\"text-2xl font-bold text-foreground mb-6 tracking-tight\">Sustainability Tips</h2>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n            <div>\r\n              <p className=\"font-semibold text-foreground mb-2\">Reduce First</p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Buy less, choose products with minimal packaging, and avoid single-use items.\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-foreground mb-2\">Reuse When Possible</p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Repurpose containers, donate items, and give products a second life.\r\n              </p>\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-foreground mb-2\">Recycle Correctly</p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                Follow local guidelines, rinse containers, and separate materials properly.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </Card>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/cost-calculator.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer } from \"recharts\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\n\r\ninterface CostData {\r\n  type: string\r\n  cost: number\r\n  color: string\r\n}\r\n\r\ninterface VehicleCostData {\r\n  vehicle: string\r\n  fuel: number\r\n  maintenance: number\r\n  insurance: number\r\n  route: string\r\n}\r\n\r\ninterface MunicipalRate {\r\n  type: string\r\n  rate: string\r\n  freq: string\r\n  updated: string\r\n}\r\n\r\ninterface MonthlyData {\r\n  week: string\r\n  waste: number\r\n  vehicle: number\r\n}\r\n\r\nexport default function CostCalculator() {\r\n  const [activeTab, setActiveTab] = useState<\"waste\" | \"vehicle\">(\"waste\")\r\n  const [costData, setCostData] = useState<CostData[]>([])\r\n  const [vehicleCostData, setVehicleCostData] = useState<VehicleCostData[]>([])\r\n  const [municipalRates, setMunicipalRates] = useState<MunicipalRate[]>([])\r\n  const [monthlyData, setMonthlyData] = useState<MonthlyData[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n  const [wasteTotalCost, setWasteTotalCost] = useState(0)\r\n  const [vehicleTotalCost, setVehicleTotalCost] = useState(0)\r\n\r\n  useEffect(() => {\r\n    fetchCostData()\r\n  }, [])\r\n\r\n  const fetchCostData = async () => {\r\n    const supabase = createClient()\r\n    \r\n    try {\r\n      const { data: { user } } = await supabase.auth.getUser()\r\n      if (!user) return\r\n\r\n      // Fetch waste costs by type for current month\r\n      const monthStart = new Date()\r\n      monthStart.setDate(1)\r\n      monthStart.setHours(0, 0, 0, 0)\r\n\r\n      const { data: wasteLogs } = await supabase\r\n        .from('waste_logs')\r\n        .select(`\r\n          cost,\r\n          weight,\r\n          logged_at,\r\n          waste_types (\r\n            name,\r\n            color\r\n          )\r\n        `)\r\n        .eq('user_id', user.id)\r\n        .gte('logged_at', monthStart.toISOString())\r\n\r\n      // Process cost data by type\r\n      const costMap = new Map<string, { cost: number; color: string }>()\r\n      \r\n      wasteLogs?.forEach((log: any) => {\r\n        const typeName = log.waste_types?.name || 'Unknown'\r\n        const color = log.waste_types?.color || 'var(--primary)'\r\n        const existing = costMap.get(typeName) || { cost: 0, color }\r\n        costMap.set(typeName, { cost: existing.cost + Number(log.cost), color })\r\n      })\r\n\r\n      const processedCostData: CostData[] = Array.from(costMap.entries()).map(([type, data]) => ({\r\n        type,\r\n        cost: Number(data.cost.toFixed(2)),\r\n        color: data.color\r\n      }))\r\n\r\n      setCostData(processedCostData)\r\n      setWasteTotalCost(processedCostData.reduce((sum, item) => sum + item.cost, 0))\r\n\r\n      // Process monthly data by week\r\n      const weeklyMap = new Map<string, { waste: number; vehicle: number }>()\r\n      const today = new Date()\r\n      \r\n      for (let w = 1; w <= 4; w++) {\r\n        weeklyMap.set(`Week ${w}`, { waste: 0, vehicle: 0 })\r\n      }\r\n\r\n      wasteLogs?.forEach((log: any) => {\r\n        const logDate = new Date(log.logged_at)\r\n        const weekNum = Math.ceil(logDate.getDate() / 7)\r\n        const weekKey = `Week ${Math.min(weekNum, 4)}`\r\n        const existing = weeklyMap.get(weekKey)!\r\n        existing.waste += Number(log.cost)\r\n      })\r\n\r\n      // Fetch vehicle costs\r\n      const { data: vehicles } = await supabase\r\n        .from('vehicles')\r\n        .select(`\r\n          id,\r\n          name,\r\n          fuel_cost,\r\n          maintenance_cost,\r\n          insurance_cost,\r\n          routes (\r\n            name\r\n          )\r\n        `)\r\n\r\n      if (vehicles) {\r\n        const processedVehicles: VehicleCostData[] = vehicles.map((v: any) => ({\r\n          vehicle: v.name,\r\n          fuel: Number(v.fuel_cost),\r\n          maintenance: Number(v.maintenance_cost),\r\n          insurance: Number(v.insurance_cost),\r\n          route: v.routes?.[0]?.name || 'Not assigned'\r\n        }))\r\n        setVehicleCostData(processedVehicles)\r\n        \r\n        const totalVehicleCost = processedVehicles.reduce(\r\n          (sum, v) => sum + v.fuel + v.maintenance + v.insurance, 0\r\n        )\r\n        setVehicleTotalCost(totalVehicleCost)\r\n\r\n        // Add vehicle costs to weekly data\r\n        const vehicleCostPerWeek = totalVehicleCost / 4\r\n        weeklyMap.forEach((data) => {\r\n          data.vehicle = Number(vehicleCostPerWeek.toFixed(0))\r\n        })\r\n      }\r\n\r\n      const processedMonthlyData: MonthlyData[] = Array.from(weeklyMap.entries()).map(([week, data]) => ({\r\n        week,\r\n        waste: Number(data.waste.toFixed(0)),\r\n        vehicle: data.vehicle\r\n      }))\r\n      setMonthlyData(processedMonthlyData)\r\n\r\n      // Fetch municipal rates\r\n      const { data: rates } = await supabase\r\n        .from('municipal_rates')\r\n        .select(`\r\n          rate_per_kg,\r\n          collection_frequency,\r\n          last_updated,\r\n          waste_types (\r\n            name\r\n          )\r\n        `)\r\n\r\n      if (rates) {\r\n        const processedRates: MunicipalRate[] = rates.map((r: any) => ({\r\n          type: r.waste_types?.name || 'Unknown',\r\n          rate: `$${Number(r.rate_per_kg).toFixed(2)}/kg`,\r\n          freq: r.collection_frequency || 'Weekly',\r\n          updated: new Date(r.last_updated).toLocaleDateString('en-US', { month: 'short', year: 'numeric' })\r\n        }))\r\n        setMunicipalRates(processedRates)\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching cost data:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen bg-gradient-to-br from-background via-white to-background/80 p-4 sm:p-6 lg:p-8 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading cost data...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gradient-to-br from-background via-white to-background/80 p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8 pt-2\">\r\n          <h1 className=\"text-4xl font-bold text-foreground mb-1 tracking-tight\">Cost Tracker</h1>\r\n          <p className=\"text-muted-foreground text-lg\">Monitor disposal and vehicle costs</p>\r\n        </div>\r\n\r\n        <div className=\"flex gap-2 mb-8\">\r\n          <button\r\n            onClick={() => setActiveTab(\"waste\")}\r\n            className={`px-6 py-2 rounded-xl font-semibold transition-all duration-200 ${\r\n              activeTab === \"waste\"\r\n                ? \"bg-primary text-primary-foreground shadow-md\"\r\n                : \"bg-muted text-muted-foreground hover:bg-border/60\"\r\n            }`}\r\n          >\r\n            Waste Costs\r\n          </button>\r\n          <button\r\n            onClick={() => setActiveTab(\"vehicle\")}\r\n            className={`px-6 py-2 rounded-xl font-semibold transition-all duration-200 ${\r\n              activeTab === \"vehicle\"\r\n                ? \"bg-primary text-primary-foreground shadow-md\"\r\n                : \"bg-muted text-muted-foreground hover:bg-border/60\"\r\n            }`}\r\n          >\r\n            Vehicle Costs\r\n          </button>\r\n        </div>\r\n\r\n        {activeTab === \"waste\" && (\r\n          <>\r\n            {/* Waste Costs Summary Cards */}\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n              <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-accent/10 hover:shadow-md\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                  Total Cost This Month\r\n                </p>\r\n                <p className=\"text-4xl font-bold text-foreground\">${wasteTotalCost.toFixed(2)}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">↓ 12% from last month</p>\r\n              </Card>\r\n\r\n              <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-primary/10 hover:shadow-md\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                  Average per Week\r\n                </p>\r\n                <p className=\"text-4xl font-bold text-primary\">${(wasteTotalCost / 4).toFixed(2)}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Stable spending</p>\r\n              </Card>\r\n\r\n              <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-secondary/10 hover:shadow-md\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                  Projections Next Month\r\n                </p>\r\n                <p className=\"text-4xl font-bold text-secondary\">${(wasteTotalCost * 1.05).toFixed(2)}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Based on trends</p>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Waste Charts */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n              <Card className=\"eco-card p-6\">\r\n                <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Cost by Waste Type</h2>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart data={costData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n                    <XAxis dataKey=\"type\" stroke=\"var(--muted-foreground)\" />\r\n                    <YAxis stroke=\"var(--muted-foreground)\" />\r\n                    <Tooltip\r\n                      contentStyle={{\r\n                        backgroundColor: \"var(--card)\",\r\n                        border: \"1px solid var(--border)\",\r\n                        borderRadius: \"0.75rem\",\r\n                      }}\r\n                    />\r\n                    <Bar dataKey=\"cost\" fill=\"var(--primary)\" radius={[8, 8, 0, 0]} />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </Card>\r\n\r\n              <Card className=\"eco-card p-6\">\r\n                <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Distribution</h2>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={costData.filter((item) => item.cost > 0)}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      labelLine={false}\r\n                      outerRadius={100}\r\n                      fill=\"#8884d8\"\r\n                      dataKey=\"cost\"\r\n                    >\r\n                      {costData.map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={entry.color} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip />\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Waste Municipal Rates Table */}\r\n            <Card className=\"eco-card p-6\">\r\n              <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Municipal Waste Rates</h2>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-sm\">\r\n                  <thead className=\"bg-muted/40 border-b border-border\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Waste Type</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Per kg</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Collection Frequency</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Last Updated</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {municipalRates.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan={4} className=\"px-6 py-8 text-center text-muted-foreground\">\r\n                          No municipal rates found\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      municipalRates.map((row) => (\r\n                        <tr\r\n                          key={row.type}\r\n                          className=\"border-b border-border/50 hover:bg-muted/20 transition-colors duration-200\"\r\n                        >\r\n                          <td className=\"px-6 py-4 font-medium text-foreground\">{row.type}</td>\r\n                          <td className=\"px-6 py-4 text-foreground\">{row.rate}</td>\r\n                          <td className=\"px-6 py-4 text-muted-foreground\">{row.freq}</td>\r\n                          <td className=\"px-6 py-4 text-muted-foreground\">{row.updated}</td>\r\n                        </tr>\r\n                      ))\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </Card>\r\n          </>\r\n        )}\r\n\r\n        {activeTab === \"vehicle\" && (\r\n          <>\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\r\n              <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-accent/10 hover:shadow-md\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                  Total Vehicle Cost This Month\r\n                </p>\r\n                <p className=\"text-4xl font-bold text-foreground\">${vehicleTotalCost.toFixed(2)}</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">{vehicleCostData.length} active vehicles</p>\r\n              </Card>\r\n\r\n              <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-primary/10 hover:shadow-md\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                  Average per Vehicle\r\n                </p>\r\n                <p className=\"text-4xl font-bold text-primary\">\r\n                  ${vehicleCostData.length > 0 ? (vehicleTotalCost / vehicleCostData.length).toFixed(2) : '0.00'}\r\n                </p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Monthly cost</p>\r\n              </Card>\r\n\r\n              <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-secondary/10 hover:shadow-md\">\r\n                <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">Cost per km</p>\r\n                <p className=\"text-4xl font-bold text-secondary\">$0.58</p>\r\n                <p className=\"text-xs text-muted-foreground mt-2\">Average efficiency</p>\r\n              </Card>\r\n            </div>\r\n\r\n            {/* Vehicle Cost Charts */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\r\n              <Card className=\"eco-card p-6\">\r\n                <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Combined Costs & Waste</h2>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <BarChart data={monthlyData}>\r\n                    <CartesianGrid strokeDasharray=\"3 3\" stroke=\"var(--border)\" />\r\n                    <XAxis dataKey=\"week\" stroke=\"var(--muted-foreground)\" />\r\n                    <YAxis stroke=\"var(--muted-foreground)\" />\r\n                    <Tooltip\r\n                      contentStyle={{\r\n                        backgroundColor: \"var(--card)\",\r\n                        border: \"1px solid var(--border)\",\r\n                        borderRadius: \"0.75rem\",\r\n                      }}\r\n                    />\r\n                    <Bar dataKey=\"waste\" fill=\"var(--primary)\" radius={[8, 8, 0, 0]} />\r\n                    <Bar dataKey=\"vehicle\" fill=\"var(--secondary)\" radius={[8, 8, 0, 0]} />\r\n                  </BarChart>\r\n                </ResponsiveContainer>\r\n              </Card>\r\n\r\n              <Card className=\"eco-card p-6\">\r\n                <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Vehicle Cost Breakdown</h2>\r\n                <ResponsiveContainer width=\"100%\" height={300}>\r\n                  <PieChart>\r\n                    <Pie\r\n                      data={[\r\n                        { name: \"Fuel\", value: 40, color: \"hsl(142, 70%, 50%)\" },\r\n                        { name: \"Maintenance\", value: 35, color: \"hsl(220, 70%, 50%)\" },\r\n                        { name: \"Insurance\", value: 25, color: \"hsl(55, 70%, 50%)\" },\r\n                      ]}\r\n                      cx=\"50%\"\r\n                      cy=\"50%\"\r\n                      labelLine={false}\r\n                      outerRadius={100}\r\n                      fill=\"#8884d8\"\r\n                      dataKey=\"value\"\r\n                    >\r\n                      {[\r\n                        { name: \"Fuel\", value: 40, color: \"hsl(142, 70%, 50%)\" },\r\n                        { name: \"Maintenance\", value: 35, color: \"hsl(220, 70%, 50%)\" },\r\n                        { name: \"Insurance\", value: 25, color: \"hsl(55, 70%, 50%)\" },\r\n                      ].map((entry, index) => (\r\n                        <Cell key={`cell-${index}`} fill={entry.color} />\r\n                      ))}\r\n                    </Pie>\r\n                    <Tooltip />\r\n                  </PieChart>\r\n                </ResponsiveContainer>\r\n              </Card>\r\n            </div>\r\n\r\n            <Card className=\"eco-card p-6\">\r\n              <h2 className=\"text-xl font-semibold text-foreground mb-4 tracking-tight\">Vehicle Cost Details</h2>\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"w-full text-sm\">\r\n                  <thead className=\"bg-muted/40 border-b border-border\">\r\n                    <tr>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Vehicle</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Fuel Cost</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Maintenance</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Insurance</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Total Cost</th>\r\n                      <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Route</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    {vehicleCostData.length === 0 ? (\r\n                      <tr>\r\n                        <td colSpan={6} className=\"px-6 py-8 text-center text-muted-foreground\">\r\n                          No vehicle data found\r\n                        </td>\r\n                      </tr>\r\n                    ) : (\r\n                      vehicleCostData.map((vehicle) => {\r\n                        const totalCost = vehicle.fuel + vehicle.maintenance + vehicle.insurance\r\n                        return (\r\n                          <tr\r\n                            key={vehicle.vehicle}\r\n                            className=\"border-b border-border/50 hover:bg-muted/20 transition-colors duration-200\"\r\n                          >\r\n                            <td className=\"px-6 py-4 font-medium text-foreground\">{vehicle.vehicle}</td>\r\n                            <td className=\"px-6 py-4 text-foreground\">${vehicle.fuel}</td>\r\n                            <td className=\"px-6 py-4 text-foreground\">${vehicle.maintenance}</td>\r\n                            <td className=\"px-6 py-4 text-foreground\">${vehicle.insurance}</td>\r\n                            <td className=\"px-6 py-4 font-semibold text-foreground\">${totalCost}</td>\r\n                            <td className=\"px-6 py-4 text-foreground\">{vehicle.route}</td>\r\n                          </tr>\r\n                        )\r\n                      })\r\n                    )}\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </Card>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AALA;;;;;;AAkCe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAsB;IAChE,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAa,EAAE;IACvD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,iNAAQ,EAAoB,EAAE;IAC5E,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAkB,EAAE;IACxE,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAgB,EAAE;IAChE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,iNAAQ,EAAC;IACrD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,iNAAQ,EAAC;IAEzD,IAAA,kNAAS,EAAC;QACR;IACF,GAAG,EAAE;IAEL,MAAM,gBAAgB;QACpB,MAAM,WAAW,IAAA,yIAAY;QAE7B,IAAI;YACF,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YACtD,IAAI,CAAC,MAAM;YAEX,8CAA8C;YAC9C,MAAM,aAAa,IAAI;YACvB,WAAW,OAAO,CAAC;YACnB,WAAW,QAAQ,CAAC,GAAG,GAAG,GAAG;YAE7B,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,SAC/B,IAAI,CAAC,cACL,MAAM,CAAC,CAAC;;;;;;;;QAQT,CAAC,EACA,EAAE,CAAC,WAAW,KAAK,EAAE,EACrB,GAAG,CAAC,aAAa,WAAW,WAAW;YAE1C,4BAA4B;YAC5B,MAAM,UAAU,IAAI;YAEpB,WAAW,QAAQ,CAAC;gBAClB,MAAM,WAAW,IAAI,WAAW,EAAE,QAAQ;gBAC1C,MAAM,QAAQ,IAAI,WAAW,EAAE,SAAS;gBACxC,MAAM,WAAW,QAAQ,GAAG,CAAC,aAAa;oBAAE,MAAM;oBAAG;gBAAM;gBAC3D,QAAQ,GAAG,CAAC,UAAU;oBAAE,MAAM,SAAS,IAAI,GAAG,OAAO,IAAI,IAAI;oBAAG;gBAAM;YACxE;YAEA,MAAM,oBAAgC,MAAM,IAAI,CAAC,QAAQ,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,GAAK,CAAC;oBACzF;oBACA,MAAM,OAAO,KAAK,IAAI,CAAC,OAAO,CAAC;oBAC/B,OAAO,KAAK,KAAK;gBACnB,CAAC;YAED,YAAY;YACZ,kBAAkB,kBAAkB,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,IAAI,EAAE;YAE3E,+BAA+B;YAC/B,MAAM,YAAY,IAAI;YACtB,MAAM,QAAQ,IAAI;YAElB,IAAK,IAAI,IAAI,GAAG,KAAK,GAAG,IAAK;gBAC3B,UAAU,GAAG,CAAC,CAAC,KAAK,EAAE,GAAG,EAAE;oBAAE,OAAO;oBAAG,SAAS;gBAAE;YACpD;YAEA,WAAW,QAAQ,CAAC;gBAClB,MAAM,UAAU,IAAI,KAAK,IAAI,SAAS;gBACtC,MAAM,UAAU,KAAK,IAAI,CAAC,QAAQ,OAAO,KAAK;gBAC9C,MAAM,UAAU,CAAC,KAAK,EAAE,KAAK,GAAG,CAAC,SAAS,IAAI;gBAC9C,MAAM,WAAW,UAAU,GAAG,CAAC;gBAC/B,SAAS,KAAK,IAAI,OAAO,IAAI,IAAI;YACnC;YAEA,sBAAsB;YACtB,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,SAC9B,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;;;;;QAST,CAAC;YAEH,IAAI,UAAU;gBACZ,MAAM,oBAAuC,SAAS,GAAG,CAAC,CAAC,IAAW,CAAC;wBACrE,SAAS,EAAE,IAAI;wBACf,MAAM,OAAO,EAAE,SAAS;wBACxB,aAAa,OAAO,EAAE,gBAAgB;wBACtC,WAAW,OAAO,EAAE,cAAc;wBAClC,OAAO,EAAE,MAAM,EAAE,CAAC,EAAE,EAAE,QAAQ;oBAChC,CAAC;gBACD,mBAAmB;gBAEnB,MAAM,mBAAmB,kBAAkB,MAAM,CAC/C,CAAC,KAAK,IAAM,MAAM,EAAE,IAAI,GAAG,EAAE,WAAW,GAAG,EAAE,SAAS,EAAE;gBAE1D,oBAAoB;gBAEpB,mCAAmC;gBACnC,MAAM,qBAAqB,mBAAmB;gBAC9C,UAAU,OAAO,CAAC,CAAC;oBACjB,KAAK,OAAO,GAAG,OAAO,mBAAmB,OAAO,CAAC;gBACnD;YACF;YAEA,MAAM,uBAAsC,MAAM,IAAI,CAAC,UAAU,OAAO,IAAI,GAAG,CAAC,CAAC,CAAC,MAAM,KAAK,GAAK,CAAC;oBACjG;oBACA,OAAO,OAAO,KAAK,KAAK,CAAC,OAAO,CAAC;oBACjC,SAAS,KAAK,OAAO;gBACvB,CAAC;YACD,eAAe;YAEf,wBAAwB;YACxB,MAAM,EAAE,MAAM,KAAK,EAAE,GAAG,MAAM,SAC3B,IAAI,CAAC,mBACL,MAAM,CAAC,CAAC;;;;;;;QAOT,CAAC;YAEH,IAAI,OAAO;gBACT,MAAM,iBAAkC,MAAM,GAAG,CAAC,CAAC,IAAW,CAAC;wBAC7D,MAAM,EAAE,WAAW,EAAE,QAAQ;wBAC7B,MAAM,CAAC,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,CAAC,GAAG,GAAG,CAAC;wBAC/C,MAAM,EAAE,oBAAoB,IAAI;wBAChC,SAAS,IAAI,KAAK,EAAE,YAAY,EAAE,kBAAkB,CAAC,SAAS;4BAAE,OAAO;4BAAS,MAAM;wBAAU;oBAClG,CAAC;gBACD,kBAAkB;YACpB;QAEF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,6BAA6B;QAC7C,SAAU;YACR,WAAW;QACb;IACF;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAyD;;;;;;sCACvE,8OAAC;4BAAE,WAAU;sCAAgC;;;;;;;;;;;;8BAG/C,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,+DAA+D,EACzE,cAAc,UACV,iDACA,qDACJ;sCACH;;;;;;sCAGD,8OAAC;4BACC,SAAS,IAAM,aAAa;4BAC5B,WAAW,CAAC,+DAA+D,EACzE,cAAc,YACV,iDACA,qDACJ;sCACH;;;;;;;;;;;;gBAKF,cAAc,yBACb;;sCAEE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAE,WAAU;sDAA2E;;;;;;sDAGxF,8OAAC;4CAAE,WAAU;;gDAAqC;gDAAE,eAAe,OAAO,CAAC;;;;;;;sDAC3E,8OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;8CAGpD,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAE,WAAU;sDAA2E;;;;;;sDAGxF,8OAAC;4CAAE,WAAU;;gDAAkC;gDAAE,CAAC,iBAAiB,CAAC,EAAE,OAAO,CAAC;;;;;;;sDAC9E,8OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;8CAGpD,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAE,WAAU;sDAA2E;;;;;;sDAGxF,8OAAC;4CAAE,WAAU;;gDAAoC;gDAAE,CAAC,iBAAiB,IAAI,EAAE,OAAO,CAAC;;;;;;;sDACnF,8OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;;;;;;;sCAKtD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAG,WAAU;sDAA4D;;;;;;sDAC1E,8OAAC,0LAAmB;4CAAC,OAAM;4CAAO,QAAQ;sDACxC,cAAA,8OAAC,gKAAQ;gDAAC,MAAM;;kEACd,8OAAC,8KAAa;wDAAC,iBAAgB;wDAAM,QAAO;;;;;;kEAC5C,8OAAC,8JAAK;wDAAC,SAAQ;wDAAO,QAAO;;;;;;kEAC7B,8OAAC,8JAAK;wDAAC,QAAO;;;;;;kEACd,8OAAC,kKAAO;wDACN,cAAc;4DACZ,iBAAiB;4DACjB,QAAQ;4DACR,cAAc;wDAChB;;;;;;kEAEF,8OAAC,0JAAG;wDAAC,SAAQ;wDAAO,MAAK;wDAAiB,QAAQ;4DAAC;4DAAG;4DAAG;4DAAG;yDAAE;;;;;;;;;;;;;;;;;;;;;;;8CAKpE,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAG,WAAU;sDAA4D;;;;;;sDAC1E,8OAAC,0LAAmB;4CAAC,OAAM;4CAAO,QAAQ;sDACxC,cAAA,8OAAC,gKAAQ;;kEACP,8OAAC,sJAAG;wDACF,MAAM,SAAS,MAAM,CAAC,CAAC,OAAS,KAAK,IAAI,GAAG;wDAC5C,IAAG;wDACH,IAAG;wDACH,WAAW;wDACX,aAAa;wDACb,MAAK;wDACL,SAAQ;kEAEP,SAAS,GAAG,CAAC,CAAC,OAAO,sBACpB,8OAAC,4JAAI;gEAAuB,MAAM,MAAM,KAAK;+DAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;kEAG9B,8OAAC,kKAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAOhB,8OAAC,iIAAI;4BAAC,WAAU;;8CACd,8OAAC;oCAAG,WAAU;8CAA4D;;;;;;8CAC1E,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAM,WAAU;;0DACf,8OAAC;gDAAM,WAAU;0DACf,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;;;;;;;;;;;;0DAGtE,8OAAC;0DACE,eAAe,MAAM,KAAK,kBACzB,8OAAC;8DACC,cAAA,8OAAC;wDAAG,SAAS;wDAAG,WAAU;kEAA8C;;;;;;;;;;2DAK1E,eAAe,GAAG,CAAC,CAAC,oBAClB,8OAAC;wDAEC,WAAU;;0EAEV,8OAAC;gEAAG,WAAU;0EAAyC,IAAI,IAAI;;;;;;0EAC/D,8OAAC;gEAAG,WAAU;0EAA6B,IAAI,IAAI;;;;;;0EACnD,8OAAC;gEAAG,WAAU;0EAAmC,IAAI,IAAI;;;;;;0EACzD,8OAAC;gEAAG,WAAU;0EAAmC,IAAI,OAAO;;;;;;;uDANvD,IAAI,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAiB9B,cAAc,2BACb;;sCACE,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAE,WAAU;sDAA2E;;;;;;sDAGxF,8OAAC;4CAAE,WAAU;;gDAAqC;gDAAE,iBAAiB,OAAO,CAAC;;;;;;;sDAC7E,8OAAC;4CAAE,WAAU;;gDAAsC,gBAAgB,MAAM;gDAAC;;;;;;;;;;;;;8CAG5E,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAE,WAAU;sDAA2E;;;;;;sDAGxF,8OAAC;4CAAE,WAAU;;gDAAkC;gDAC3C,gBAAgB,MAAM,GAAG,IAAI,CAAC,mBAAmB,gBAAgB,MAAM,EAAE,OAAO,CAAC,KAAK;;;;;;;sDAE1F,8OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;8CAGpD,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAE,WAAU;sDAA2E;;;;;;sDACxF,8OAAC;4CAAE,WAAU;sDAAoC;;;;;;sDACjD,8OAAC;4CAAE,WAAU;sDAAqC;;;;;;;;;;;;;;;;;;sCAKtD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAG,WAAU;sDAA4D;;;;;;sDAC1E,8OAAC,0LAAmB;4CAAC,OAAM;4CAAO,QAAQ;sDACxC,cAAA,8OAAC,gKAAQ;gDAAC,MAAM;;kEACd,8OAAC,8KAAa;wDAAC,iBAAgB;wDAAM,QAAO;;;;;;kEAC5C,8OAAC,8JAAK;wDAAC,SAAQ;wDAAO,QAAO;;;;;;kEAC7B,8OAAC,8JAAK;wDAAC,QAAO;;;;;;kEACd,8OAAC,kKAAO;wDACN,cAAc;4DACZ,iBAAiB;4DACjB,QAAQ;4DACR,cAAc;wDAChB;;;;;;kEAEF,8OAAC,0JAAG;wDAAC,SAAQ;wDAAQ,MAAK;wDAAiB,QAAQ;4DAAC;4DAAG;4DAAG;4DAAG;yDAAE;;;;;;kEAC/D,8OAAC,0JAAG;wDAAC,SAAQ;wDAAU,MAAK;wDAAmB,QAAQ;4DAAC;4DAAG;4DAAG;4DAAG;yDAAE;;;;;;;;;;;;;;;;;;;;;;;8CAKzE,8OAAC,iIAAI;oCAAC,WAAU;;sDACd,8OAAC;4CAAG,WAAU;sDAA4D;;;;;;sDAC1E,8OAAC,0LAAmB;4CAAC,OAAM;4CAAO,QAAQ;sDACxC,cAAA,8OAAC,gKAAQ;;kEACP,8OAAC,sJAAG;wDACF,MAAM;4DACJ;gEAAE,MAAM;gEAAQ,OAAO;gEAAI,OAAO;4DAAqB;4DACvD;gEAAE,MAAM;gEAAe,OAAO;gEAAI,OAAO;4DAAqB;4DAC9D;gEAAE,MAAM;gEAAa,OAAO;gEAAI,OAAO;4DAAoB;yDAC5D;wDACD,IAAG;wDACH,IAAG;wDACH,WAAW;wDACX,aAAa;wDACb,MAAK;wDACL,SAAQ;kEAEP;4DACC;gEAAE,MAAM;gEAAQ,OAAO;gEAAI,OAAO;4DAAqB;4DACvD;gEAAE,MAAM;gEAAe,OAAO;gEAAI,OAAO;4DAAqB;4DAC9D;gEAAE,MAAM;gEAAa,OAAO;gEAAI,OAAO;4DAAoB;yDAC5D,CAAC,GAAG,CAAC,CAAC,OAAO,sBACZ,8OAAC,4JAAI;gEAAuB,MAAM,MAAM,KAAK;+DAAlC,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;kEAG9B,8OAAC,kKAAO;;;;;;;;;;;;;;;;;;;;;;;;;;;;sCAMhB,8OAAC,iIAAI;4BAAC,WAAU;;8CACd,8OAAC;oCAAG,WAAU;8CAA4D;;;;;;8CAC1E,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAM,WAAU;;0DACf,8OAAC;gDAAM,WAAU;0DACf,cAAA,8OAAC;;sEACC,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;sEAClE,8OAAC;4DAAG,WAAU;sEAAoD;;;;;;;;;;;;;;;;;0DAGtE,8OAAC;0DACE,gBAAgB,MAAM,KAAK,kBAC1B,8OAAC;8DACC,cAAA,8OAAC;wDAAG,SAAS;wDAAG,WAAU;kEAA8C;;;;;;;;;;2DAK1E,gBAAgB,GAAG,CAAC,CAAC;oDACnB,MAAM,YAAY,QAAQ,IAAI,GAAG,QAAQ,WAAW,GAAG,QAAQ,SAAS;oDACxE,qBACE,8OAAC;wDAEC,WAAU;;0EAEV,8OAAC;gEAAG,WAAU;0EAAyC,QAAQ,OAAO;;;;;;0EACtE,8OAAC;gEAAG,WAAU;;oEAA4B;oEAAE,QAAQ,IAAI;;;;;;;0EACxD,8OAAC;gEAAG,WAAU;;oEAA4B;oEAAE,QAAQ,WAAW;;;;;;;0EAC/D,8OAAC;gEAAG,WAAU;;oEAA4B;oEAAE,QAAQ,SAAS;;;;;;;0EAC7D,8OAAC;gEAAG,WAAU;;oEAA0C;oEAAE;;;;;;;0EAC1D,8OAAC;gEAAG,WAAU;0EAA6B,QAAQ,KAAK;;;;;;;uDARnD,QAAQ,OAAO;;;;;gDAW1B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAWtB"}},
    {"offset": {"line": 5449, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/lib/data/mock-routes.ts"],"sourcesContent":["/**\r\n * Mock route data for vehicle tracking map\r\n * Contains realistic coordinates for Bhaktapur, Nepal\r\n * Based on actual locations in Bhaktapur for waste collection routes\r\n */\r\n\r\nimport type { RouteMapData, Coordinate, PickupPoint, VehicleState } from '@/lib/types/route-map'\r\n\r\n/**\r\n * Generate a route path with intermediate points for smooth visualization\r\n */\r\nfunction generateRoutePath(points: Coordinate[]): Coordinate[] {\r\n  const path: Coordinate[] = []\r\n  \r\n  for (let i = 0; i < points.length - 1; i++) {\r\n    const start = points[i]\r\n    const end = points[i + 1]\r\n    \r\n    // Add start point\r\n    path.push(start)\r\n    \r\n    // Add intermediate points for smoother lines\r\n    const steps = 3\r\n    for (let j = 1; j < steps; j++) {\r\n      path.push({\r\n        lat: start.lat + ((end.lat - start.lat) * j) / steps,\r\n        lng: start.lng + ((end.lng - start.lng) * j) / steps,\r\n      })\r\n    }\r\n  }\r\n  \r\n  // Add final point\r\n  if (points.length > 0) {\r\n    path.push(points[points.length - 1])\r\n  }\r\n  \r\n  return path\r\n}\r\n\r\n/**\r\n * Durbar Square Route - Morning Collection\r\n * Covers Bhaktapur area following actual road network visible in map\r\n * Road: Kedarnath Temple → Mul Chowk → Yalachhen (diagonal road) → Sunrise Bank\r\n * The road goes DIAGONALLY from southwest to northeast\r\n */\r\nexport const downtownRoute: RouteMapData = {\r\n  id: 'route-downtown-001',\r\n  name: 'Yalachhen Morning Route',\r\n  status: 'active',\r\n  totalDistance: 1.2,\r\n  estimatedDuration: '45m',\r\n  startPoint: { lat: 27.6693, lng: 85.4252 },\r\n  endPoint: { lat: 27.6718, lng: 85.4375 },\r\n  vehicle: {\r\n    id: 'truck-001',\r\n    name: 'ECO-001',\r\n    position: { lat: 27.6705, lng: 85.4305 },\r\n    heading: 45,\r\n    speed: 15,\r\n    status: 'moving',\r\n    currentStopIndex: 2,\r\n    lastUpdated: new Date(),\r\n  },\r\n  pickupPoints: [\r\n    {\r\n      id: 'stop-001',\r\n      position: { lat: 27.6693, lng: 85.4252 },\r\n      address: 'Kedarnath Temple',\r\n      scheduledTime: '06:00 AM',\r\n      expectedWaste: 45,\r\n      status: 'completed',\r\n      order: 1,\r\n    },\r\n    {\r\n      id: 'stop-002',\r\n      position: { lat: 27.6697, lng: 85.4270 },\r\n      address: 'Mul Chowk Yamawar',\r\n      scheduledTime: '06:15 AM',\r\n      expectedWaste: 32,\r\n      status: 'completed',\r\n      order: 2,\r\n    },\r\n    {\r\n      id: 'stop-003',\r\n      position: { lat: 27.6705, lng: 85.4305 },\r\n      address: 'Yalachhen Junction',\r\n      scheduledTime: '06:30 AM',\r\n      expectedWaste: 28,\r\n      status: 'in-progress',\r\n      order: 3,\r\n    },\r\n    {\r\n      id: 'stop-004',\r\n      position: { lat: 27.6712, lng: 85.4340 },\r\n      address: 'Near Sunrise Bank',\r\n      scheduledTime: '06:45 AM',\r\n      expectedWaste: 55,\r\n      status: 'pending',\r\n      order: 4,\r\n    },\r\n    {\r\n      id: 'stop-005',\r\n      position: { lat: 27.6718, lng: 85.4375 },\r\n      address: 'Sata Pharm Area',\r\n      scheduledTime: '07:00 AM',\r\n      expectedWaste: 41,\r\n      status: 'pending',\r\n      order: 5,\r\n    },\r\n  ],\r\n  // Route path following the DIAGONAL road from Kedarnath Temple to Sunrise Bank\r\n  // This road goes from southwest to northeast at approximately 45 degree angle\r\n  routePath: generateRoutePath([\r\n    { lat: 27.6693, lng: 85.4252 },  // Start: Kedarnath Temple\r\n    { lat: 27.6695, lng: 85.4260 },  // Road going northeast\r\n    { lat: 27.6697, lng: 85.4270 },  // Mul Chowk junction\r\n    { lat: 27.6699, lng: 85.4280 },  // Continuing diagonal\r\n    { lat: 27.6701, lng: 85.4290 },  // Along Yalachhen road\r\n    { lat: 27.6703, lng: 85.4298 },  // Road continues diagonal\r\n    { lat: 27.6705, lng: 85.4305 },  // Central junction (Collection Point)\r\n    { lat: 27.6707, lng: 85.4315 },  // Continuing northeast\r\n    { lat: 27.6709, lng: 85.4325 },  // Road still diagonal\r\n    { lat: 27.6711, lng: 85.4335 },  // Approaching Sunrise Bank\r\n    { lat: 27.6714, lng: 85.4350 },  // Near Sunrise Bank\r\n    { lat: 27.6716, lng: 85.4362 },  // Past bank\r\n    { lat: 27.6718, lng: 85.4375 },  // End: Sata Pharm area\r\n  ]),\r\n}\r\n\r\n/**\r\n * Suryabinayak Route - Afternoon Collection\r\n * Covers Suryabinayak and surrounding residential areas of Bhaktapur\r\n */\r\nexport const suburbanRoute: RouteMapData = {\r\n  id: 'route-suburban-002',\r\n  name: 'Suryabinayak Afternoon',\r\n  status: 'pending',\r\n  totalDistance: 4.2,\r\n  estimatedDuration: '2h 00m',\r\n  startPoint: { lat: 27.6650, lng: 85.4180 },\r\n  endPoint: { lat: 27.6590, lng: 85.4280 },\r\n  vehicle: {\r\n    id: 'truck-002',\r\n    name: 'ECO-002',\r\n    position: { lat: 27.6650, lng: 85.4180 },\r\n    heading: 0,\r\n    speed: 0,\r\n    status: 'idle',\r\n    currentStopIndex: 0,\r\n    lastUpdated: new Date(),\r\n  },\r\n  pickupPoints: [\r\n    {\r\n      id: 'sub-stop-001',\r\n      position: { lat: 27.6650, lng: 85.4180 },\r\n      address: 'Suryabinayak Temple',\r\n      scheduledTime: '01:00 PM',\r\n      expectedWaste: 35,\r\n      status: 'pending',\r\n      order: 1,\r\n    },\r\n    {\r\n      id: 'sub-stop-002',\r\n      position: { lat: 27.6635, lng: 85.4200 },\r\n      address: 'Kamal Binayak',\r\n      scheduledTime: '01:25 PM',\r\n      expectedWaste: 42,\r\n      status: 'pending',\r\n      order: 2,\r\n    },\r\n    {\r\n      id: 'sub-stop-003',\r\n      position: { lat: 27.6620, lng: 85.4220 },\r\n      address: 'Madhyapur Thimi Junction',\r\n      scheduledTime: '01:50 PM',\r\n      expectedWaste: 29,\r\n      status: 'pending',\r\n      order: 3,\r\n    },\r\n    {\r\n      id: 'sub-stop-004',\r\n      position: { lat: 27.6610, lng: 85.4245 },\r\n      address: 'Bode Village',\r\n      scheduledTime: '02:15 PM',\r\n      expectedWaste: 48,\r\n      status: 'pending',\r\n      order: 4,\r\n    },\r\n    {\r\n      id: 'sub-stop-005',\r\n      position: { lat: 27.6600, lng: 85.4260 },\r\n      address: 'Nagadesh Temple Area',\r\n      scheduledTime: '02:40 PM',\r\n      expectedWaste: 36,\r\n      status: 'pending',\r\n      order: 5,\r\n    },\r\n    {\r\n      id: 'sub-stop-006',\r\n      position: { lat: 27.6590, lng: 85.4280 },\r\n      address: 'Balkumari',\r\n      scheduledTime: '03:05 PM',\r\n      expectedWaste: 52,\r\n      status: 'pending',\r\n      order: 6,\r\n    },\r\n  ],\r\n  routePath: generateRoutePath([\r\n    { lat: 27.6650, lng: 85.4180 },\r\n    { lat: 27.6635, lng: 85.4200 },\r\n    { lat: 27.6620, lng: 85.4220 },\r\n    { lat: 27.6610, lng: 85.4245 },\r\n    { lat: 27.6600, lng: 85.4260 },\r\n    { lat: 27.6590, lng: 85.4280 },\r\n  ]),\r\n}\r\n\r\n/**\r\n * Kamalbinayak Route - Evening Collection\r\n * Covers industrial and commercial areas of Bhaktapur\r\n */\r\nexport const industrialRoute: RouteMapData = {\r\n  id: 'route-industrial-003',\r\n  name: 'Kamalbinayak Evening',\r\n  status: 'completed',\r\n  totalDistance: 3.8,\r\n  estimatedDuration: '1h 30m',\r\n  startPoint: { lat: 27.6780, lng: 85.4150 },\r\n  endPoint: { lat: 27.6850, lng: 85.4250 },\r\n  vehicle: {\r\n    id: 'truck-003',\r\n    name: 'ECO-003',\r\n    position: { lat: 27.6850, lng: 85.4250 },\r\n    heading: 180,\r\n    speed: 0,\r\n    status: 'idle',\r\n    currentStopIndex: 5,\r\n    lastUpdated: new Date(),\r\n  },\r\n  pickupPoints: [\r\n    {\r\n      id: 'ind-stop-001',\r\n      position: { lat: 27.6780, lng: 85.4150 },\r\n      address: 'Sallaghari Bus Park',\r\n      scheduledTime: '05:00 PM',\r\n      expectedWaste: 120,\r\n      status: 'completed',\r\n      order: 1,\r\n    },\r\n    {\r\n      id: 'ind-stop-002',\r\n      position: { lat: 27.6795, lng: 85.4170 },\r\n      address: 'Chyamasingh Market',\r\n      scheduledTime: '05:30 PM',\r\n      expectedWaste: 95,\r\n      status: 'completed',\r\n      order: 2,\r\n    },\r\n    {\r\n      id: 'ind-stop-003',\r\n      position: { lat: 27.6810, lng: 85.4190 },\r\n      address: 'Libali Gaun',\r\n      scheduledTime: '06:00 PM',\r\n      expectedWaste: 150,\r\n      status: 'completed',\r\n      order: 3,\r\n    },\r\n    {\r\n      id: 'ind-stop-004',\r\n      position: { lat: 27.6825, lng: 85.4210 },\r\n      address: 'Byasi Area',\r\n      scheduledTime: '06:35 PM',\r\n      expectedWaste: 85,\r\n      status: 'completed',\r\n      order: 4,\r\n    },\r\n    {\r\n      id: 'ind-stop-005',\r\n      position: { lat: 27.6840, lng: 85.4230 },\r\n      address: 'Golmadhi Tole',\r\n      scheduledTime: '07:05 PM',\r\n      expectedWaste: 110,\r\n      status: 'completed',\r\n      order: 5,\r\n    },\r\n    {\r\n      id: 'ind-stop-006',\r\n      position: { lat: 27.6850, lng: 85.4250 },\r\n      address: 'Bhaktapur Municipality Office',\r\n      scheduledTime: '07:35 PM',\r\n      expectedWaste: 0,\r\n      status: 'completed',\r\n      order: 6,\r\n    },\r\n  ],\r\n  routePath: generateRoutePath([\r\n    { lat: 27.6780, lng: 85.4150 },\r\n    { lat: 27.6795, lng: 85.4170 },\r\n    { lat: 27.6810, lng: 85.4190 },\r\n    { lat: 27.6825, lng: 85.4210 },\r\n    { lat: 27.6840, lng: 85.4230 },\r\n    { lat: 27.6850, lng: 85.4250 },\r\n  ]),\r\n}\r\n\r\n/**\r\n * All available routes\r\n */\r\nexport const mockRoutes: RouteMapData[] = [\r\n  downtownRoute,\r\n  suburbanRoute,\r\n  industrialRoute,\r\n]\r\n\r\n/**\r\n * Get route data by ID\r\n */\r\nexport function getRouteById(id: string): RouteMapData | undefined {\r\n  return mockRoutes.find(route => route.id === id)\r\n}\r\n\r\n/**\r\n * Get route data by name (case-insensitive partial match)\r\n */\r\nexport function getRouteByName(name: string): RouteMapData | undefined {\r\n  const normalizedName = name.toLowerCase()\r\n  return mockRoutes.find(route => \r\n    route.name.toLowerCase().includes(normalizedName) ||\r\n    normalizedName.includes(route.name.toLowerCase())\r\n  )\r\n}\r\n\r\n/**\r\n * Simulate vehicle movement along the route\r\n * Returns a new vehicle state with updated position\r\n */\r\nexport function simulateVehicleMovement(\r\n  route: RouteMapData,\r\n  progressPercent: number\r\n): VehicleState {\r\n  const path = route.routePath\r\n  const totalPoints = path.length\r\n  const currentIndex = Math.min(\r\n    Math.floor((progressPercent / 100) * totalPoints),\r\n    totalPoints - 1\r\n  )\r\n  \r\n  const currentPosition = path[currentIndex]\r\n  const nextPosition = path[Math.min(currentIndex + 1, totalPoints - 1)]\r\n  \r\n  // Calculate heading based on direction of travel\r\n  const heading = Math.atan2(\r\n    nextPosition.lng - currentPosition.lng,\r\n    nextPosition.lat - currentPosition.lat\r\n  ) * (180 / Math.PI)\r\n  \r\n  // Determine current stop index\r\n  let currentStopIndex = 0\r\n  for (let i = 0; i < route.pickupPoints.length; i++) {\r\n    const stop = route.pickupPoints[i]\r\n    const stopPathIndex = path.findIndex(\r\n      p => Math.abs(p.lat - stop.position.lat) < 0.001 && \r\n           Math.abs(p.lng - stop.position.lng) < 0.001\r\n    )\r\n    if (stopPathIndex <= currentIndex) {\r\n      currentStopIndex = i\r\n    }\r\n  }\r\n  \r\n  return {\r\n    ...route.vehicle,\r\n    position: currentPosition,\r\n    heading: (heading + 360) % 360,\r\n    speed: progressPercent < 100 ? 20 + Math.random() * 15 : 0,\r\n    status: progressPercent < 100 ? 'moving' : 'idle',\r\n    currentStopIndex,\r\n    lastUpdated: new Date(),\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 5938, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/vehicle-route.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState, useMemo } from \"react\"\r\nimport dynamic from \"next/dynamic\"\r\nimport { MapPin, Truck, Clock, AlertCircle, Map } from \"lucide-react\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport { getRouteByName, mockRoutes } from \"@/lib/data/mock-routes\"\r\nimport type { RouteMapData } from \"@/lib/types/route-map\"\r\n\r\n// Dynamically import the MapWrapper to enable lazy loading\r\nconst MapWrapper = dynamic(\r\n  () => import(\"@/components/map/map-wrapper\"),\r\n  { \r\n    ssr: false,\r\n    loading: () => (\r\n      <Card className=\"eco-card p-8\">\r\n        <div className=\"flex flex-col items-center justify-center min-h-[400px] gap-4\">\r\n          <Map className=\"text-primary/30 animate-pulse\" size={64} />\r\n          <p className=\"text-sm text-muted-foreground\">Loading map...</p>\r\n        </div>\r\n      </Card>\r\n    )\r\n  }\r\n)\r\n\r\ninterface RouteStop {\r\n  id: string\r\n  address: string\r\n  time: string\r\n  waste: number\r\n  order_index: number\r\n}\r\n\r\ninterface RouteData {\r\n  id: string\r\n  name: string\r\n  vehicle: string\r\n  status: string\r\n  stops: number\r\n  distance: number\r\n  duration: string\r\n  stops_list: RouteStop[]\r\n}\r\n\r\nconst statusColors = {\r\n  active: \"bg-primary/20 text-primary\",\r\n  pending: \"bg-soft-yellow/40 text-yellow-700\",\r\n  completed: \"bg-accent/20 text-accent\",\r\n}\r\n\r\nexport default function VehicleRoute() {\r\n  const [selectedRoute, setSelectedRoute] = useState<string | null>(null)\r\n  const [showMap, setShowMap] = useState(false)\r\n  const [routes, setRoutes] = useState<RouteData[]>([])\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    fetchRoutes()\r\n  }, [])\r\n\r\n  const fetchRoutes = async () => {\r\n    const supabase = createClient()\r\n    \r\n    try {\r\n      // Fetch routes with vehicle and stops\r\n      const { data: routesData } = await supabase\r\n        .from('routes')\r\n        .select(`\r\n          id,\r\n          name,\r\n          status,\r\n          total_stops,\r\n          distance,\r\n          duration,\r\n          vehicles (\r\n            name\r\n          )\r\n        `)\r\n        .order('name')\r\n\r\n      if (routesData) {\r\n        const processedRoutes: RouteData[] = []\r\n        \r\n        for (const route of routesData) {\r\n          // Fetch stops for each route\r\n          const { data: stops } = await supabase\r\n            .from('route_stops')\r\n            .select('*')\r\n            .eq('route_id', route.id)\r\n            .order('order_index')\r\n\r\n          const routeStops: RouteStop[] = (stops || []).map((stop: any) => ({\r\n            id: stop.id,\r\n            address: stop.address,\r\n            time: stop.scheduled_time || 'TBD',\r\n            waste: Number(stop.expected_waste) || 0,\r\n            order_index: stop.order_index\r\n          }))\r\n\r\n          processedRoutes.push({\r\n            id: route.id,\r\n            name: route.name,\r\n            vehicle: (route as any).vehicles?.name || 'Unassigned',\r\n            status: route.status,\r\n            stops: route.total_stops,\r\n            distance: Number(route.distance),\r\n            duration: route.duration || 'TBD',\r\n            stops_list: routeStops\r\n          })\r\n        }\r\n\r\n        setRoutes(processedRoutes)\r\n        if (processedRoutes.length > 0) {\r\n          setSelectedRoute(processedRoutes[0].id)\r\n        }\r\n      }\r\n\r\n    } catch (error) {\r\n      console.error('Error fetching routes:', error)\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  const currentRoute = routes.find((r) => r.id === selectedRoute)\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8 flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading routes...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <div className=\"eco-gradient min-h-screen p-4 sm:p-6 lg:p-8\">\r\n      <div className=\"max-w-7xl mx-auto\">\r\n        {/* Header */}\r\n        <div className=\"mb-8 pt-2\">\r\n          <h1 className=\"text-4xl font-bold text-foreground mb-1 tracking-tight\">Vehicle Routes</h1>\r\n          <p className=\"text-muted-foreground text-lg\">Manage waste collection routes and vehicle assignments</p>\r\n        </div>\r\n\r\n        {/* Routes Overview Grid */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8\">\r\n          {routes.map((route) => (\r\n            <button\r\n              key={route.id}\r\n              onClick={() => setSelectedRoute(route.id)}\r\n              className={`text-left transition-all duration-200 ${\r\n                selectedRoute === route.id ? \"ring-2 ring-primary shadow-lg\" : \"\"\r\n              }`}\r\n            >\r\n              <Card className={`eco-card p-6 cursor-pointer ${selectedRoute === route.id ? \"bg-primary/5\" : \"\"}`}>\r\n                <div className=\"flex items-start justify-between mb-3\">\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-foreground mb-1\">{route.name}</h3>\r\n                    <p className=\"text-xs text-muted-foreground\">{route.vehicle}</p>\r\n                  </div>\r\n                  <div\r\n                    className={`px-2 py-1 rounded-full text-xs font-semibold ${\r\n                      statusColors[route.status as keyof typeof statusColors]\r\n                    }`}\r\n                  >\r\n                    {route.status.charAt(0).toUpperCase() + route.status.slice(1)}\r\n                  </div>\r\n                </div>\r\n                <div className=\"space-y-2\">\r\n                  <p className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                    <MapPin size={16} /> {route.distance} km\r\n                  </p>\r\n                  <p className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                    <Clock size={16} /> {route.duration}\r\n                  </p>\r\n                  <p className=\"text-sm text-muted-foreground flex items-center gap-2\">\r\n                    <Truck size={16} /> {route.stops} stops\r\n                  </p>\r\n                </div>\r\n              </Card>\r\n            </button>\r\n          ))}\r\n        </div>\r\n\r\n        {currentRoute && (\r\n          <>\r\n            {/* Map Section - Live Route Map with Vehicle Tracking */}\r\n            {showMap && (\r\n              <div className=\"mb-8\">\r\n                <Card className=\"eco-card p-6\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h2 className=\"text-xl font-semibold text-foreground tracking-tight\">\r\n                      Live Route Map - {currentRoute.name}\r\n                    </h2>\r\n                  </div>\r\n                  \r\n                  {/* Render the actual map component */}\r\n                  <RouteMapSection \r\n                    routeName={currentRoute.name}\r\n                    routeStatus={currentRoute.status}\r\n                    onClose={() => setShowMap(false)}\r\n                  />\r\n                </Card>\r\n              </div>\r\n            )}\r\n\r\n            {!showMap && (\r\n              <Button onClick={() => setShowMap(true)} className=\"mb-8 gap-2\" variant=\"default\">\r\n                <Map size={18} />\r\n                View Live Route Map\r\n              </Button>\r\n            )}\r\n\r\n            {/* Route Details */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8\">\r\n              <div className=\"lg:col-span-2\">\r\n                <Card className=\"eco-card p-6\">\r\n                  <div className=\"flex items-center justify-between mb-4\">\r\n                    <h2 className=\"text-xl font-semibold text-foreground tracking-tight\">\r\n                      {currentRoute.name} Details\r\n                    </h2>\r\n                    <span\r\n                      className={`px-3 py-1 rounded-full text-sm font-semibold ${statusColors[currentRoute.status as keyof typeof statusColors]}`}\r\n                    >\r\n                      {currentRoute.status.charAt(0).toUpperCase() + currentRoute.status.slice(1)}\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div className=\"overflow-x-auto\">\r\n                    <table className=\"w-full text-sm\">\r\n                      <thead className=\"bg-muted/40 border-b border-border\">\r\n                        <tr>\r\n                          <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Stop</th>\r\n                          <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Address</th>\r\n                          <th className=\"px-6 py-4 text-left font-semibold text-foreground\">Scheduled Time</th>\r\n                          <th className=\"px-6 py-4 text-right font-semibold text-foreground\">Waste (kg)</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {currentRoute.stops_list.length === 0 ? (\r\n                          <tr>\r\n                            <td colSpan={4} className=\"px-6 py-8 text-center text-muted-foreground\">\r\n                              No stops found for this route\r\n                            </td>\r\n                          </tr>\r\n                        ) : (\r\n                          currentRoute.stops_list.map((stop, index) => (\r\n                            <tr\r\n                              key={stop.id}\r\n                              className=\"border-b border-border/50 hover:bg-muted/20 transition-colors duration-200\"\r\n                            >\r\n                              <td className=\"px-6 py-4 font-medium text-foreground\">#{index + 1}</td>\r\n                              <td className=\"px-6 py-4 text-foreground\">{stop.address}</td>\r\n                              <td className=\"px-6 py-4 text-muted-foreground\">{stop.time}</td>\r\n                              <td className=\"px-6 py-4 text-right text-foreground font-semibold\">{stop.waste}</td>\r\n                            </tr>\r\n                          ))\r\n                        )}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>\r\n                </Card>\r\n              </div>\r\n\r\n              {/* Route Summary */}\r\n              <div className=\"space-y-4\">\r\n                <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-primary/10\">\r\n                  <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                    Total Distance\r\n                  </p>\r\n                  <p className=\"text-3xl font-bold text-foreground\">{currentRoute.distance} km</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">Route coverage area</p>\r\n                </Card>\r\n\r\n                <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-secondary/10\">\r\n                  <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                    Estimated Duration\r\n                  </p>\r\n                  <p className=\"text-3xl font-bold text-secondary\">{currentRoute.duration}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">Collection time</p>\r\n                </Card>\r\n\r\n                <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-accent/10\">\r\n                  <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                    Total Stops\r\n                  </p>\r\n                  <p className=\"text-3xl font-bold text-accent\">{currentRoute.stops}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">Pickup locations</p>\r\n                </Card>\r\n\r\n                <Card className=\"eco-card p-6 bg-gradient-to-br from-white to-soft-yellow/30\">\r\n                  <p className=\"text-xs text-muted-foreground font-semibold mb-2 uppercase tracking-wide\">\r\n                    Assigned Vehicle\r\n                  </p>\r\n                  <p className=\"text-lg font-bold text-foreground\">{currentRoute.vehicle}</p>\r\n                  <p className=\"text-xs text-muted-foreground mt-2\">Primary collection unit</p>\r\n                </Card>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Alerts Section */}\r\n            {currentRoute.status === \"active\" && (\r\n              <Card className=\"eco-card p-6 mb-8 border-2 border-primary/30\">\r\n                <div className=\"flex items-start gap-4\">\r\n                  <div className=\"flex-shrink-0\">\r\n                    <AlertCircle className=\"text-primary\" size={24} />\r\n                  </div>\r\n                  <div>\r\n                    <h3 className=\"font-semibold text-foreground mb-1\">Route in Progress</h3>\r\n                    <p className=\"text-sm text-muted-foreground\">\r\n                      This route is currently being executed. Real-time updates will be shown as stops are completed.\r\n                    </p>\r\n                  </div>\r\n                </div>\r\n              </Card>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * RouteMapSection - Helper component that matches DB routes with map data\r\n * and renders the appropriate map view\r\n */\r\nfunction RouteMapSection({ \r\n  routeName, \r\n  routeStatus,\r\n  onClose \r\n}: { \r\n  routeName: string\r\n  routeStatus: string\r\n  onClose: () => void \r\n}) {\r\n  // Try to match DB route name with mock map data\r\n  const mapRouteData = useMemo(() => {\r\n    // First try exact name match\r\n    let matchedRoute = getRouteByName(routeName)\r\n    \r\n    // If no match, use the first route with matching status\r\n    if (!matchedRoute) {\r\n      matchedRoute = mockRoutes.find(r => r.status === routeStatus) || mockRoutes[0]\r\n    }\r\n    \r\n    // Override status to match the DB route status\r\n    if (matchedRoute) {\r\n      return {\r\n        ...matchedRoute,\r\n        name: routeName,\r\n        status: routeStatus as \"active\" | \"pending\" | \"completed\",\r\n      }\r\n    }\r\n    \r\n    return mockRoutes[0]\r\n  }, [routeName, routeStatus])\r\n\r\n  return (\r\n    <MapWrapper\r\n      routeData={mapRouteData}\r\n      onClose={onClose}\r\n      autoSimulate={routeStatus === \"active\"}\r\n      simulationSpeed={800}\r\n    />\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 6758, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/dashboard-client.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport Navigation from \"@/components/navigation\"\r\nimport Dashboard from \"@/components/dashboard\"\r\nimport AdminDashboard from \"@/components/admin-dashboard\"\r\nimport TrashTracker from \"@/components/trash-tracker\"\r\nimport AddWasteLog from \"@/components/add-waste-log\"\r\nimport WasteTypes from \"@/components/waste-types\"\r\nimport CostCalculator from \"@/components/cost-calculator\"\r\nimport VehicleRoute from \"@/components/vehicle-route\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { LogOut } from \"lucide-react\"\r\n\r\nexport default function DashboardClient({ user, isAdmin, username }: { user: any; isAdmin: boolean; username: string | null }) {\r\n  const [currentPage, setCurrentPage] = useState(\"dashboard\")\r\n  const [showAddLog, setShowAddLog] = useState(false)\r\n  const [userRole, setUserRole] = useState<\"user\" | \"admin\">(\"user\")\r\n  const [isAuthenticatedAdmin, setIsAuthenticatedAdmin] = useState(false)\r\n  const router = useRouter()\r\n\r\n  // Check sessionStorage for admin mode on client side\r\n  // Only allow admin role if authenticated via admin password\r\n  useEffect(() => {\r\n    if (typeof window !== 'undefined') {\r\n      const adminMode = sessionStorage.getItem(\"adminMode\")\r\n      if (adminMode === \"true\") {\r\n        setIsAuthenticatedAdmin(true)\r\n        setUserRole(\"admin\")\r\n      } else {\r\n        setIsAuthenticatedAdmin(false)\r\n        setUserRole(\"user\") // Force user role if not admin authenticated\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  const handleLogout = async () => {\r\n    const supabase = createClient()\r\n    await supabase.auth.signOut()\r\n    if (typeof window !== 'undefined') {\r\n      sessionStorage.removeItem(\"adminMode\")\r\n    }\r\n    router.push(\"/auth/login\")\r\n  }\r\n\r\n  const handleAddLog = () => {\r\n    setShowAddLog(true)\r\n  }\r\n\r\n  const handleCloseAddLog = () => {\r\n    setShowAddLog(false)\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background\">\r\n      <Navigation \r\n        currentPage={currentPage} \r\n        setCurrentPage={setCurrentPage} \r\n        userRole={userRole} \r\n        setUserRole={setUserRole}\r\n        userEmail={isAuthenticatedAdmin ? \"Administrator\" : (username || user?.email)}\r\n        userLabel={isAuthenticatedAdmin ? \"Admin Access\" : \"User\"}\r\n        onLogout={handleLogout}\r\n      />\r\n\r\n      <main className=\"pt-16\">\r\n        {/* User views - shown for regular users only */}\r\n        {!isAuthenticatedAdmin && currentPage === \"dashboard\" && <Dashboard onAddLog={handleAddLog} />}\r\n        {!isAuthenticatedAdmin && currentPage === \"tracker\" && <TrashTracker onAddLog={handleAddLog} />}\r\n        {!isAuthenticatedAdmin && currentPage === \"waste-types\" && <WasteTypes />}\r\n        {!isAuthenticatedAdmin && currentPage === \"cost\" && <CostCalculator />}\r\n        {!isAuthenticatedAdmin && currentPage === \"vehicle\" && <VehicleRoute />}\r\n\r\n        {/* Admin views - ONLY shown if authenticated as admin via password */}\r\n        {isAuthenticatedAdmin && currentPage === \"dashboard\" && <AdminDashboard />}\r\n        {isAuthenticatedAdmin && currentPage === \"tracker\" && <TrashTracker onAddLog={handleAddLog} />}\r\n        {isAuthenticatedAdmin && currentPage === \"cost\" && <CostCalculator />}\r\n        {isAuthenticatedAdmin && currentPage === \"vehicle\" && <VehicleRoute />}\r\n      </main>\r\n\r\n      {showAddLog && <AddWasteLog onClose={handleCloseAddLog} />}\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA;;;;;;;;;;;;;AAgBe,SAAS,gBAAgB,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAA4D;IAC3H,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,iNAAQ,EAAC;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAmB;IAC3D,MAAM,CAAC,sBAAsB,wBAAwB,GAAG,IAAA,iNAAQ,EAAC;IACjE,MAAM,SAAS,IAAA,+IAAS;IAExB,qDAAqD;IACrD,4DAA4D;IAC5D,IAAA,kNAAS,EAAC;QACR;;IAUF,GAAG,EAAE;IAEL,MAAM,eAAe;QACnB,MAAM,WAAW,IAAA,yIAAY;QAC7B,MAAM,SAAS,IAAI,CAAC,OAAO;QAC3B;;QAGA,OAAO,IAAI,CAAC;IACd;IAEA,MAAM,eAAe;QACnB,cAAc;IAChB;IAEA,MAAM,oBAAoB;QACxB,cAAc;IAChB;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,oIAAU;gBACT,aAAa;gBACb,gBAAgB;gBAChB,UAAU;gBACV,aAAa;gBACb,WAAW,uBAAuB,kBAAmB,YAAY,MAAM;gBACvE,WAAW,uBAAuB,iBAAiB;gBACnD,UAAU;;;;;;0BAGZ,8OAAC;gBAAK,WAAU;;oBAEb,CAAC,wBAAwB,gBAAgB,6BAAe,8OAAC,mIAAS;wBAAC,UAAU;;;;;;oBAC7E,CAAC,wBAAwB,gBAAgB,2BAAa,8OAAC,0IAAY;wBAAC,UAAU;;;;;;oBAC9E,CAAC,wBAAwB,gBAAgB,+BAAiB,8OAAC,wIAAU;;;;;oBACrE,CAAC,wBAAwB,gBAAgB,wBAAU,8OAAC,4IAAc;;;;;oBAClE,CAAC,wBAAwB,gBAAgB,2BAAa,8OAAC,0IAAY;;;;;oBAGnE,wBAAwB,gBAAgB,6BAAe,8OAAC,4IAAc;;;;;oBACtE,wBAAwB,gBAAgB,2BAAa,8OAAC,0IAAY;wBAAC,UAAU;;;;;;oBAC7E,wBAAwB,gBAAgB,wBAAU,8OAAC,4IAAc;;;;;oBACjE,wBAAwB,gBAAgB,2BAAa,8OAAC,0IAAY;;;;;;;;;;;YAGpE,4BAAc,8OAAC,6IAAW;gBAAC,SAAS;;;;;;;;;;;;AAG3C"}},
    {"offset": {"line": 6906, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/app/dashboard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\nimport { useRouter } from \"next/navigation\"\r\nimport { createClient } from \"@/lib/supabase/client\"\r\nimport DashboardClient from \"@/components/dashboard-client\"\r\n\r\nexport default function DashboardPage() {\r\n  const [user, setUser] = useState<any>(null)\r\n  const [username, setUsername] = useState<string | null>(null)\r\n  const [isAdmin, setIsAdmin] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n  const router = useRouter()\r\n\r\n  useEffect(() => {\r\n    const checkAuth = async () => {\r\n      // Check for admin mode first\r\n      const adminMode = typeof window !== 'undefined' ? sessionStorage.getItem(\"adminMode\") : null\r\n      \r\n      if (adminMode === \"true\") {\r\n        setIsAdmin(true)\r\n        setUser({ email: \"Admin User\", id: \"admin\" })\r\n        setUsername(\"Administrator\")\r\n        setLoading(false)\r\n        return\r\n      }\r\n\r\n      // Otherwise check Supabase auth\r\n      const supabase = createClient()\r\n      const { data: { user }, error } = await supabase.auth.getUser()\r\n\r\n      if (error || !user) {\r\n        router.push(\"/auth/login\")\r\n        return\r\n      }\r\n\r\n      setUser(user)\r\n\r\n      // Check if user is admin from profile and get username\r\n      const { data: profile } = await supabase\r\n        .from('profiles')\r\n        .select('is_admin, username')\r\n        .eq('id', user.id)\r\n        .single()\r\n\r\n      setIsAdmin(profile?.is_admin === true || user?.user_metadata?.is_admin === true)\r\n      setUsername(profile?.username || user?.user_metadata?.username || null)\r\n      setLoading(false)\r\n    }\r\n\r\n    checkAuth()\r\n  }, [router])\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-background\">\r\n        <div className=\"text-center\">\r\n          <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4\"></div>\r\n          <p className=\"text-muted-foreground\">Loading...</p>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return <DashboardClient user={user} isAdmin={isAdmin} username={username} />\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAgB;IACxD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,+IAAS;IAExB,IAAA,kNAAS,EAAC;QACR,MAAM,YAAY;YAChB,6BAA6B;YAC7B,MAAM,YAAY,sCAAgC,0BAAsC;YAExF;;YAQA,gCAAgC;YAChC,MAAM,WAAW,IAAA,yIAAY;YAC7B,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,MAAM,SAAS,IAAI,CAAC,OAAO;YAE7D,IAAI,SAAS,CAAC,MAAM;gBAClB,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,QAAQ;YAER,uDAAuD;YACvD,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,SAC7B,IAAI,CAAC,YACL,MAAM,CAAC,sBACP,EAAE,CAAC,MAAM,KAAK,EAAE,EAChB,MAAM;YAET,WAAW,SAAS,aAAa,QAAQ,MAAM,eAAe,aAAa;YAC3E,YAAY,SAAS,YAAY,MAAM,eAAe,YAAY;YAClE,WAAW;QACb;QAEA;IACF,GAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,WAAU;;;;;;kCACf,8OAAC;wBAAE,WAAU;kCAAwB;;;;;;;;;;;;;;;;;IAI7C;IAEA,qBAAO,8OAAC,6IAAe;QAAC,MAAM;QAAM,SAAS;QAAS,UAAU;;;;;;AAClE"}}]
}