(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69638,e=>{"use strict";let t=(0,e.i(75254).default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],69638)},37749,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(70703),a=e.i(70065),l=e.i(67881),n=e.i(15788),i=e.i(46897),c=e.i(3116),o=e.i(75254);let d=(0,o.default)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),u=(0,o.default)("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]),m=(0,o.default)("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]),p=(0,o.default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);var x=e.i(69638);let h=(0,o.default)("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var f=e.i(31278),g=e.i(61284);function j(e){switch(e){case"completed":return"bg-primary/20 text-primary";case"in-progress":case"collecting":return"bg-soft-yellow/40 text-yellow-700";case"moving":return"bg-secondary/20 text-secondary";case"pending":case"idle":default:return"bg-muted/50 text-muted-foreground";case"skipped":return"bg-destructive/20 text-destructive";case"stopped":return"bg-orange-100 text-orange-600"}}function b(e){return 0===e?"Stopped":`${Math.round(e)} km/h`}let N=(0,r.default)(()=>e.A(52169).then(e=>e.MapContainer),{loadableGenerated:{modules:[94970]},ssr:!1}),v=(0,r.default)(()=>e.A(52169).then(e=>e.TileLayer),{loadableGenerated:{modules:[94970]},ssr:!1}),y=(0,r.default)(()=>e.A(52169).then(e=>e.Polyline),{loadableGenerated:{modules:[94970]},ssr:!1}),k=(0,r.default)(()=>e.A(52169).then(e=>e.Marker),{loadableGenerated:{modules:[94970]},ssr:!1}),w=(0,r.default)(()=>e.A(52169).then(e=>e.Popup),{loadableGenerated:{modules:[94970]},ssr:!1}),C=(0,r.default)(()=>e.A(52169).then(e=>e.Tooltip),{loadableGenerated:{modules:[94970]},ssr:!1});function P({routeData:r,onClose:o,autoSimulate:P=!0,simulationSpeed:M=1e3}){let[S,A]=(0,s.useState)(!1),T=(0,s.useRef)(null),{vehicleState:I,isSimulating:R,progress:$,toggleSimulation:B,resetSimulation:E}=function(e,t={}){let{autoStart:r=!1,updateInterval:a=1e3,speedMultiplier:l=1}=t,[n,i]=(0,s.useState)(r),[c,o]=(0,s.useState)(()=>{if("completed"===e.status)return 100;let t=e.vehicle.currentStopIndex,s=e.pickupPoints.length;return s>0?t/s*100:0}),[d,u]=(0,s.useState)(e.vehicle),m=(0,s.useRef)(null),p=(0,s.useRef)(c);(0,s.useEffect)(()=>{p.current=c},[c]),(0,s.useEffect)(()=>{u((0,g.simulateVehicleMovement)(e,c))},[e,c]),(0,s.useEffect)(()=>()=>{m.current&&clearInterval(m.current)},[]),(0,s.useEffect)(()=>(n&&c<100?m.current=setInterval(()=>{o(e=>{let t=Math.min(e+.5*l,100);return t>=100&&i(!1),t})},a):m.current&&(clearInterval(m.current),m.current=null),()=>{m.current&&(clearInterval(m.current),m.current=null)}),[n,c,a,l]);let x=(0,s.useCallback)(()=>{c>=100?(o(0),i(!0)):i(e=>!e)},[c]),h=(0,s.useCallback)(()=>{c>=100&&o(0),i(!0)},[c]),f=(0,s.useCallback)(()=>{i(!1)},[]);return{vehicleState:d,isSimulating:n,progress:c,toggleSimulation:x,startSimulation:h,pauseSimulation:f,resetSimulation:(0,s.useCallback)(()=>{i(!1),o(0),u(e.vehicle)},[e.vehicle]),setProgress:(0,s.useCallback)(e=>{o(Math.max(0,Math.min(100,e)))},[])}}(r,{autoStart:P&&"active"===r.status,updateInterval:M}),G=function(){let[t,r]=(0,s.useState)(null);return(0,s.useEffect)(()=>{e.A(71400).then(e=>{r(e.divIcon({className:"vehicle-marker",html:`
          <div class="vehicle-marker-inner">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2"/>
              <path d="M15 18H9"/>
              <path d="M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14"/>
              <circle cx="17" cy="18" r="2"/>
              <circle cx="7" cy="18" r="2"/>
            </svg>
          </div>
        `,iconSize:[48,48],iconAnchor:[24,24]}))})},[]),t}(),L=(0,s.useMemo)(()=>r.routePath.map(e=>[e.lat,e.lng]),[r.routePath]),O=(0,s.useMemo)(()=>{let e=Math.floor($/100*r.routePath.length);return r.routePath.slice(0,e+1).map(e=>[e.lat,e.lng])},[r.routePath,$]),H=(0,s.useMemo)(()=>{let e=r.routePath;if(0===e.length)return[40.7128,-74.006];let t=e.reduce((e,t)=>e+t.lat,0),s=e.reduce((e,t)=>e+t.lng,0);return[t/e.length,s/e.length]},[r.routePath]),U=(0,s.useCallback)(()=>{A(!0)},[]),W=(0,s.useMemo)(()=>({completed:r.pickupPoints.filter(e=>"completed"===e.status).length,inProgress:r.pickupPoints.filter(e=>"in-progress"===e.status).length,pending:r.pickupPoints.filter(e=>"pending"===e.status).length,total:r.pickupPoints.length}),[r.pickupPoints]);return(0,t.jsxs)("div",{className:"w-full space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary/10 rounded-full",children:[(0,t.jsx)(n.Truck,{className:"text-primary",size:16}),(0,t.jsx)("span",{className:"text-sm font-medium text-foreground",children:I.name}),(0,t.jsx)("span",{className:`px-2 py-0.5 rounded-full text-xs font-semibold ${j(I.status)}`,children:I.status})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-full",children:[(0,t.jsx)(d,{className:"text-muted-foreground",size:14}),(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:b(I.speed)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["active"===r.status&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:B,className:"gap-2",children:[R?(0,t.jsx)(u,{size:14}):(0,t.jsx)(m,{size:14}),R?"Pause":"Resume"]}),(0,t.jsxs)(l.Button,{variant:"outline",size:"sm",onClick:E,className:"gap-2",children:[(0,t.jsx)(p,{size:14}),"Reset"]})]}),o&&(0,t.jsx)(l.Button,{variant:"outline",size:"sm",onClick:o,children:"Close Map"})]})]}),(0,t.jsx)("div",{className:"w-full bg-muted/30 rounded-full h-2 overflow-hidden",children:(0,t.jsx)("div",{className:"bg-primary h-full rounded-full transition-all duration-300 ease-out",style:{width:`${$}%`}})}),(0,t.jsx)(a.Card,{className:"eco-card overflow-hidden",children:(0,t.jsxs)("div",{className:"relative w-full h-[400px] sm:h-[500px] lg:h-[600px]",children:[!S&&(0,t.jsx)("div",{className:"absolute inset-0 flex items-center justify-center bg-muted/20 z-10",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)(f.Loader2,{className:"animate-spin text-primary mx-auto mb-2",size:32}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:"Loading map..."})]})}),(0,t.jsxs)(N,{center:H,zoom:14,scrollWheelZoom:!0,className:"w-full h-full rounded-lg z-0",ref:T,whenReady:U,children:[(0,t.jsx)(v,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),(0,t.jsx)(y,{positions:L,pathOptions:{color:"#94a3b8",weight:4,opacity:.5,dashArray:"8, 8"}}),O.length>1&&(0,t.jsx)(y,{positions:O,pathOptions:{color:"oklch(0.62 0.22 142)",weight:5,opacity:.9}}),r.pickupPoints.map(e=>(0,t.jsx)(z,{point:e},e.id)),G&&(0,t.jsxs)(k,{position:[I.position.lat,I.position.lng],icon:G,children:[(0,t.jsx)(w,{children:(0,t.jsxs)("div",{className:"p-2 min-w-[180px]",children:[(0,t.jsxs)("h4",{className:"font-semibold text-foreground mb-2 flex items-center gap-2",children:[(0,t.jsx)(n.Truck,{size:16,className:"text-primary"}),I.name]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Status: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:I.status})]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Speed: ",(0,t.jsx)("span",{className:"font-medium text-foreground",children:b(I.speed)})]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Current Stop: ",(0,t.jsxs)("span",{className:"font-medium text-foreground",children:["#",I.currentStopIndex+1]})]})]})]})}),(0,t.jsx)(C,{direction:"top",offset:[0,-20],permanent:!1,children:(0,t.jsx)("span",{className:"font-medium",children:I.name})})]})]})]})}),(0,t.jsxs)("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[(0,t.jsxs)(a.Card,{className:"eco-card p-4 bg-gradient-to-br from-white to-primary/5",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(x.CheckCircle,{className:"text-primary",size:16}),(0,t.jsx)("span",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"Completed"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:W.completed})]}),(0,t.jsxs)(a.Card,{className:"eco-card p-4 bg-gradient-to-br from-white to-soft-yellow/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(f.Loader2,{className:"text-yellow-600",size:16}),(0,t.jsx)("span",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"In Progress"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:W.inProgress})]}),(0,t.jsxs)(a.Card,{className:"eco-card p-4 bg-gradient-to-br from-white to-muted/30",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(h,{className:"text-muted-foreground",size:16}),(0,t.jsx)("span",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"Pending"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:W.pending})]}),(0,t.jsxs)(a.Card,{className:"eco-card p-4 bg-gradient-to-br from-white to-secondary/10",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)(i.MapPin,{className:"text-secondary",size:16}),(0,t.jsx)("span",{className:"text-xs font-semibold text-muted-foreground uppercase",children:"Total Stops"})]}),(0,t.jsx)("p",{className:"text-2xl font-bold text-foreground",children:W.total})]})]}),(0,t.jsxs)(a.Card,{className:"eco-card p-4",children:[(0,t.jsxs)("h3",{className:"font-semibold text-foreground mb-3 flex items-center gap-2",children:[(0,t.jsx)(i.MapPin,{className:"text-primary",size:18}),"Pickup Points"]}),(0,t.jsx)("div",{className:"space-y-2 max-h-[200px] overflow-y-auto",children:r.pickupPoints.map((e,s)=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg transition-colors ${"in-progress"===e.status?"bg-soft-yellow/30 border border-yellow-300":"completed"===e.status?"bg-primary/5 border border-primary/20":"bg-muted/20 border border-transparent"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${"completed"===e.status?"bg-primary text-white":"in-progress"===e.status?"bg-yellow-500 text-white":"bg-muted text-muted-foreground"}`,children:s+1}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm font-medium text-foreground",children:e.address}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[(0,t.jsx)(c.Clock,{size:12}),(0,t.jsx)("span",{children:e.scheduledTime}),(0,t.jsx)("span",{children:"•"}),(0,t.jsxs)("span",{children:[e.expectedWaste," kg"]})]})]})]}),(0,t.jsx)("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${j(e.status)}`,children:e.status})]},e.id))})]})]})}function z({point:r}){let a=function(t){let[r,a]=(0,s.useState)(null);return(0,s.useEffect)(()=>{e.A(71400).then(e=>{a(e.divIcon({className:`pickup-marker ${"completed"===t?"pickup-completed":"in-progress"===t?"pickup-in-progress":"pickup-pending"}`,html:`
          <div class="pickup-marker-inner">
            <span class="pickup-dot"></span>
          </div>
        `,iconSize:[24,24],iconAnchor:[12,12]}))})},[t]),r}(r.status);return a?(0,t.jsxs)(k,{position:[r.position.lat,r.position.lng],icon:a,children:[(0,t.jsx)(w,{children:(0,t.jsxs)("div",{className:"p-2 min-w-[160px]",children:[(0,t.jsxs)("h4",{className:"font-semibold text-foreground mb-2",children:["Stop #",r.order]}),(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsx)("p",{className:"text-muted-foreground",children:r.address}),(0,t.jsxs)("p",{className:"text-muted-foreground flex items-center gap-1",children:[(0,t.jsx)(c.Clock,{size:12}),r.scheduledTime]}),(0,t.jsxs)("p",{className:"text-muted-foreground",children:["Expected: ",(0,t.jsxs)("span",{className:"font-medium",children:[r.expectedWaste," kg"]})]}),(0,t.jsx)("p",{className:`font-medium ${function(e){switch(e){case"completed":return"text-primary";case"in-progress":case"collecting":return"text-yellow-600";case"moving":return"text-secondary";case"pending":case"idle":default:return"text-muted-foreground";case"skipped":return"text-destructive";case"stopped":return"text-orange-500"}}(r.status)}`,children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]})]})}),(0,t.jsx)(C,{direction:"top",offset:[0,-10],children:(0,t.jsxs)("span",{children:["#",r.order," - ",r.address]})})]}):null}e.s(["default",()=>P],37749)},63775,e=>{e.n(e.i(37749))},52169,e=>{e.v(t=>Promise.all(["static/chunks/983c3130c13fb657.js","static/chunks/1442f9ddf5556540.js"].map(t=>e.l(t))).then(()=>t(94970)))},71400,e=>{e.v(t=>Promise.all(["static/chunks/1442f9ddf5556540.js"].map(t=>e.l(t))).then(()=>t(32322)))}]);