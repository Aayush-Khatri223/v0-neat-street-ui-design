{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/lib/hooks/use-route-simulation.ts"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * useRouteSimulation Hook\r\n * \r\n * Custom hook for simulating real-time vehicle movement along a route.\r\n * Provides smooth animation of vehicle position updates.\r\n * \r\n * Features:\r\n * - Configurable update interval\r\n * - Play/pause/reset controls\r\n * - Progress tracking\r\n * - Automatic stop detection\r\n */\r\n\r\nimport { useState, useEffect, useCallback, useRef } from \"react\"\r\nimport type { RouteMapData, VehicleState } from \"@/lib/types/route-map\"\r\nimport { simulateVehicleMovement } from \"@/lib/data/mock-routes\"\r\n\r\ninterface UseRouteSimulationOptions {\r\n  /** Whether to start simulation automatically */\r\n  autoStart?: boolean\r\n  /** Update interval in milliseconds */\r\n  updateInterval?: number\r\n  /** Speed multiplier for simulation (1 = normal, 2 = 2x speed, etc.) */\r\n  speedMultiplier?: number\r\n}\r\n\r\ninterface UseRouteSimulationReturn {\r\n  /** Current vehicle state with updated position */\r\n  vehicleState: VehicleState\r\n  /** Whether simulation is currently running */\r\n  isSimulating: boolean\r\n  /** Current progress percentage (0-100) */\r\n  progress: number\r\n  /** Toggle simulation play/pause */\r\n  toggleSimulation: () => void\r\n  /** Start simulation */\r\n  startSimulation: () => void\r\n  /** Pause simulation */\r\n  pauseSimulation: () => void\r\n  /** Reset simulation to beginning */\r\n  resetSimulation: () => void\r\n  /** Set progress manually (0-100) */\r\n  setProgress: (progress: number) => void\r\n}\r\n\r\n/**\r\n * Hook for simulating vehicle movement along a route\r\n */\r\nexport function useRouteSimulation(\r\n  routeData: RouteMapData,\r\n  options: UseRouteSimulationOptions = {}\r\n): UseRouteSimulationReturn {\r\n  const {\r\n    autoStart = false,\r\n    updateInterval = 1000,\r\n    speedMultiplier = 1,\r\n  } = options\r\n\r\n  // State\r\n  const [isSimulating, setIsSimulating] = useState(autoStart)\r\n  const [progress, setProgress] = useState(() => {\r\n    // Calculate initial progress based on current stop\r\n    if (routeData.status === \"completed\") return 100\r\n    const currentIndex = routeData.vehicle.currentStopIndex\r\n    const totalStops = routeData.pickupPoints.length\r\n    return totalStops > 0 ? (currentIndex / totalStops) * 100 : 0\r\n  })\r\n  const [vehicleState, setVehicleState] = useState<VehicleState>(routeData.vehicle)\r\n\r\n  // Refs for interval management\r\n  const intervalRef = useRef<NodeJS.Timeout | null>(null)\r\n  const progressRef = useRef(progress)\r\n\r\n  // Keep progress ref in sync\r\n  useEffect(() => {\r\n    progressRef.current = progress\r\n  }, [progress])\r\n\r\n  // Update vehicle state when progress changes\r\n  useEffect(() => {\r\n    const newVehicleState = simulateVehicleMovement(routeData, progress)\r\n    setVehicleState(newVehicleState)\r\n  }, [routeData, progress])\r\n\r\n  // Clear interval on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current)\r\n      }\r\n    }\r\n  }, [])\r\n\r\n  // Handle simulation interval\r\n  useEffect(() => {\r\n    if (isSimulating && progress < 100) {\r\n      intervalRef.current = setInterval(() => {\r\n        setProgress((prev) => {\r\n          const increment = (0.5 * speedMultiplier) // Progress increment per tick\r\n          const newProgress = Math.min(prev + increment, 100)\r\n          \r\n          // Stop simulation when complete\r\n          if (newProgress >= 100) {\r\n            setIsSimulating(false)\r\n          }\r\n          \r\n          return newProgress\r\n        })\r\n      }, updateInterval)\r\n    } else if (intervalRef.current) {\r\n      clearInterval(intervalRef.current)\r\n      intervalRef.current = null\r\n    }\r\n\r\n    return () => {\r\n      if (intervalRef.current) {\r\n        clearInterval(intervalRef.current)\r\n        intervalRef.current = null\r\n      }\r\n    }\r\n  }, [isSimulating, progress, updateInterval, speedMultiplier])\r\n\r\n  // Control functions\r\n  const toggleSimulation = useCallback(() => {\r\n    if (progress >= 100) {\r\n      // Reset and start if completed\r\n      setProgress(0)\r\n      setIsSimulating(true)\r\n    } else {\r\n      setIsSimulating((prev) => !prev)\r\n    }\r\n  }, [progress])\r\n\r\n  const startSimulation = useCallback(() => {\r\n    if (progress >= 100) {\r\n      setProgress(0)\r\n    }\r\n    setIsSimulating(true)\r\n  }, [progress])\r\n\r\n  const pauseSimulation = useCallback(() => {\r\n    setIsSimulating(false)\r\n  }, [])\r\n\r\n  const resetSimulation = useCallback(() => {\r\n    setIsSimulating(false)\r\n    setProgress(0)\r\n    setVehicleState(routeData.vehicle)\r\n  }, [routeData.vehicle])\r\n\r\n  const setProgressManually = useCallback((newProgress: number) => {\r\n    setProgress(Math.max(0, Math.min(100, newProgress)))\r\n  }, [])\r\n\r\n  return {\r\n    vehicleState,\r\n    isSimulating,\r\n    progress,\r\n    toggleSimulation,\r\n    startSimulation,\r\n    pauseSimulation,\r\n    resetSimulation,\r\n    setProgress: setProgressManually,\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/lib/utils/map-utils.ts"],"sourcesContent":["/**\r\n * Map Utility Functions\r\n * \r\n * Helper functions for map-related calculations and styling.\r\n * Used by the LiveRouteMap component.\r\n */\r\n\r\nimport type { Coordinate, VehicleState, PickupPoint } from \"@/lib/types/route-map\"\r\n\r\n/**\r\n * Get text color class based on status\r\n */\r\nexport function getStatusColor(status: VehicleState[\"status\"] | PickupPoint[\"status\"]): string {\r\n  switch (status) {\r\n    case \"completed\":\r\n      return \"text-primary\"\r\n    case \"in-progress\":\r\n    case \"collecting\":\r\n      return \"text-yellow-600\"\r\n    case \"moving\":\r\n      return \"text-secondary\"\r\n    case \"pending\":\r\n    case \"idle\":\r\n      return \"text-muted-foreground\"\r\n    case \"skipped\":\r\n      return \"text-destructive\"\r\n    case \"stopped\":\r\n      return \"text-orange-500\"\r\n    default:\r\n      return \"text-muted-foreground\"\r\n  }\r\n}\r\n\r\n/**\r\n * Get background color class based on status\r\n */\r\nexport function getStatusBgColor(status: VehicleState[\"status\"] | PickupPoint[\"status\"]): string {\r\n  switch (status) {\r\n    case \"completed\":\r\n      return \"bg-primary/20 text-primary\"\r\n    case \"in-progress\":\r\n    case \"collecting\":\r\n      return \"bg-soft-yellow/40 text-yellow-700\"\r\n    case \"moving\":\r\n      return \"bg-secondary/20 text-secondary\"\r\n    case \"pending\":\r\n    case \"idle\":\r\n      return \"bg-muted/50 text-muted-foreground\"\r\n    case \"skipped\":\r\n      return \"bg-destructive/20 text-destructive\"\r\n    case \"stopped\":\r\n      return \"bg-orange-100 text-orange-600\"\r\n    default:\r\n      return \"bg-muted/50 text-muted-foreground\"\r\n  }\r\n}\r\n\r\n/**\r\n * Format speed for display\r\n */\r\nexport function formatSpeed(speed: number): string {\r\n  if (speed === 0) return \"Stopped\"\r\n  return `${Math.round(speed)} km/h`\r\n}\r\n\r\n/**\r\n * Calculate progress percentage based on current position along route\r\n */\r\nexport function calculateProgress(\r\n  currentPosition: Coordinate,\r\n  routePath: Coordinate[]\r\n): number {\r\n  if (routePath.length === 0) return 0\r\n  \r\n  // Find the closest point on the route\r\n  let minDistance = Infinity\r\n  let closestIndex = 0\r\n  \r\n  for (let i = 0; i < routePath.length; i++) {\r\n    const distance = calculateDistance(currentPosition, routePath[i])\r\n    if (distance < minDistance) {\r\n      minDistance = distance\r\n      closestIndex = i\r\n    }\r\n  }\r\n  \r\n  return (closestIndex / (routePath.length - 1)) * 100\r\n}\r\n\r\n/**\r\n * Calculate distance between two coordinates (Haversine formula)\r\n */\r\nexport function calculateDistance(coord1: Coordinate, coord2: Coordinate): number {\r\n  const R = 6371 // Earth's radius in km\r\n  const dLat = toRad(coord2.lat - coord1.lat)\r\n  const dLng = toRad(coord2.lng - coord1.lng)\r\n  \r\n  const a = \r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(toRad(coord1.lat)) * Math.cos(toRad(coord2.lat)) *\r\n    Math.sin(dLng / 2) * Math.sin(dLng / 2)\r\n  \r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\r\n  \r\n  return R * c\r\n}\r\n\r\n/**\r\n * Convert degrees to radians\r\n */\r\nfunction toRad(deg: number): number {\r\n  return deg * (Math.PI / 180)\r\n}\r\n\r\n/**\r\n * Calculate the center point of multiple coordinates\r\n */\r\nexport function calculateCenter(coordinates: Coordinate[]): Coordinate {\r\n  if (coordinates.length === 0) {\r\n    return { lat: 0, lng: 0 }\r\n  }\r\n  \r\n  const sumLat = coordinates.reduce((acc, coord) => acc + coord.lat, 0)\r\n  const sumLng = coordinates.reduce((acc, coord) => acc + coord.lng, 0)\r\n  \r\n  return {\r\n    lat: sumLat / coordinates.length,\r\n    lng: sumLng / coordinates.length,\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate bounds for a set of coordinates\r\n */\r\nexport function calculateBounds(coordinates: Coordinate[]): {\r\n  north: number\r\n  south: number\r\n  east: number\r\n  west: number\r\n} {\r\n  if (coordinates.length === 0) {\r\n    return { north: 0, south: 0, east: 0, west: 0 }\r\n  }\r\n  \r\n  return {\r\n    north: Math.max(...coordinates.map(c => c.lat)),\r\n    south: Math.min(...coordinates.map(c => c.lat)),\r\n    east: Math.max(...coordinates.map(c => c.lng)),\r\n    west: Math.min(...coordinates.map(c => c.lng)),\r\n  }\r\n}\r\n\r\n/**\r\n * Interpolate position between two coordinates\r\n */\r\nexport function interpolatePosition(\r\n  start: Coordinate,\r\n  end: Coordinate,\r\n  progress: number // 0 to 1\r\n): Coordinate {\r\n  return {\r\n    lat: start.lat + (end.lat - start.lat) * progress,\r\n    lng: start.lng + (end.lng - start.lng) * progress,\r\n  }\r\n}\r\n\r\n/**\r\n * Calculate heading (bearing) between two coordinates\r\n */\r\nexport function calculateHeading(from: Coordinate, to: Coordinate): number {\r\n  const dLng = toRad(to.lng - from.lng)\r\n  const lat1 = toRad(from.lat)\r\n  const lat2 = toRad(to.lat)\r\n  \r\n  const y = Math.sin(dLng) * Math.cos(lat2)\r\n  const x = Math.cos(lat1) * Math.sin(lat2) - \r\n            Math.sin(lat1) * Math.cos(lat2) * Math.cos(dLng)\r\n  \r\n  const heading = Math.atan2(y, x) * (180 / Math.PI)\r\n  \r\n  return (heading + 360) % 360\r\n}\r\n\r\n/**\r\n * Format duration from minutes to human readable string\r\n */\r\nexport function formatDuration(minutes: number): string {\r\n  if (minutes < 60) {\r\n    return `${Math.round(minutes)} min`\r\n  }\r\n  \r\n  const hours = Math.floor(minutes / 60)\r\n  const mins = Math.round(minutes % 60)\r\n  \r\n  if (mins === 0) {\r\n    return `${hours}h`\r\n  }\r\n  \r\n  return `${hours}h ${mins}m`\r\n}\r\n\r\n/**\r\n * Format distance in kilometers\r\n */\r\nexport function formatDistance(km: number): string {\r\n  if (km < 1) {\r\n    return `${Math.round(km * 1000)} m`\r\n  }\r\n  return `${km.toFixed(1)} km`\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/lib/utils/routing-utils.ts"],"sourcesContent":["/**\r\n * Routing Utilities using OSRM (OpenStreetMap Routing Machine)\r\n * Provides real road-following routes instead of straight lines\r\n */\r\n\r\nimport type { Coordinate } from '@/lib/types/route-map'\r\n\r\n/**\r\n * OSRM API response types\r\n */\r\ninterface OSRMRoute {\r\n  geometry: {\r\n    coordinates: [number, number][] // [lng, lat] pairs\r\n  }\r\n  distance: number\r\n  duration: number\r\n}\r\n\r\ninterface OSRMResponse {\r\n  code: string\r\n  routes: OSRMRoute[]\r\n}\r\n\r\n/**\r\n * Get a route between two points using OSRM\r\n * Returns an array of coordinates that follow actual roads\r\n */\r\nexport async function getRouteFromOSRM(\r\n  start: Coordinate,\r\n  end: Coordinate\r\n): Promise<Coordinate[]> {\r\n  try {\r\n    // OSRM uses lng,lat format (opposite of lat,lng)\r\n    const url = `https://router.project-osrm.org/route/v1/driving/${start.lng},${start.lat};${end.lng},${end.lat}?overview=full&geometries=geojson`\r\n    \r\n    const response = await fetch(url)\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`OSRM API error: ${response.status}`)\r\n    }\r\n    \r\n    const data: OSRMResponse = await response.json()\r\n    \r\n    if (data.code !== 'Ok' || !data.routes || data.routes.length === 0) {\r\n      throw new Error('No route found')\r\n    }\r\n    \r\n    // Convert OSRM coordinates [lng, lat] to our format {lat, lng}\r\n    const routeCoordinates: Coordinate[] = data.routes[0].geometry.coordinates.map(\r\n      ([lng, lat]) => ({ lat, lng })\r\n    )\r\n    \r\n    return routeCoordinates\r\n  } catch (error) {\r\n    console.warn('OSRM routing failed, using fallback:', error)\r\n    // Fallback to straight line\r\n    return [start, end]\r\n  }\r\n}\r\n\r\n/**\r\n * Get a complete route through multiple waypoints using OSRM\r\n * Each segment follows actual roads\r\n */\r\nexport async function getFullRouteFromOSRM(\r\n  waypoints: Coordinate[]\r\n): Promise<Coordinate[]> {\r\n  if (waypoints.length < 2) {\r\n    return waypoints\r\n  }\r\n  \r\n  try {\r\n    // Build coordinates string for OSRM (lng,lat;lng,lat;...)\r\n    const coordString = waypoints\r\n      .map(wp => `${wp.lng},${wp.lat}`)\r\n      .join(';')\r\n    \r\n    const url = `https://router.project-osrm.org/route/v1/driving/${coordString}?overview=full&geometries=geojson`\r\n    \r\n    const response = await fetch(url)\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`OSRM API error: ${response.status}`)\r\n    }\r\n    \r\n    const data: OSRMResponse = await response.json()\r\n    \r\n    if (data.code !== 'Ok' || !data.routes || data.routes.length === 0) {\r\n      throw new Error('No route found')\r\n    }\r\n    \r\n    // Convert OSRM coordinates [lng, lat] to our format {lat, lng}\r\n    const routeCoordinates: Coordinate[] = data.routes[0].geometry.coordinates.map(\r\n      ([lng, lat]) => ({ lat, lng })\r\n    )\r\n    \r\n    return routeCoordinates\r\n  } catch (error) {\r\n    console.warn('OSRM full route failed, using fallback:', error)\r\n    // Fallback to straight lines between waypoints\r\n    return generateFallbackRoute(waypoints)\r\n  }\r\n}\r\n\r\n/**\r\n * Fallback route generation when OSRM is unavailable\r\n * Creates intermediate points between waypoints for smoother visualization\r\n */\r\nfunction generateFallbackRoute(waypoints: Coordinate[]): Coordinate[] {\r\n  const path: Coordinate[] = []\r\n  \r\n  for (let i = 0; i < waypoints.length - 1; i++) {\r\n    const start = waypoints[i]\r\n    const end = waypoints[i + 1]\r\n    \r\n    // Add start point\r\n    path.push(start)\r\n    \r\n    // Add intermediate points for smoother lines\r\n    const steps = 5\r\n    for (let j = 1; j < steps; j++) {\r\n      path.push({\r\n        lat: start.lat + ((end.lat - start.lat) * j) / steps,\r\n        lng: start.lng + ((end.lng - start.lng) * j) / steps,\r\n      })\r\n    }\r\n  }\r\n  \r\n  // Add final point\r\n  if (waypoints.length > 0) {\r\n    path.push(waypoints[waypoints.length - 1])\r\n  }\r\n  \r\n  return path\r\n}\r\n\r\n/**\r\n * Calculate distance between two coordinates (Haversine formula)\r\n * Returns distance in meters\r\n */\r\nexport function calculateDistanceMeters(coord1: Coordinate, coord2: Coordinate): number {\r\n  const R = 6371000 // Earth's radius in meters\r\n  const dLat = (coord2.lat - coord1.lat) * Math.PI / 180\r\n  const dLng = (coord2.lng - coord1.lng) * Math.PI / 180\r\n  const a = \r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(coord1.lat * Math.PI / 180) * Math.cos(coord2.lat * Math.PI / 180) *\r\n    Math.sin(dLng / 2) * Math.sin(dLng / 2)\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\r\n  return R * c\r\n}\r\n\r\n/**\r\n * Calculate total route distance from an array of coordinates\r\n */\r\nexport function calculateTotalRouteDistance(route: Coordinate[]): number {\r\n  let totalDistance = 0\r\n  for (let i = 0; i < route.length - 1; i++) {\r\n    totalDistance += calculateDistanceMeters(route[i], route[i + 1])\r\n  }\r\n  return totalDistance\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/shtsu/OneDrive/Desktop/neatstreet%20map/v0-neat-street-ui-design/components/map/live-route-map.tsx"],"sourcesContent":["\"use client\"\r\n\r\n/**\r\n * LiveRouteMap Component\r\n * \r\n * A dynamic map component for visualizing waste collection vehicle routes.\r\n * Uses Leaflet + React-Leaflet for mapping functionality.\r\n * Now uses OSRM (OpenStreetMap Routing Machine) for real road-following routes.\r\n * \r\n * Features:\r\n * - Real-time vehicle position tracking\r\n * - OSRM-powered route visualization (follows actual roads)\r\n * - Route polyline visualization\r\n * - Custom markers for vehicle and pickup points\r\n * - Responsive design for desktop and mobile\r\n * - Lazy loading for performance optimization\r\n * - Junction markers with nearest junction highlighting for selected houses\r\n */\r\n\r\nimport { useEffect, useState, useRef, useMemo, useCallback } from \"react\"\r\nimport dynamic from \"next/dynamic\"\r\nimport { Card } from \"@/components/ui/card\"\r\nimport { Button } from \"@/components/ui/button\"\r\nimport { \r\n  Truck, \r\n  MapPin, \r\n  Clock, \r\n  Navigation, \r\n  Pause, \r\n  Play, \r\n  RotateCcw,\r\n  CheckCircle,\r\n  Circle,\r\n  Loader2,\r\n  Home,\r\n  GitBranch\r\n} from \"lucide-react\"\r\nimport type { RouteMapData, VehicleState, PickupPoint, Coordinate } from \"@/lib/types/route-map\"\r\nimport { useRouteSimulation } from \"@/lib/hooks/use-route-simulation\"\r\nimport { \r\n  getStatusColor, \r\n  getStatusBgColor,\r\n  formatSpeed,\r\n  calculateProgress \r\n} from \"@/lib/utils/map-utils\"\r\nimport { getFullRouteFromOSRM } from \"@/lib/utils/routing-utils\"\r\n\r\n// Define the main road network in the Bhaktapur area (roads that the truck follows)\r\n// These are waypoints for OSRM to generate the actual road-following route\r\n// Route from Jagati through the area, passing by collection junctions for houses\r\nconst ROUTE_WAYPOINTS: Coordinate[] = [\r\n  { lat: 27.6705, lng: 85.4450 },  // Start: Jagati area\r\n  { lat: 27.6710, lng: 85.4420 },  // Waypoint: Along Jagati road\r\n  { lat: 27.6715, lng: 85.4380 },  // Waypoint: First house cluster junction\r\n  { lat: 27.6720, lng: 85.4340 },  // Waypoint: Second house cluster junction  \r\n  { lat: 27.6725, lng: 85.4300 },  // End: Third house cluster junction\r\n]\r\n\r\n// 3 nearby houses - each cluster near different junctions along the route\r\n// Residents walk from these houses to the nearest junction on the road\r\nconst NEARBY_HOUSES: { id: string; position: Coordinate; address: string; expectedWaste: number }[] = [\r\n  { \r\n    id: 'house-1', \r\n    position: { lat: 27.6720, lng: 85.4375 }, // House 1 - near first junction\r\n    address: 'House #12, Yalachhe Chochhen',\r\n    expectedWaste: 15\r\n  },\r\n  { \r\n    id: 'house-2', \r\n    position: { lat: 27.6725, lng: 85.4335 }, // House 2 - near second junction\r\n    address: 'House #45, Lalachi Road',\r\n    expectedWaste: 22\r\n  },\r\n  { \r\n    id: 'house-3', \r\n    position: { lat: 27.6730, lng: 85.4295 }, // House 3 - near third junction\r\n    address: 'House #8, Near Sunrise Bank',\r\n    expectedWaste: 18\r\n  },\r\n]\r\n\r\n// Calculate distance between two coordinates (Haversine formula)\r\nfunction calculateDistance(coord1: Coordinate, coord2: Coordinate): number {\r\n  const R = 6371 // Earth's radius in km\r\n  const dLat = (coord2.lat - coord1.lat) * Math.PI / 180\r\n  const dLng = (coord2.lng - coord1.lng) * Math.PI / 180\r\n  const a = \r\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n    Math.cos(coord1.lat * Math.PI / 180) * Math.cos(coord2.lat * Math.PI / 180) *\r\n    Math.sin(dLng / 2) * Math.sin(dLng / 2)\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a))\r\n  return R * c * 1000 // Return distance in meters\r\n}\r\n\r\n// Calculate total waste from nearby houses\r\nfunction getTotalWasteFromHouses(): number {\r\n  return NEARBY_HOUSES.reduce((sum, house) => sum + house.expectedWaste, 0)\r\n}\r\n\r\n// Find the nearest point on a route path for a given position\r\nfunction findNearestPointOnRoute(position: Coordinate, routePath: Coordinate[]): { point: Coordinate; distance: number; index: number } {\r\n  let nearestPoint = routePath[0]\r\n  let minDistance = calculateDistance(position, routePath[0])\r\n  let nearestIndex = 0\r\n  \r\n  for (let i = 0; i < routePath.length; i++) {\r\n    const distance = calculateDistance(position, routePath[i])\r\n    if (distance < minDistance) {\r\n      minDistance = distance\r\n      nearestPoint = routePath[i]\r\n      nearestIndex = i\r\n    }\r\n  }\r\n  \r\n  return { point: nearestPoint, distance: minDistance, index: nearestIndex }\r\n}\r\n\r\n// Find the single best collection point that minimizes total walking distance for all houses\r\nfunction findBestCollectionPoint(houses: typeof NEARBY_HOUSES, routePath: Coordinate[]): { point: Coordinate; index: number } {\r\n  if (routePath.length === 0) {\r\n    return { point: { lat: 27.6705, lng: 85.4305 }, index: 0 }\r\n  }\r\n  \r\n  let bestPoint = routePath[0]\r\n  let bestIndex = 0\r\n  let minTotalDistance = Infinity\r\n  \r\n  // Check every point on the route to find the one that minimizes total walking distance\r\n  for (let i = 0; i < routePath.length; i++) {\r\n    let totalDistance = 0\r\n    for (const house of houses) {\r\n      totalDistance += calculateDistance(house.position, routePath[i])\r\n    }\r\n    if (totalDistance < minTotalDistance) {\r\n      minTotalDistance = totalDistance\r\n      bestPoint = routePath[i]\r\n      bestIndex = i\r\n    }\r\n  }\r\n  \r\n  return { point: bestPoint, index: bestIndex }\r\n}\r\n\r\n// Import Leaflet CSS - required for proper map rendering\r\nimport \"leaflet/dist/leaflet.css\"\r\n\r\n// Dynamically import map components to prevent SSR issues with Leaflet\r\nconst MapContainer = dynamic(\r\n  () => import(\"react-leaflet\").then((mod) => mod.MapContainer),\r\n  { ssr: false }\r\n)\r\nconst TileLayer = dynamic(\r\n  () => import(\"react-leaflet\").then((mod) => mod.TileLayer),\r\n  { ssr: false }\r\n)\r\nconst Polyline = dynamic(\r\n  () => import(\"react-leaflet\").then((mod) => mod.Polyline),\r\n  { ssr: false }\r\n)\r\nconst Marker = dynamic(\r\n  () => import(\"react-leaflet\").then((mod) => mod.Marker),\r\n  { ssr: false }\r\n)\r\nconst Popup = dynamic(\r\n  () => import(\"react-leaflet\").then((mod) => mod.Popup),\r\n  { ssr: false }\r\n)\r\nconst Tooltip = dynamic(\r\n  () => import(\"react-leaflet\").then((mod) => mod.Tooltip),\r\n  { ssr: false }\r\n)\r\n\r\n// Custom hook for vehicle marker icon\r\nfunction useVehicleIcon() {\r\n  const [icon, setIcon] = useState<any>(null)\r\n\r\n  useEffect(() => {\r\n    // Import Leaflet on client side only\r\n    import(\"leaflet\").then((L) => {\r\n      const vehicleIcon = L.divIcon({\r\n        className: \"vehicle-marker\",\r\n        html: `\r\n          <div class=\"vehicle-marker-inner\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"32\" height=\"32\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n              <path d=\"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2\"/>\r\n              <path d=\"M15 18H9\"/>\r\n              <path d=\"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14\"/>\r\n              <circle cx=\"17\" cy=\"18\" r=\"2\"/>\r\n              <circle cx=\"7\" cy=\"18\" r=\"2\"/>\r\n            </svg>\r\n          </div>\r\n        `,\r\n        iconSize: [48, 48],\r\n        iconAnchor: [24, 24],\r\n      })\r\n      setIcon(vehicleIcon)\r\n    })\r\n  }, [])\r\n\r\n  return icon\r\n}\r\n\r\n// Custom hook for pickup point icon based on status\r\nfunction usePickupIcon(status: PickupPoint[\"status\"]) {\r\n  const [icon, setIcon] = useState<any>(null)\r\n\r\n  useEffect(() => {\r\n    import(\"leaflet\").then((L) => {\r\n      const colorClass = status === \"completed\" \r\n        ? \"pickup-completed\" \r\n        : status === \"in-progress\" \r\n          ? \"pickup-in-progress\" \r\n          : \"pickup-pending\"\r\n      \r\n      const pickupIcon = L.divIcon({\r\n        className: `pickup-marker ${colorClass}`,\r\n        html: `\r\n          <div class=\"pickup-marker-inner\">\r\n            <span class=\"pickup-dot\"></span>\r\n          </div>\r\n        `,\r\n        iconSize: [24, 24],\r\n        iconAnchor: [12, 12],\r\n      })\r\n      setIcon(pickupIcon)\r\n    })\r\n  }, [status])\r\n\r\n  return icon\r\n}\r\n\r\n// Custom hook for selected house icon (houses picked for junction analysis)\r\nfunction useSelectedHouseIcon() {\r\n  const [icon, setIcon] = useState<any>(null)\r\n\r\n  useEffect(() => {\r\n    import(\"leaflet\").then((L) => {\r\n      const houseIcon = L.divIcon({\r\n        className: \"selected-house-marker\",\r\n        html: `\r\n          <div class=\"selected-house-marker-inner\" style=\"background: linear-gradient(135deg, #3b82f6, #1d4ed8); border-radius: 50%; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.5); border: 3px solid white;\">\r\n            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 24 24\" fill=\"white\" stroke=\"white\" stroke-width=\"1\">\r\n              <path d=\"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z\"></path>\r\n              <polyline points=\"9 22 9 12 15 12 15 22\"></polyline>\r\n            </svg>\r\n          </div>\r\n        `,\r\n        iconSize: [32, 32],\r\n        iconAnchor: [16, 16],\r\n      })\r\n      setIcon(houseIcon)\r\n    })\r\n  }, [])\r\n\r\n  return icon\r\n}\r\n\r\n// Custom hook for junction icon\r\nfunction useJunctionIcon(isNearest: boolean = false) {\r\n  const [icon, setIcon] = useState<any>(null)\r\n\r\n  useEffect(() => {\r\n    import(\"leaflet\").then((L) => {\r\n      const junctionIcon = L.divIcon({\r\n        className: isNearest ? \"nearest-junction-marker\" : \"junction-marker\",\r\n        html: isNearest \r\n          ? `\r\n            <div class=\"nearest-junction-marker-inner\" style=\"background: linear-gradient(135deg, #f59e0b, #d97706); border-radius: 8px; width: 36px; height: 36px; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 16px rgba(245, 158, 11, 0.6); border: 3px solid white; animation: pulse 2s infinite;\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"5\"></line>\r\n                <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\r\n                <line x1=\"1\" y1=\"12\" x2=\"5\" y2=\"12\"></line>\r\n                <line x1=\"19\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\r\n              </svg>\r\n            </div>\r\n          `\r\n          : `\r\n            <div class=\"junction-marker-inner\" style=\"background: linear-gradient(135deg, #8b5cf6, #7c3aed); border-radius: 6px; width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; box-shadow: 0 3px 10px rgba(139, 92, 246, 0.4); border: 2px solid white;\">\r\n              <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"white\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\r\n                <circle cx=\"12\" cy=\"12\" r=\"3\"></circle>\r\n                <line x1=\"12\" y1=\"1\" x2=\"12\" y2=\"5\"></line>\r\n                <line x1=\"12\" y1=\"19\" x2=\"12\" y2=\"23\"></line>\r\n                <line x1=\"1\" y1=\"12\" x2=\"5\" y2=\"12\"></line>\r\n                <line x1=\"19\" y1=\"12\" x2=\"23\" y2=\"12\"></line>\r\n              </svg>\r\n            </div>\r\n          `,\r\n        iconSize: isNearest ? [36, 36] : [28, 28],\r\n        iconAnchor: isNearest ? [18, 18] : [14, 14],\r\n      })\r\n      setIcon(junctionIcon)\r\n    })\r\n  }, [isNearest])\r\n\r\n  return icon\r\n}\r\n\r\ninterface LiveRouteMapProps {\r\n  routeData: RouteMapData\r\n  onClose?: () => void\r\n  autoSimulate?: boolean\r\n  simulationSpeed?: number\r\n}\r\n\r\n// Junction type for dynamically generated junctions on the route\r\ninterface Junction {\r\n  id: string\r\n  position: Coordinate\r\n  name: string\r\n  isCollectionPoint?: boolean\r\n}\r\n\r\n// House with its nearest junction info\r\ninterface HouseJunctionInfo {\r\n  house: typeof NEARBY_HOUSES[0]\r\n  nearestJunction: Junction\r\n  distance: number\r\n  walkingPath: Coordinate[]\r\n}\r\n\r\n/**\r\n * LiveRouteMap - Main map component for vehicle route visualization\r\n */\r\nexport default function LiveRouteMap({ \r\n  routeData, \r\n  onClose,\r\n  autoSimulate = true,\r\n  simulationSpeed = 1000\r\n}: LiveRouteMapProps) {\r\n  const [isMapReady, setIsMapReady] = useState(false)\r\n  const mapRef = useRef<any>(null)\r\n  \r\n  // OSRM Route state - fetched from OpenStreetMap Routing Machine\r\n  const [osrmTruckRoute, setOsrmTruckRoute] = useState<Coordinate[]>([])\r\n  const [isLoadingRoute, setIsLoadingRoute] = useState(true)\r\n  const [routeError, setRouteError] = useState<string | null>(null)\r\n  \r\n  // Animation state for truck following OSRM route\r\n  const [truckPosition, setTruckPosition] = useState<Coordinate>(ROUTE_WAYPOINTS[0])\r\n  const [routeProgress, setRouteProgress] = useState(0)\r\n  const [isAnimating, setIsAnimating] = useState(false)\r\n  const animationRef = useRef<NodeJS.Timeout | null>(null)\r\n\r\n  // Fetch OSRM route on component mount\r\n  useEffect(() => {\r\n    const fetchOSRMRoute = async () => {\r\n      setIsLoadingRoute(true)\r\n      setRouteError(null)\r\n      \r\n      try {\r\n        // Get route from OSRM that follows actual roads\r\n        const route = await getFullRouteFromOSRM(ROUTE_WAYPOINTS)\r\n        setOsrmTruckRoute(route)\r\n        if (route.length > 0) {\r\n          setTruckPosition(route[0])\r\n        }\r\n        console.log(`OSRM returned ${route.length} points for truck route`)\r\n      } catch (error) {\r\n        console.error('Failed to fetch OSRM route:', error)\r\n        setRouteError('Failed to load road route, using fallback')\r\n        // Fallback to waypoints if OSRM fails\r\n        setOsrmTruckRoute(ROUTE_WAYPOINTS)\r\n        setTruckPosition(ROUTE_WAYPOINTS[0])\r\n      } finally {\r\n        setIsLoadingRoute(false)\r\n      }\r\n    }\r\n    \r\n    fetchOSRMRoute()\r\n  }, [])\r\n\r\n  // Find the nearest junction on the OSRM route for EACH house\r\n  // Returns an array of junctions, one for each house\r\n  const houseJunctions = useMemo((): Junction[] => {\r\n    if (osrmTruckRoute.length === 0) return []\r\n    \r\n    const junctions: Junction[] = []\r\n    \r\n    NEARBY_HOUSES.forEach((house, index) => {\r\n      let nearestPoint = osrmTruckRoute[0]\r\n      let minDistance = Infinity\r\n      \r\n      // Find the nearest point on the route for this house\r\n      for (let i = 0; i < osrmTruckRoute.length; i++) {\r\n        const distance = calculateDistance(house.position, osrmTruckRoute[i])\r\n        if (distance < minDistance) {\r\n          minDistance = distance\r\n          nearestPoint = osrmTruckRoute[i]\r\n        }\r\n      }\r\n      \r\n      junctions.push({\r\n        id: `junction-${index + 1}`,\r\n        position: nearestPoint,\r\n        name: `Junction ${index + 1} (${house.address.split(',')[0]})`,\r\n        isCollectionPoint: true\r\n      })\r\n    })\r\n    \r\n    return junctions\r\n  }, [osrmTruckRoute])\r\n\r\n  // Calculate each house's walking distance to its nearest junction\r\n  const houseJunctionInfo = useMemo((): HouseJunctionInfo[] => {\r\n    if (houseJunctions.length === 0) return []\r\n    \r\n    return NEARBY_HOUSES.map((house, index) => {\r\n      const junction = houseJunctions[index]\r\n      const distance = calculateDistance(house.position, junction.position)\r\n      \r\n      // Generate L-shaped walking path from house to its nearest junction\r\n      const walkingPath: Coordinate[] = [\r\n        house.position,\r\n        { lat: house.position.lat, lng: junction.position.lng },\r\n        junction.position\r\n      ]\r\n      \r\n      return {\r\n        house,\r\n        nearestJunction: junction,\r\n        distance: Math.round(distance),\r\n        walkingPath\r\n      }\r\n    })\r\n  }, [houseJunctions])\r\n\r\n  // Animate truck along OSRM route\r\n  useEffect(() => {\r\n    if (!isAnimating || osrmTruckRoute.length === 0) return\r\n    \r\n    const animateStep = () => {\r\n      setRouteProgress(prev => {\r\n        const newProgress = prev + 0.5 // 0.5% per step\r\n        if (newProgress >= 100) {\r\n          setIsAnimating(false)\r\n          return 100\r\n        }\r\n        \r\n        // Calculate position along route\r\n        const pointIndex = Math.floor((newProgress / 100) * (osrmTruckRoute.length - 1))\r\n        const clampedIndex = Math.min(pointIndex, osrmTruckRoute.length - 1)\r\n        setTruckPosition(osrmTruckRoute[clampedIndex])\r\n        \r\n        return newProgress\r\n      })\r\n    }\r\n    \r\n    animationRef.current = setInterval(animateStep, simulationSpeed / 10)\r\n    \r\n    return () => {\r\n      if (animationRef.current) {\r\n        clearInterval(animationRef.current)\r\n      }\r\n    }\r\n  }, [isAnimating, osrmTruckRoute, simulationSpeed])\r\n\r\n  // Start animation when route loads\r\n  useEffect(() => {\r\n    if (!isLoadingRoute && osrmTruckRoute.length > 0 && autoSimulate) {\r\n      setIsAnimating(true)\r\n    }\r\n  }, [isLoadingRoute, osrmTruckRoute, autoSimulate])\r\n\r\n  // Use route simulation hook for real-time updates (legacy - keeping for pickup points)\r\n  const {\r\n    vehicleState,\r\n    isSimulating,\r\n    progress,\r\n    toggleSimulation,\r\n    resetSimulation\r\n  } = useRouteSimulation(routeData, {\r\n    autoStart: false, // We handle animation ourselves now\r\n    updateInterval: simulationSpeed,\r\n  })\r\n\r\n  // Toggle animation\r\n  const handleToggleAnimation = () => {\r\n    if (isAnimating) {\r\n      setIsAnimating(false)\r\n    } else {\r\n      if (routeProgress >= 100) {\r\n        setRouteProgress(0)\r\n        if (osrmTruckRoute.length > 0) {\r\n          setTruckPosition(osrmTruckRoute[0])\r\n        }\r\n      }\r\n      setIsAnimating(true)\r\n    }\r\n  }\r\n\r\n  // Reset animation\r\n  const handleResetAnimation = () => {\r\n    setIsAnimating(false)\r\n    setRouteProgress(0)\r\n    if (osrmTruckRoute.length > 0) {\r\n      setTruckPosition(osrmTruckRoute[0])\r\n    }\r\n  }\r\n\r\n  // Get custom icons\r\n  const vehicleIcon = useVehicleIcon()\r\n\r\n  // Calculate map center\r\n  const mapCenter = useMemo(() => {\r\n    const path = routeData.routePath\r\n    if (path.length === 0) return [27.6721, 85.4279] as [number, number] // Default to Bhaktapur, Nepal\r\n    \r\n    const sumLat = path.reduce((acc, coord) => acc + coord.lat, 0)\r\n    const sumLng = path.reduce((acc, coord) => acc + coord.lng, 0)\r\n    return [sumLat / path.length, sumLng / path.length] as [number, number]\r\n  }, [routeData.routePath])\r\n\r\n  // Handle map load\r\n  const handleMapReady = useCallback(() => {\r\n    setIsMapReady(true)\r\n  }, [])\r\n\r\n  // Status info for display\r\n  const statusInfo = useMemo(() => ({\r\n    completed: routeData.pickupPoints.filter(p => p.status === \"completed\").length,\r\n    inProgress: routeData.pickupPoints.filter(p => p.status === \"in-progress\").length,\r\n    pending: routeData.pickupPoints.filter(p => p.status === \"pending\").length,\r\n    total: routeData.pickupPoints.length,\r\n  }), [routeData.pickupPoints])\r\n\r\n  // Total waste collected at the junction\r\n  const totalWasteAtJunction = useMemo(() => getTotalWasteFromHouses(), [])\r\n\r\n  // Truck road path coordinates for the map - uses OSRM route when available\r\n  const truckRoadPathCoords = useMemo(() => {\r\n    const routeToUse = osrmTruckRoute.length > 0 ? osrmTruckRoute : ROUTE_WAYPOINTS\r\n    return routeToUse.map(coord => [coord.lat, coord.lng] as [number, number])\r\n  }, [osrmTruckRoute])\r\n\r\n  // Completed path (truck has traveled) - based on our animation progress\r\n  const completedPathCoords = useMemo(() => {\r\n    const routeToUse = osrmTruckRoute.length > 0 ? osrmTruckRoute : ROUTE_WAYPOINTS\r\n    const completedIndex = Math.floor((routeProgress / 100) * routeToUse.length)\r\n    return routeToUse\r\n      .slice(0, completedIndex + 1)\r\n      .map(coord => [coord.lat, coord.lng] as [number, number])\r\n  }, [osrmTruckRoute, routeProgress])\r\n\r\n  return (\r\n    <div className=\"w-full space-y-4\">\r\n      {/* Map Controls */}\r\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\r\n        <div className=\"flex items-center gap-3\">\r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-primary/10 rounded-full\">\r\n            <Truck className=\"text-primary\" size={16} />\r\n            <span className=\"text-sm font-medium text-foreground\">\r\n              Waste Collection Truck\r\n            </span>\r\n            <span className={`px-2 py-0.5 rounded-full text-xs font-semibold ${isAnimating ? 'bg-green-100 text-green-700' : 'bg-gray-100 text-gray-600'}`}>\r\n              {isAnimating ? 'Moving' : routeProgress >= 100 ? 'Completed' : 'Stopped'}\r\n            </span>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center gap-2 px-3 py-1.5 bg-muted/50 rounded-full\">\r\n            <Navigation className=\"text-muted-foreground\" size={14} />\r\n            <span className=\"text-sm text-muted-foreground\">\r\n              {Math.round(routeProgress)}% complete\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex items-center gap-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleToggleAnimation}\r\n            className=\"gap-2\"\r\n            disabled={isLoadingRoute}\r\n          >\r\n            {isAnimating ? <Pause size={14} /> : <Play size={14} />}\r\n            {isAnimating ? \"Pause\" : \"Resume\"}\r\n          </Button>\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            onClick={handleResetAnimation}\r\n            className=\"gap-2\"\r\n            disabled={isLoadingRoute}\r\n          >\r\n            <RotateCcw size={14} />\r\n            Reset\r\n          </Button>\r\n          {onClose && (\r\n            <Button variant=\"outline\" size=\"sm\" onClick={onClose}>\r\n              Close Map\r\n            </Button>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Progress Bar */}\r\n      <div className=\"w-full bg-muted/30 rounded-full h-2 overflow-hidden\">\r\n        <div \r\n          className=\"bg-primary h-full rounded-full transition-all duration-300 ease-out\"\r\n          style={{ width: `${routeProgress}%` }}\r\n        />\r\n      </div>\r\n\r\n      {/* Map Container */}\r\n      <Card className=\"eco-card overflow-hidden\">\r\n        <div className=\"relative w-full h-[400px] sm:h-[500px] lg:h-[600px]\">\r\n          {(!isMapReady || isLoadingRoute) && (\r\n            <div className=\"absolute inset-0 flex items-center justify-center bg-muted/20 z-10\">\r\n              <div className=\"text-center\">\r\n                <Loader2 className=\"animate-spin text-primary mx-auto mb-2\" size={32} />\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  {isLoadingRoute ? 'Loading road route from OSRM...' : 'Loading map...'}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          )}\r\n          \r\n          {routeError && (\r\n            <div className=\"absolute top-2 right-2 z-20 px-3 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-md\">\r\n              {routeError}\r\n            </div>\r\n          )}\r\n          \r\n          {typeof window !== \"undefined\" && (\r\n            <MapContainer\r\n              center={mapCenter}\r\n              zoom={14}\r\n              scrollWheelZoom={true}\r\n              className=\"w-full h-full rounded-lg z-0\"\r\n              ref={mapRef}\r\n              whenReady={handleMapReady}\r\n            >\r\n              {/* OpenStreetMap Tiles (free, no API key needed) */}\r\n              <TileLayer\r\n                attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n              />\r\n\r\n              {/* Full Route Path (gray/light) - OSRM route that follows actual roads */}\r\n              <Polyline\r\n                positions={truckRoadPathCoords}\r\n                pathOptions={{\r\n                  color: \"#94a3b8\",\r\n                  weight: 6,\r\n                  opacity: 0.7,\r\n                }}\r\n              />\r\n\r\n              {/* Completed Route Path (primary color) - where truck has traveled */}\r\n              {completedPathCoords.length > 1 && (\r\n                <Polyline\r\n                  positions={completedPathCoords}\r\n                  pathOptions={{\r\n                    color: \"oklch(0.62 0.22 142)\",\r\n                    weight: 6,\r\n                    opacity: 0.9,\r\n                  }}\r\n                />\r\n              )}\r\n\r\n              {/* Pickup Point Markers */}\r\n              {routeData.pickupPoints.map((point) => (\r\n                <PickupPointMarker key={point.id} point={point} />\r\n              ))}\r\n\r\n              {/* Vehicle Marker - animated along OSRM route */}\r\n              {vehicleIcon && (\r\n                <Marker\r\n                  position={[truckPosition.lat, truckPosition.lng]}\r\n                  icon={vehicleIcon}\r\n                >\r\n                  <Popup>\r\n                    <div className=\"p-2 min-w-[180px]\">\r\n                      <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\r\n                        <Truck size={16} className=\"text-primary\" />\r\n                        Waste Collection Truck\r\n                      </h4>\r\n                      <div className=\"space-y-1 text-sm\">\r\n                        <p className=\"text-muted-foreground\">\r\n                          Status: <span className=\"font-medium text-foreground\">{isAnimating ? 'Moving' : 'Stopped'}</span>\r\n                        </p>\r\n                        <p className=\"text-muted-foreground\">\r\n                          Progress: <span className=\"font-medium text-foreground\">{Math.round(routeProgress)}%</span>\r\n                        </p>\r\n                        <p className=\"text-muted-foreground\">\r\n                          Route: <span className=\"font-medium text-foreground\">OSRM Road Following</span>\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </Popup>\r\n                  <Tooltip direction=\"top\" offset={[0, -20]} permanent={false}>\r\n                    <span className=\"font-medium\">Waste Truck</span>\r\n                  </Tooltip>\r\n                </Marker>\r\n              )}\r\n\r\n              {/* Junction Markers - one for each house's nearest point on the route */}\r\n              {houseJunctions.map((junction, index) => (\r\n                <JunctionMarker \r\n                  key={junction.id}\r\n                  junction={junction} \r\n                  isNearest={true}\r\n                  totalWaste={NEARBY_HOUSES[index]?.expectedWaste}\r\n                />\r\n              ))}\r\n\r\n              {/* Nearby House Markers - 3 houses that bring waste to their nearest junctions */}\r\n              {NEARBY_HOUSES.map((house) => {\r\n                const info = houseJunctionInfo.find(h => h.house.id === house.id)\r\n                return (\r\n                  <NearbyHouseMarker \r\n                    key={house.id} \r\n                    house={house} \r\n                    nearestJunction={info?.nearestJunction || null}\r\n                    walkingDistance={info?.distance || 0}\r\n                  />\r\n                )\r\n              })}\r\n\r\n              {/* Walking paths from each house to its nearest junction */}\r\n              {houseJunctionInfo.map((info) => (\r\n                <Polyline\r\n                  key={`walk-${info.house.id}`}\r\n                  positions={info.walkingPath.map(coord => [coord.lat, coord.lng] as [number, number])}\r\n                  pathOptions={{\r\n                    color: \"#3b82f6\",\r\n                    weight: 2,\r\n                    opacity: 0.7,\r\n                    dashArray: \"6, 4\",\r\n                  }}\r\n                />\r\n              ))}\r\n            </MapContainer>\r\n          )}\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Map Legend */}\r\n      <Card className=\"eco-card p-4\">\r\n        <h3 className=\"font-semibold text-foreground mb-3 flex items-center gap-2\">\r\n          <MapPin className=\"text-primary\" size={18} />\r\n          Map Legend\r\n          {osrmTruckRoute.length > 0 && (\r\n            <span className=\"ml-2 px-2 py-0.5 text-xs bg-green-100 text-green-700 rounded-full\">\r\n              OSRM Road Routing\r\n            </span>\r\n          )}\r\n        </h3>\r\n        <div className=\"grid grid-cols-2 sm:grid-cols-5 gap-4 text-sm\">\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-blue-700 flex items-center justify-center\">\r\n              <Home className=\"text-white\" size={12} />\r\n            </div>\r\n            <span className=\"text-muted-foreground\">Nearby House</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-6 h-6 rounded-md bg-gradient-to-br from-purple-500 to-purple-700 flex items-center justify-center\">\r\n              <GitBranch className=\"text-white\" size={12} />\r\n            </div>\r\n            <span className=\"text-muted-foreground\">Junction</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-6 h-6 rounded-md bg-gradient-to-br from-amber-500 to-amber-600 flex items-center justify-center\">\r\n              <Truck className=\"text-white\" size={12} />\r\n            </div>\r\n            <span className=\"text-muted-foreground\">Collection Point</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-8 h-1 bg-gray-700 rounded\"></div>\r\n            <span className=\"text-muted-foreground\">Truck Road</span>\r\n          </div>\r\n          <div className=\"flex items-center gap-2\">\r\n            <div className=\"w-8 h-1 border-t-2 border-dashed border-blue-500\"></div>\r\n            <span className=\"text-muted-foreground\">Walking Path</span>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Collection Junctions Info - Truck visits each house's nearest junction */}\r\n      <Card className=\"eco-card p-4 bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200\">\r\n        <h3 className=\"font-semibold text-foreground mb-3 flex items-center gap-2\">\r\n          <Truck className=\"text-amber-500\" size={18} />\r\n          Collection Junctions ({houseJunctions.length} stops)\r\n        </h3>\r\n        <div className=\"flex items-center justify-between p-4 rounded-lg bg-white/80 border border-amber-200\">\r\n          <div className=\"flex items-center gap-3\">\r\n            <div className=\"w-12 h-12 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 text-white flex items-center justify-center\">\r\n              <GitBranch size={24} />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-lg font-bold text-foreground\">Route with {houseJunctions.length} Collection Points</p>\r\n              <p className=\"text-sm text-muted-foreground\">Truck stops at each house's nearest junction along the route</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <p className=\"text-2xl font-bold text-amber-600\">{totalWasteAtJunction} kg</p>\r\n            <p className=\"text-xs text-muted-foreground\">total waste collected</p>\r\n            <p className=\"text-xs text-muted-foreground mt-1\">from {NEARBY_HOUSES.length} houses</p>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Houses bringing waste to their nearest junctions */}\r\n      <Card className=\"eco-card p-4\">\r\n        <h3 className=\"font-semibold text-foreground mb-3 flex items-center gap-2\">\r\n          <Home className=\"text-blue-500\" size={18} />\r\n          Houses &amp; Their Nearest Junctions\r\n        </h3>\r\n        <p className=\"text-sm text-muted-foreground mb-3\">\r\n          Each house walks to its nearest junction on the road. The truck travels along the route\r\n          and stops at each junction to collect waste.\r\n        </p>\r\n        <div className=\"space-y-3\">\r\n          {houseJunctionInfo.map((info, index) => (\r\n            <div \r\n              key={info.house.id}\r\n              className={`flex items-center justify-between p-3 rounded-lg border\r\n                info.nearestJunction.id === collectionJunction?.id \r\n                'bg-gradient-to-r from-amber-50 to-orange-50 border-amber-200'\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                <span className=\"w-8 h-8 rounded-full bg-amber-500 text-white flex items-center justify-center text-sm font-bold\">\r\n                  {index + 1}\r\n                </span>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-foreground\">{info.house.address}</p>\r\n                  <p className=\"text-xs text-muted-foreground\">\r\n                     Junction: <span className=\"font-medium\">{info.nearestJunction.name}</span>\r\n                  </p>\r\n                  <p className=\"text-xs text-muted-foreground\">Expected waste: {info.house.expectedWaste} kg</p>\r\n                </div>\r\n              </div>\r\n              <div className=\"flex items-center gap-2\">\r\n                <div className=\"text-right\">\r\n                  <p className=\"text-sm font-bold text-amber-600\">{info.distance}m</p>\r\n                  <p className=\"text-xs text-muted-foreground\">walking</p>\r\n                </div>\r\n                <div className=\"w-6 h-6 rounded-md bg-amber-500 text-white flex items-center justify-center\">\r\n                  <Navigation size={12} />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n\r\n      {/* Route Statistics */}\r\n      <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\r\n        <Card className=\"eco-card p-4 bg-gradient-to-br from-white to-primary/5\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <CheckCircle className=\"text-primary\" size={16} />\r\n            <span className=\"text-xs font-semibold text-muted-foreground uppercase\">Completed</span>\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-foreground\">{statusInfo.completed}</p>\r\n        </Card>\r\n        \r\n        <Card className=\"eco-card p-4 bg-gradient-to-br from-white to-soft-yellow/30\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <Loader2 className=\"text-yellow-600\" size={16} />\r\n            <span className=\"text-xs font-semibold text-muted-foreground uppercase\">In Progress</span>\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-foreground\">{statusInfo.inProgress}</p>\r\n        </Card>\r\n        \r\n        <Card className=\"eco-card p-4 bg-gradient-to-br from-white to-muted/30\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <Circle className=\"text-muted-foreground\" size={16} />\r\n            <span className=\"text-xs font-semibold text-muted-foreground uppercase\">Pending</span>\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-foreground\">{statusInfo.pending}</p>\r\n        </Card>\r\n        \r\n        <Card className=\"eco-card p-4 bg-gradient-to-br from-white to-secondary/10\">\r\n          <div className=\"flex items-center gap-2 mb-1\">\r\n            <MapPin className=\"text-secondary\" size={16} />\r\n            <span className=\"text-xs font-semibold text-muted-foreground uppercase\">Total Stops</span>\r\n          </div>\r\n          <p className=\"text-2xl font-bold text-foreground\">{statusInfo.total}</p>\r\n        </Card>\r\n      </div>\r\n\r\n      {/* Pickup Points List */}\r\n      <Card className=\"eco-card p-4\">\r\n        <h3 className=\"font-semibold text-foreground mb-3 flex items-center gap-2\">\r\n          <MapPin className=\"text-primary\" size={18} />\r\n          Pickup Points\r\n        </h3>\r\n        <div className=\"space-y-2 max-h-[200px] overflow-y-auto\">\r\n          {routeData.pickupPoints.map((point, index) => (\r\n            <div \r\n              key={point.id}\r\n              className={`flex items-center justify-between p-3 rounded-lg transition-colors ${\r\n                point.status === \"in-progress\" \r\n                  ? \"bg-soft-yellow/30 border border-yellow-300\" \r\n                  : point.status === \"completed\"\r\n                    ? \"bg-primary/5 border border-primary/20\"\r\n                    : \"bg-muted/20 border border-transparent\"\r\n              }`}\r\n            >\r\n              <div className=\"flex items-center gap-3\">\r\n                <span className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-bold ${\r\n                  point.status === \"completed\" \r\n                    ? \"bg-primary text-white\" \r\n                    : point.status === \"in-progress\"\r\n                      ? \"bg-yellow-500 text-white\"\r\n                      : \"bg-muted text-muted-foreground\"\r\n                }`}>\r\n                  {index + 1}\r\n                </span>\r\n                <div>\r\n                  <p className=\"text-sm font-medium text-foreground\">{point.address}</p>\r\n                  <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\r\n                    <Clock size={12} />\r\n                    <span>{point.scheduledTime}</span>\r\n                    <span></span>\r\n                    <span>{point.expectedWaste} kg</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <span className={`px-2 py-1 rounded-full text-xs font-semibold ${getStatusBgColor(point.status)}`}>\r\n                {point.status}\r\n              </span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\n/**\r\n * PickupPointMarker - Individual pickup point marker component\r\n */\r\nfunction PickupPointMarker({ point }: { point: PickupPoint }) {\r\n  const icon = usePickupIcon(point.status)\r\n\r\n  if (!icon) return null\r\n\r\n  return (\r\n    <Marker\r\n      position={[point.position.lat, point.position.lng]}\r\n      icon={icon}\r\n    >\r\n      <Popup>\r\n        <div className=\"p-2 min-w-[160px]\">\r\n          <h4 className=\"font-semibold text-foreground mb-2\">Stop #{point.order}</h4>\r\n          <div className=\"space-y-1 text-sm\">\r\n            <p className=\"text-muted-foreground\">{point.address}</p>\r\n            <p className=\"text-muted-foreground flex items-center gap-1\">\r\n              <Clock size={12} />\r\n              {point.scheduledTime}\r\n            </p>\r\n            <p className=\"text-muted-foreground\">\r\n              Expected: <span className=\"font-medium\">{point.expectedWaste} kg</span>\r\n            </p>\r\n            <p className={`font-medium ${getStatusColor(point.status)}`}>\r\n              {point.status.charAt(0).toUpperCase() + point.status.slice(1)}\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </Popup>\r\n      <Tooltip direction=\"top\" offset={[0, -10]}>\r\n        <span>#{point.order} - {point.address}</span>\r\n      </Tooltip>\r\n    </Marker>\r\n  )\r\n}\r\n\r\n/**\r\n * JunctionMarker - Junction point marker component\r\n */\r\nfunction JunctionMarker({ junction, isNearest, totalWaste }: { junction: Junction; isNearest: boolean; totalWaste?: number }) {\r\n  const icon = useJunctionIcon(isNearest)\r\n\r\n  if (!icon) return null\r\n\r\n  return (\r\n    <Marker\r\n      position={[junction.position.lat, junction.position.lng]}\r\n      icon={icon}\r\n    >\r\n      <Popup>\r\n        <div className=\"p-2 min-w-[180px]\">\r\n          <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\r\n            <span className={`w-3 h-3 rounded-sm ${isNearest ? 'bg-amber-500' : 'bg-purple-500'}`}></span>\r\n            {junction.name}\r\n          </h4>\r\n          <div className=\"space-y-1 text-sm\">\r\n            {isNearest && (\r\n              <p className=\"text-amber-600 font-medium\">\r\n                 Optimal Collection Point\r\n              </p>\r\n            )}\r\n            <p className=\"text-muted-foreground\">\r\n              Type: <span className=\"font-medium\">{isNearest ? 'Collection Junction' : 'Road Junction'}</span>\r\n            </p>\r\n            {isNearest && totalWaste && (\r\n              <p className=\"text-muted-foreground\">\r\n                Total Waste: <span className=\"font-medium\">{totalWaste} kg</span>\r\n              </p>\r\n            )}\r\n            <p className=\"text-xs text-muted-foreground mt-1\">\r\n               Placed on OSRM road path\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </Popup>\r\n      <Tooltip direction=\"top\" offset={[0, -10]}>\r\n        <span>{isNearest ? ' ' : ''}{junction.name}</span>\r\n      </Tooltip>\r\n    </Marker>\r\n  )\r\n}\r\n\r\n/**\r\n * NearbyHouseMarker - House marker for houses bringing waste to their nearest junction\r\n */\r\nfunction NearbyHouseMarker({ house, nearestJunction, walkingDistance }: { \r\n  house: typeof NEARBY_HOUSES[0]; \r\n  nearestJunction: Junction | null;\r\n  walkingDistance: number;\r\n}) {\r\n  const icon = useSelectedHouseIcon()\r\n\r\n  if (!icon) return null\r\n\r\n  return (\r\n    <Marker\r\n      position={[house.position.lat, house.position.lng]}\r\n      icon={icon}\r\n    >\r\n      <Popup>\r\n        <div className=\"p-2 min-w-[180px]\">\r\n          <h4 className=\"font-semibold text-foreground mb-2 flex items-center gap-2\">\r\n            <span className=\"w-3 h-3 rounded-full bg-blue-500\"></span>\r\n            Nearby House\r\n          </h4>\r\n          <div className=\"space-y-1 text-sm\">\r\n            <p className=\"text-muted-foreground font-medium\">{house.address}</p>\r\n            <p className=\"text-muted-foreground\">\r\n              Expected Waste: <span className=\"font-medium\">{house.expectedWaste} kg</span>\r\n            </p>\r\n            {nearestJunction && (\r\n              <>\r\n                <p className=\"text-muted-foreground\">\r\n                  Nearest Junction: <span className=\"font-medium\">{nearestJunction.name}</span>\r\n                </p>\r\n                <p className=\"text-muted-foreground\">\r\n                  Walk Distance: <span className=\"font-medium\">{walkingDistance}m</span>\r\n                </p>\r\n              </>\r\n            )}\r\n            <p className=\"text-blue-600 text-xs\">\r\n               Residents walk to nearest junction\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </Popup>\r\n      <Tooltip direction=\"top\" offset={[0, -10]}>\r\n        <span> {house.address}</span>\r\n      </Tooltip>\r\n    </Marker>\r\n  )\r\n}\r\n"],"names":[],"mappings":"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"}}]
}